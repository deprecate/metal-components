(function(){this.metal=this.metal||{},this.metalNamed=this.metalNamed||{};var t={};t["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},t.classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},t.possibleConstructorReturn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},function(){var e=function(){function e(){t.classCallCheck(this,e)}return e.abstractMethod=function(){throw Error("Unimplemented abstract method")},e.collectSuperClassesProperty=function(t,e){for(var n=[t[e]];t.__proto__&&!t.__proto__.isPrototypeOf(Function);)t=t.__proto__,n.push(t[e]);return n},e.getFunctionName=function(t){if(!t.name){var e=t.toString();t.name=e.substring(9,e.indexOf("("))}return t.name},e.getUid=function(t){return t?t[e.UID_PROPERTY]||(t[e.UID_PROPERTY]=e.uniqueIdCounter_++):e.uniqueIdCounter_++},e.identityFunction=function(t){return t},e.isBoolean=function(t){return"boolean"==typeof t},e.isDef=function(t){return void 0!==t},e.isDefAndNotNull=function(t){return e.isDef(t)&&!e.isNull(t)},e.isDocument=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t["typeof"](e))&&9===e.nodeType},e.isElement=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t["typeof"](e))&&1===e.nodeType},e.isFunction=function(t){return"function"==typeof t},e.isNull=function(t){return null===t},e.isNumber=function(t){return"number"==typeof t},e.isWindow=function(t){return null!==t&&t===t.window},e.isObject=function(e){var n="undefined"==typeof e?"undefined":t["typeof"](e);return"object"===n&&null!==e||"function"===n},e.isPromise=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t["typeof"](e))&&"function"==typeof e.then},e.isString=function(t){return"string"==typeof t},e.mergeSuperClassesProperty=function(t,n,r){var o=n+"_MERGED";if(t.hasOwnProperty(o))return!1;var i=e.collectSuperClassesProperty(t,n);return r&&(i=r(i)),t[o]=i,!0},e.nullFunction=function(){},e}();e.UID_PROPERTY="core_"+(1e9*Math.random()>>>0),e.uniqueIdCounter_=1,this.metal.core=e}.call(this),function(){var e=this.metal.core,n=function(){function n(){t.classCallCheck(this,n)}return n.equal=function(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return t.length===e.length},n.firstDefinedValue=function(t){for(var e=0;e<t.length;e++)if(void 0!==t[e])return t[e]},n.flatten=function(t,e){for(var r=e||[],o=0;o<t.length;o++)Array.isArray(t[o])?n.flatten(t[o],r):r.push(t[o]);return r},n.remove=function(t,e){var r,o=t.indexOf(e);return(r=o>=0)&&n.removeAt(t,o),r},n.removeAt=function(t,e){return 1===Array.prototype.splice.call(t,e,1).length},n.slice=function(t,n,r){for(var o=[],i=e.isDef(r)?r:t.length,s=n;i>s;s++)o.push(t[s]);return o},n}();this.metal.array=n}.call(this),function(){var t={};t.throwException=function(e){t.nextTick(function(){throw e})},t.run=function(e,n){t.run.workQueueScheduled_||(t.nextTick(t.run.processWorkQueue),t.run.workQueueScheduled_=!0),t.run.workQueue_.push(new t.run.WorkItem_(e,n))},t.run.workQueueScheduled_=!1,t.run.workQueue_=[],t.run.processWorkQueue=function(){for(;t.run.workQueue_.length;){var e=t.run.workQueue_;t.run.workQueue_=[];for(var n=0;n<e.length;n++){var r=e[n];try{r.fn.call(r.scope)}catch(o){t.throwException(o)}}}t.run.workQueueScheduled_=!1},t.run.WorkItem_=function(t,e){this.fn=t,this.scope=e},t.nextTick=function(e,n){var r=e;return n&&(r=e.bind(n)),r=t.nextTick.wrapCallback_(r),"function"==typeof setImmediate?void setImmediate(r):(t.nextTick.setImmediate_||(t.nextTick.setImmediate_=t.nextTick.getSetImmediateEmulator_()),void t.nextTick.setImmediate_(r))},t.nextTick.setImmediate_=null,t.nextTick.getSetImmediateEmulator_=function(){var t;if("function"==typeof MessageChannel&&(t=MessageChannel),"undefined"==typeof t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&(t=function(){var t=document.createElement("iframe");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow,n=e.document;n.open(),n.write(""),n.close();var r="callImmediate"+Math.random(),o=e.location.protocol+"//"+e.location.host,i=function(t){t.origin!==o&&t.data!==r||this.port1.onmessage()}.bind(this);e.addEventListener("message",i,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(r,o)}}}),"undefined"!=typeof t){var e=new t,n={},r=n;return e.port1.onmessage=function(){n=n.next;var t=n.cb;n.cb=null,t()},function(t){r.next={cb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(t){var e=document.createElement("script");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){setTimeout(t,0)}},t.nextTick.wrapCallback_=function(t){return t},this.metal.async=t}.call(this),function(){var e=function(){function e(){t.classCallCheck(this,e),this.disposed_=!1}return e.prototype.dispose=function(){this.disposed_||(this.disposeInternal(),this.disposed_=!0)},e.prototype.disposeInternal=function(){},e.prototype.isDisposed=function(){return this.disposed_},e}();this.metal.Disposable=e}.call(this),function(){var e=this.metal.core,n=function(){function n(){t.classCallCheck(this,n)}return n.mixin=function(t){for(var e,n,r=1;r<arguments.length;r++){n=arguments[r];for(e in n)t[e]=n[e]}return t},n.getObjectByName=function(t,n){for(var r,o=t.split("."),i=n||window;r=o.shift();){if(!e.isDefAndNotNull(i[r]))return null;i=i[r]}return i},n.map=function(t,e){for(var n={},r=Object.keys(t),o=0;o<r.length;o++)n[r[o]]=e(r[o],t[r[o]]);return n},n}();this.metal.object=n}.call(this),function(){var e=function(){function e(){t.classCallCheck(this,e)}return e.collapseBreakingSpaces=function(t){return t.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},e.getRandomString=function(){var t=2147483648;return Math.floor(Math.random()*t).toString(36)+Math.abs(Math.floor(Math.random()*t)^Date.now()).toString(36)},e.hashCode=function(t){for(var e=0,n=0,r=t.length;r>n;n++)e=31*e+t.charCodeAt(n),e%=4294967296;return e},e.replaceInterval=function(t,e,n,r){return t.substring(0,e)+r+t.substring(n)},e}();this.metal.string=e}.call(this),function(){var t=this.metal.core,e=this.metal.array,n=this.metal.async,r=this.metal.Disposable,o=this.metal.object,i=this.metal.string;this.metal.metal=t,this.metalNamed.metal={},this.metalNamed.metal.core=t,this.metalNamed.metal.array=e,this.metalNamed.metal.async=n,this.metalNamed.metal.Disposable=r,this.metalNamed.metal.object=o,this.metalNamed.metal.string=i}.call(this),function(){var e=this.metalNamed.metal.Disposable,n=function(e){function n(r,o,i){t.classCallCheck(this,n);var s=t.possibleConstructorReturn(this,e.call(this));return s.emitter_=r,s.event_=o,s.listener_=i,s}return t.inherits(n,e),n.prototype.disposeInternal=function(){this.removeListener(),this.emitter_=null,this.listener_=null},n.prototype.removeListener=function(){this.emitter_.isDisposed()||this.emitter_.removeListener(this.event_,this.listener_)},n}(e);n.prototype.registerMetalComponent&&n.prototype.registerMetalComponent(n,"EventHandle"),this.metal.EventHandle=n}.call(this),function(){var e=this.metalNamed.metal.core,n=this.metalNamed.metal.array,r=this.metalNamed.metal.Disposable,o=this.metal.EventHandle,i=function(r){function i(){t.classCallCheck(this,i);var e=t.possibleConstructorReturn(this,r.call(this));return e.events_=[],e.maxListeners_=10,e.shouldUseFacade_=!1,e}return t.inherits(i,r),i.prototype.addListener=function(t,e,n){this.validateListener_(e),t=this.normalizeEvents_(t);for(var r=0;r<t.length;r++)this.addSingleListener_(t[r],e,n);return new o(this,t,e)},i.prototype.addSingleListener_=function(t,e,n,r){this.emit("newListener",t,e),this.events_[t]||(this.events_[t]=[]),this.events_[t].push({"default":n,fn:e,origin:r});var o=this.events_[t];o.length>this.maxListeners_&&!o.warned&&(o.warned=!0)},i.prototype.disposeInternal=function(){this.events_=[]},i.prototype.emit=function(t){var e,r=n.slice(arguments,1),o=(this.events_[t]||[]).concat();this.getShouldUseFacade()&&(e={preventDefault:function(){e.preventedDefault=!0},target:this,type:t},r.push(e));for(var i=[],s=0;s<o.length;s++)o[s]["default"]?i.push(o[s]):o[s].fn.apply(this,r);if(!e||!e.preventedDefault)for(var a=0;a<i.length;a++)i[a].fn.apply(this,r);return"*"!==t&&this.emit.apply(this,["*",t].concat(r)),o.length>0},i.prototype.getShouldUseFacade=function(){return this.shouldUseFacade_},i.prototype.listeners=function(t){return(this.events_[t]||[]).map(function(t){return t.fn})},i.prototype.many=function(t,e,n){t=this.normalizeEvents_(t);for(var r=0;r<t.length;r++)this.many_(t[r],e,n);return new o(this,t,n)},i.prototype.many_=function(t,e,n){function r(){0===--e&&o.removeListener(t,r),n.apply(o,arguments)}var o=this;0>=e||o.addSingleListener_(t,r,!1,n)},i.prototype.matchesListener_=function(t,e){return t.fn===e||t.origin&&t.origin===e},i.prototype.normalizeEvents_=function(t){return e.isString(t)?[t]:t},i.prototype.off=function(t,e){this.validateListener_(e),t=this.normalizeEvents_(t);for(var n=0;n<t.length;n++){var r=this.events_[t[n]]||[];this.removeMatchingListenerObjs_(r,e)}return this},i.prototype.on=function(){return this.addListener.apply(this,arguments)},i.prototype.once=function(t,e){return this.many(t,1,e)},i.prototype.removeAllListeners=function(t){if(t)for(var e=this.normalizeEvents_(t),n=0;n<e.length;n++)this.events_[e[n]]=null;else this.events_={};return this},i.prototype.removeMatchingListenerObjs_=function(t,e){for(var n=t.length-1;n>=0;n--)this.matchesListener_(t[n],e)&&t.splice(n,1)},i.prototype.removeListener=function(){return this.off.apply(this,arguments)},i.prototype.setMaxListeners=function(t){return this.maxListeners_=t,this},i.prototype.setShouldUseFacade=function(t){return this.shouldUseFacade_=t,this},i.prototype.validateListener_=function(t){if(!e.isFunction(t))throw new TypeError("Listener must be a function")},i}(r);i.prototype.registerMetalComponent&&i.prototype.registerMetalComponent(i,"EventEmitter"),this.metal.EventEmitter=i}.call(this),function(){var e=this.metalNamed.metal.Disposable,n=this.metalNamed.metal.object,r=function(e){function r(n,o,i,s){t.classCallCheck(this,r);var a=t.possibleConstructorReturn(this,e.call(this));return a.blacklist_=i||{},a.originEmitter_=n,a.proxiedEvents_={},a.targetEmitter_=o,a.whitelist_=s,a.startProxy_(),a}return t.inherits(r,e),r.prototype.addListener_=function(t){this.originEmitter_.on(t,this.proxiedEvents_[t])},r.prototype.disposeInternal=function(){n.map(this.proxiedEvents_,this.removeListener_.bind(this)),this.proxiedEvents_=null,this.originEmitter_=null,this.targetEmitter_=null},r.prototype.proxyEvent_=function(t){if(this.shouldProxyEvent_(t)){var e=this;this.proxiedEvents_[t]=function(){var n=[t].concat(Array.prototype.slice.call(arguments,0));e.targetEmitter_.emit.apply(e.targetEmitter_,n)},this.addListener_(t)}},r.prototype.removeListener_=function(t){this.originEmitter_.removeListener(t,this.proxiedEvents_[t])},r.prototype.shouldProxyEvent_=function(t){return this.whitelist_&&!this.whitelist_[t]?!1:this.blacklist_[t]?!1:!this.proxiedEvents_[t]},r.prototype.startProxy_=function(){this.targetEmitter_.on("newListener",this.proxyEvent_.bind(this))},r}(e);r.prototype.registerMetalComponent&&r.prototype.registerMetalComponent(r,"EventEmitterProxy"),this.metal.EventEmitterProxy=r}.call(this),function(){var e=this.metalNamed.metal.Disposable,n=function(e){function n(){t.classCallCheck(this,n);var r=t.possibleConstructorReturn(this,e.call(this));return r.eventHandles_=[],r}return t.inherits(n,e),n.prototype.add=function(){for(var t=0;t<arguments.length;t++)this.eventHandles_.push(arguments[t])},n.prototype.disposeInternal=function(){this.eventHandles_=null},n.prototype.removeAllListeners=function(){for(var t=0;t<this.eventHandles_.length;t++)this.eventHandles_[t].removeListener();this.eventHandles_=[]},n}(e);n.prototype.registerMetalComponent&&n.prototype.registerMetalComponent(n,"EventHandler"),this.metal.EventHandler=n}.call(this),function(){var t=this.metal.EventEmitter,e=this.metal.EventEmitterProxy,n=this.metal.EventHandle,r=this.metal.EventHandler;this.metal.events=t,this.metalNamed.events={},this.metalNamed.events.EventEmitter=t,this.metalNamed.events.EventEmitterProxy=e,this.metalNamed.events.EventHandle=n,this.metalNamed.events.EventHandler=r}.call(this),function(){var e=this.metalNamed.events.EventHandle,n=function(e){function n(r,o,i,s){t.classCallCheck(this,n);var a=t.possibleConstructorReturn(this,e.call(this,r,o,i));return a.capture_=s,a}return t.inherits(n,e),n.prototype.removeListener=function(){this.emitter_.removeEventListener(this.event_,this.listener_,this.capture_)},n}(e);n.prototype.registerMetalComponent&&n.prototype.registerMetalComponent(n,"DomEventHandle"),this.metal.DomEventHandle=n}.call(this),function(){var e=this.metalNamed.metal.core,n=this.metalNamed.metal.object,r=this.metal.DomEventHandle,o=function(){function o(){t.classCallCheck(this,o)}return o.addClasses=function(t,n){e.isObject(t)&&e.isString(n)&&("classList"in t?o.addClassesWithNative_(t,n):o.addClassesWithoutNative_(t,n))},o.addClassesWithNative_=function(t,e){e.split(" ").forEach(function(e){t.classList.add(e)})},o.addClassesWithoutNative_=function(t,e){var n=" "+t.className+" ",r="";e=e.split(" ");for(var o=0;o<e.length;o++){var i=e[o];-1===n.indexOf(" "+i+" ")&&(r+=" "+i)}r&&(t.className=t.className+r)},o.append=function(t,n){if(e.isString(n)&&(n=o.buildFragment(n)),n instanceof NodeList)for(var r=Array.prototype.slice.call(n),i=0;i<r.length;i++)t.appendChild(r[i]);else t.appendChild(n);return n},o.buildFragment=function(t){var e=document.createElement("div");e.innerHTML="<br>"+t,e.removeChild(e.firstChild);for(var n=document.createDocumentFragment();e.firstChild;)n.appendChild(e.firstChild);return n},o.contains=function(t,n){return e.isDocument(t)?t.documentElement.contains(n):t.contains(n)},o.delegate=function(t,e,n,r){var i=o.customEvents[e];return i&&i.delegate&&(e=i.originalEvent,r=i.handler.bind(i,r)),o.on(t,e,o.handleDelegateEvent_.bind(null,n,r))},o.enterDocument=function(t){o.append(document.body,t)},o.exitDocument=function(t){t.parentNode&&t.parentNode.removeChild(t)},o.handleDelegateEvent_=function(t,n,r){o.normalizeDelegateEvent_(r);for(var i=r.target,s=!0;i&&!r.stopped&&(e.isString(t)&&o.match(i,t)&&(r.delegateTarget=i,s&=n(r)),i!==r.currentTarget);)i=i.parentNode;return r.delegateTarget=null,s},o.hasClass=function(t,e){return"classList"in t?o.hasClassWithNative_(t,e):o.hasClassWithoutNative_(t,e)},o.hasClassWithNative_=function(t,e){return t.classList.contains(e)},o.hasClassWithoutNative_=function(t,e){return(" "+t.className+" ").indexOf(" "+e+" ")>=0},o.isEmpty=function(t){return 0===t.childNodes.length},o.match=function(t,e){if(!t||1!==t.nodeType)return!1;var n=Element.prototype,r=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;return r?r.call(t,e):o.matchFallback_(t,e)},o.matchFallback_=function(t,e){for(var n=document.querySelectorAll(e,t.parentNode),r=0;r<n.length;++r)if(n[r]===t)return!0;return!1},o.next=function(t,e){do if(t=t.nextSibling,t&&o.match(t,e))return t;while(t);return null},o.normalizeDelegateEvent_=function(t){t.stopPropagation=o.stopPropagation_,t.stopImmediatePropagation=o.stopImmediatePropagation_},o.on=function(t,n,i,s){if(e.isString(t))return o.delegate(document,n,t,i);var a=o.customEvents[n];return a&&a.event&&(n=a.originalEvent,i=a.handler.bind(a,i)),t.addEventListener(n,i,s),new r(t,n,i,s)},o.once=function(t,e,n){var r=this.on(t,e,function(){return r.removeListener(),n.apply(this,arguments)});return r},o.registerCustomEvent=function(t,e){o.customEvents[t]=e},o.removeChildren=function(t){for(var e;e=t.firstChild;)t.removeChild(e)},o.removeClasses=function(t,n){e.isObject(t)&&e.isString(n)&&("classList"in t?o.removeClassesWithNative_(t,n):o.removeClassesWithoutNative_(t,n))},o.removeClassesWithNative_=function(t,e){e.split(" ").forEach(function(e){t.classList.remove(e)})},o.removeClassesWithoutNative_=function(t,e){var n=" "+t.className+" ";e=e.split(" ");for(var r=0;r<e.length;r++)n=n.replace(" "+e[r]+" "," ");t.className=n.trim()},o.replace=function(t,e){t&&e&&t!==e&&t.parentNode&&(t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t))},o.stopImmediatePropagation_=function(){this.stopped=!0,Event.prototype.stopImmediatePropagation.call(this)},o.stopPropagation_=function(){this.stopped=!0,Event.prototype.stopPropagation.call(this)},o.supportsEvent=function(t,n){return o.customEvents[n]?!0:(e.isString(t)&&(i[t]||(i[t]=document.createElement(t)),t=i[t]),"on"+n in t)},o.toElement=function(t){return e.isElement(t)||e.isDocument(t)?t:e.isString(t)?"#"===t[0]&&-1===t.indexOf(" ")?document.getElementById(t.substr(1)):document.querySelector(t):null},o.toggleClasses=function(t,n){e.isObject(t)&&e.isString(n)&&("classList"in t?o.toggleClassesWithNative_(t,n):o.toggleClassesWithoutNative_(t,n))},o.toggleClassesWithNative_=function(t,e){e.split(" ").forEach(function(e){t.classList.toggle(e)})},o.toggleClassesWithoutNative_=function(t,e){var n=" "+t.className+" ";e=e.split(" ");for(var r=0;r<e.length;r++){var o=" "+e[r]+" ",i=n.indexOf(o);n=-1===i?n+e[r]+" ":n.substring(0,i)+" "+n.substring(i+o.length)}t.className=n.trim()},o.triggerEvent=function(t,e,r){var o=document.createEvent("HTMLEvents");o.initEvent(e,!0,!0),n.mixin(o,r),t.dispatchEvent(o)},o}(),i={};o.customEvents={},this.metal.dom=o}.call(this),function(){var e=this.metal.dom,n=this.metalNamed.events.EventEmitterProxy,r=function(n){function r(){return t.classCallCheck(this,r),t.possibleConstructorReturn(this,n.apply(this,arguments))}return t.inherits(r,n),r.prototype.addListener_=function(t){this.originEmitter_.addEventListener?e.on(this.originEmitter_,t,this.proxiedEvents_[t]):n.prototype.addListener_.call(this,t)},r.prototype.removeListener_=function(t){this.originEmitter_.removeEventListener?this.originEmitter_.removeEventListener(t,this.proxiedEvents_[t]):n.prototype.removeListener_.call(this,t)},r.prototype.shouldProxyEvent_=function(t){return n.prototype.shouldProxyEvent_.call(this,t)&&(!this.originEmitter_.addEventListener||e.supportsEvent(this.originEmitter_,t))},r}(n);r.prototype.registerMetalComponent&&r.prototype.registerMetalComponent(r,"DomEventEmitterProxy"),this.metal.DomEventEmitterProxy=r}.call(this),function(){var e=this.metal.dom,n=this.metalNamed.metal.string,r=function(){function r(){t.classCallCheck(this,r)}return r.checkAnimationEventName=function(){return void 0===r.animationEventName_&&(r.animationEventName_={animation:r.checkAnimationEventName_("animation"),transition:r.checkAnimationEventName_("transition")}),r.animationEventName_},r.checkAnimationEventName_=function(t){for(var e=["Webkit","MS","O",""],o=n.replaceInterval(t,0,1,t.substring(0,1).toUpperCase()),i=[o+"End",o+"End",o+"End",t+"end"],s=0;s<e.length;s++)if(void 0!==r.animationElement_.style[e[s]+o])return e[s].toLowerCase()+i[s];return t+"end"},r.checkAttrOrderChange=function(){if(void 0===r.attrOrderChange_){var t='<div data-component="" data-ref=""></div>',n=document.createElement("div");e.append(n,t),r.attrOrderChange_=t!==n.innerHTML}return r.attrOrderChange_},r}();r.animationElement_=document.createElement("div"),r.animationEventName_=void 0,r.attrOrderChange_=void 0,this.metal.features=r}.call(this),function(){var e=this.metalNamed.metal.async,n=this.metal.dom,r=function(){function r(){t.classCallCheck(this,r)}return r.run=function(t,e){var r=document.createElement("script");return r.text=t,e?e(r):document.head.appendChild(r),n.exitDocument(r),r},r.runFile=function(t,e,r){var o=document.createElement("script");o.src=t;var i=function(){n.exitDocument(o),e&&e()};return n.on(o,"load",i),n.on(o,"error",i),r?r(o):document.head.appendChild(o),o},r.runScript=function(t,o,i){var s=function(){o&&o()};return t.type&&"text/javascript"!==t.type?void e.nextTick(s):(n.exitDocument(t),t.src?r.runFile(t.src,o,i):(e.nextTick(s),r.run(t.text,i)))},r.runScriptsInElement=function(t,n,o){var i=t.querySelectorAll("script");i.length?r.runScriptsInOrder(i,0,n,o):n&&e.nextTick(n)},r.runScriptsInOrder=function(t,n,o,i){r.runScript(t.item(n),function(){n<t.length-1?r.runScriptsInOrder(t,n+1,o,i):o&&e.nextTick(o)},i)},r}();this.metal.globalEval=r}.call(this),function(){var e=this.metalNamed.metal.async,n=this.metal.dom,r=function(){function r(){t.classCallCheck(this,r)}return r.run=function(t,e){var n=document.createElement("style");return n.innerHTML=t,e?e(n):document.head.appendChild(n),n},r.runFile=function(t,e,n){var o=document.createElement("link");return o.rel="stylesheet",o.href=t,r.runStyle(o,e,n),o},r.runStyle=function(t,r,o){var i=function(){r&&r()};return t.rel&&"stylesheet"!==t.rel?void e.nextTick(i):("STYLE"===t.tagName?e.nextTick(i):(n.on(t,"load",i),n.on(t,"error",i)),o?o(t):document.head.appendChild(t),t)},r.runStylesInElement=function(t,n,o){var i=t.querySelectorAll("style,link");if(0===i.length&&n)return void e.nextTick(n);for(var s=0,a=function(){n&&++s===i.length&&e.nextTick(n)},l=0;l<i.length;l++)r.runStyle(i[l],a,o)},r}();this.metal.globalEvalStyles=r}.call(this),function(){var t=this.metal.dom,e=this.metal.features,n={mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"};Object.keys(n).forEach(function(e){t.registerCustomEvent(e,{delegate:!0,handler:function(t,n){var r=n.relatedTarget,o=n.delegateTarget;return!r||r!==o&&!o.contains(r)?(n.customType=e,t(n)):void 0},originalEvent:n[e]})});var r={animation:"animationend",transition:"transitionend"};Object.keys(r).forEach(function(n){var o=r[n];t.registerCustomEvent(o,{event:!0,delegate:!0,handler:function(t,e){return e.customType=o,t(e)},originalEvent:e.checkAnimationEventName()[n]})})}.call(this),function(){var t=this.metal.dom,e=this.metal.DomEventEmitterProxy,n=this.metal.DomEventHandle,r=this.metal.features,o=this.metal.globalEval,i=this.metal.globalEvalStyles;this.metal.dom=t,this.metalNamed.dom={},this.metalNamed.dom.dom=t,this.metalNamed.dom.DomEventEmitterProxy=e,this.metalNamed.dom.DomEventHandle=n,this.metalNamed.dom.features=r,this.metalNamed.dom.globalEval=o,this.metalNamed.dom.globalEvalStyles=i}.call(this),function(){var e=this.metalNamed.metal.array,n=this.metalNamed.metal.async,r=this.metalNamed.metal.core,o=this.metalNamed.metal.object,i=this.metalNamed.events.EventEmitter,s=function(i){function s(e){t.classCallCheck(this,s);var n=t.possibleConstructorReturn(this,i.call(this));return n.scheduledBatchData_=null,n.attrsInfo_={},n.setShouldUseFacade(!0),n.mergeInvalidAttrs_(),n.addAttrsFromStaticHint_(e),n}return t.inherits(s,i),s.prototype.addAttr=function(t,e,n){this.buildAttrInfo_(t,e,n),Object.defineProperty(this,t,this.buildAttrPropertyDef_(t))},s.prototype.addAttrs=function(t,e,n){e=e||{};for(var r=Object.keys(t),o={},i=0;i<r.length;i++){var s=r[i];this.buildAttrInfo_(s,t[s],e[s]),o[s]=this.buildAttrPropertyDef_(s)}n!==!1&&Object.defineProperties(n||this,o)},s.prototype.addAttrsFromStaticHint_=function(t){var e=this.constructor,n=!1;s.mergeAttrsStatic(e)&&(n=e.prototype),this.addAttrs(e.ATTRS_MERGED,t,n)},s.prototype.assertValidAttrName_=function(t){if(this.constructor.INVALID_ATTRS_MERGED[t])throw new Error("It's not allowed to create an attribute with the name \""+t+'".')},s.prototype.buildAttrInfo_=function(t,e,n){this.assertValidAttrName_(t),this.attrsInfo_[t]={config:e||{},initialValue:n,state:s.States.UNINITIALIZED}},s.prototype.buildAttrPropertyDef_=function(t){return{configurable:!0,enumerable:!0,get:function(){return this.getAttrValue_(t)},set:function(e){this.setAttrValue_(t,e)}}},s.prototype.callFunction_=function(t,e){return r.isString(t)?this[t].apply(this,e):r.isFunction(t)?t.apply(this,e):void 0},s.prototype.callSetter_=function(t,e){var n=this.attrsInfo_[t],r=n.config;return r.setter&&(e=this.callFunction_(r.setter,[e])),e},s.prototype.callValidator_=function(t,e){var n=this.attrsInfo_[t],r=n.config;return r.validator?this.callFunction_(r.validator,[e]):!0},s.prototype.canSetAttribute=function(t){var e=this.attrsInfo_[t];return!e.config.writeOnce||!e.written},s.prototype.disposeInternal=function(){i.prototype.disposeInternal.call(this),this.attrsInfo_=null,this.scheduledBatchData_=null},s.prototype.emitBatchEvent_=function(){if(!this.isDisposed()){var t=this.scheduledBatchData_;this.scheduledBatchData_=null,this.emit("attrsChanged",t)}},s.prototype.get=function(t){return this[t]},s.prototype.getAttrConfig=function(t){return(this.attrsInfo_[t]||{}).config},s.prototype.getAttrs=function(t){for(var e={},n=t||this.getAttrNames(),r=0;r<n.length;r++)e[n[r]]=this[n[r]];return e},s.prototype.getAttrNames=function(){return Object.keys(this.attrsInfo_)},s.prototype.getAttrValue_=function(t){return this.initAttr_(t),this.attrsInfo_[t].value},s.prototype.hasBeenSet=function(t){var e=this.attrsInfo_[t];return e.state===s.States.INITIALIZED||e.initialValue},s.prototype.informChange_=function(t,e){if(this.shouldInformChange_(t,e)){var n={attrName:t,newVal:this[t],prevVal:e};this.emit(t+"Changed",n),this.scheduleBatchEvent_(n)}},s.prototype.initAttr_=function(t){var e=this.attrsInfo_[t];e.state===s.States.UNINITIALIZED&&(e.state=s.States.INITIALIZING,this.setInitialValue_(t),e.written||(e.state=s.States.INITIALIZING_DEFAULT,this.setDefaultValue_(t)),e.state=s.States.INITIALIZED)},s.mergeAttrs_=function(t){return o.mixin.apply(null,[{}].concat(t.reverse()))},s.mergeAttrsStatic=function(t){return r.mergeSuperClassesProperty(t,"ATTRS",s.mergeAttrs_)},s.prototype.mergeInvalidAttrs_=function(){r.mergeSuperClassesProperty(this.constructor,"INVALID_ATTRS",function(t){return e.flatten(t).reduce(function(t,e){return e&&(t[e]=!0),t},{})})},s.prototype.removeAttr=function(t){this.attrsInfo_[t]=null,delete this[t]},s.prototype.scheduleBatchEvent_=function(t){this.scheduledBatchData_||(n.nextTick(this.emitBatchEvent_,this),this.scheduledBatchData_={changes:{}});var e=t.attrName,r=this.scheduledBatchData_.changes;r[e]?r[e].newVal=t.newVal:r[e]=t},s.prototype.set=function(t,e){this[t]=e},s.prototype.setAttrs=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)this[e[n]]=t[e[n]]},s.prototype.setAttrValue_=function(t,e){if(this.canSetAttribute(t)&&this.validateAttrValue_(t,e)){var n=this.attrsInfo_[t];void 0===n.initialValue&&n.state===s.States.UNINITIALIZED&&(n.state=s.States.INITIALIZED);var r=this[t];n.value=this.callSetter_(t,e),n.written=!0,this.informChange_(t,r)}},s.prototype.setDefaultValue_=function(t){var e=this.attrsInfo_[t].config;void 0!==e.value?this[t]=e.value:this[t]=this.callFunction_(e.valueFn)},s.prototype.setInitialValue_=function(t){var e=this.attrsInfo_[t];void 0!==e.initialValue&&(this[t]=e.initialValue,e.initialValue=void 0)},s.prototype.shouldInformChange_=function(t,e){var n=this.attrsInfo_[t];return n.state===s.States.INITIALIZED&&(r.isObject(e)||e!==this[t])},s.prototype.validateAttrValue_=function(t,e){var n=this.attrsInfo_[t];return n.state===s.States.INITIALIZING_DEFAULT||this.callValidator_(t,e)},s}(i);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"Attribute"),s.INVALID_ATTRS=["attrs"],s.States={UNINITIALIZED:0,INITIALIZING:1,INITIALIZING_DEFAULT:2,INITIALIZED:3},this.metal.Attribute=s}.call(this),function(){var e=this.metalNamed.metal.core,n=function(){function n(){t.classCallCheck(this,n)}return n.getConstructor=function(t){var e=n.components_[t];return e},n.register=function(t,r){var o=r;o||(o=t.hasOwnProperty("NAME")?t.NAME:e.getFunctionName(t)),t.NAME=o,n.components_[o]=t},n}();n.components_={},this.metal.ComponentRegistry=n}.call(this),function(){var e=this.metal.ComponentRegistry,n=this.metalNamed.metal.Disposable,r=function(n){function r(){return t.classCallCheck(this,r),t.possibleConstructorReturn(this,n.apply(this,arguments))}return t.inherits(r,n),r.prototype.addComponent=function(t){r.components[t.id]=t},r.prototype.createComponent=function(t,n,o){var i=r.components[n];if(!i){var s=e.getConstructor(t),a=o||{};a.id=n,a.element="#"+n,i=new s(a)}return i},r.prototype.removeComponent=function(t){delete r.components[t.id]},r.prototype.updateComponent=function(t,e){var n=r.components[t];return n&&e&&n.setAttrs(e),n},r}(n);r.prototype.registerMetalComponent&&r.prototype.registerMetalComponent(r,"ComponentCollector"),r.components={},this.metal.ComponentCollector=r}.call(this),function(){var e=this.metalNamed.events.EventEmitter,n=this.metalNamed.events.EventHandler,r=function(e){function r(o){t.classCallCheck(this,r);var i=t.possibleConstructorReturn(this,e.call(this));return i.component_=o,i.componentRendererEvents_=new n,i.componentRendererEvents_.add(i.component_.on("attrsChanged",i.handleComponentRendererAttrsChanged_.bind(i)),i.component_.once("render",i.render.bind(i))),i}return t.inherits(r,e),r.prototype.buildElement=function(){return document.createElement("div")},r.prototype.disposeInternal=function(){this.componentRendererEvents_.removeAllListeners(),this.componentRendererEvents_=null},r.prototype.handleComponentRendererAttrsChanged_=function(t){this.component_.wasRendered&&this.update(t)},r.prototype.render=function(){},r.prototype.update=function(){},r}(e);r.prototype.registerMetalComponent&&r.prototype.registerMetalComponent(r,"ComponentRenderer"),this.metal.ComponentRenderer=r}.call(this),function(){var e=this.metalNamed.metal.array,n=this.metalNamed.metal.core,r=this.metalNamed.dom.dom,o=this.metalNamed.dom.DomEventEmitterProxy,i=this.metal.Attribute,s=this.metal.ComponentCollector,a=this.metal.ComponentRegistry,l=this.metal.ComponentRenderer,c=this.metalNamed.events.EventHandler,u=function(i){function l(r){t.classCallCheck(this,l);var o=t.possibleConstructorReturn(this,i.call(this,r));return o.components={},o.decorating_=!1,o.delegateEventHandler_=null,o.elementEventProxy_=null,o.eventsAttrHandler_=new c,o.inDocument=!1,o.initialConfig_=r||{},o.wasRendered=!1,o.DEFAULT_ELEMENT_PARENT=document.body,n.mergeSuperClassesProperty(o.constructor,"ELEMENT_CLASSES",o.mergeElementClasses_),n.mergeSuperClassesProperty(o.constructor,"ELEMENT_TAG_NAME",e.firstDefinedValue),n.mergeSuperClassesProperty(o.constructor,"RENDERER",e.firstDefinedValue),o.renderer_=new o.constructor.RENDERER_MERGED(o),o.delegateEventHandler_=new c,o.created_(),o}return t.inherits(l,i),l.prototype.addListenersFromObj_=function(t){for(var e=Object.keys(t||{}),n=0;n<e.length;n++){var r=this.extractListenerInfo_(t[e[n]]);if(r.fn){var o;o=r.selector?this.delegate(e[n],r.selector,r.fn):this.on(e[n],r.fn),this.eventsAttrHandler_.add(o)}}},l.prototype.addSingleListener_=function(t,e,n,s){!this.elementEventProxy_&&r.supportsEvent(this.constructor.ELEMENT_TAG_NAME_MERGED,t)&&(this.elementEventProxy_=new o(this.element,this)),i.prototype.addSingleListener_.call(this,t,e,n,s)},l.prototype.attach=function(t,e){return this.inDocument||(this.renderElement_(t,e),this.inDocument=!0,this.emit("attached"),this.attached()),this},l.prototype.attached=function(){},l.prototype.created_=function(){this.on("eventsChanged",this.onEventsChanged_),this.addListenersFromObj_(this.events),this.on("attrsChanged",this.handleAttributesChanges_),l.componentsCollector.addComponent(this)},l.prototype.addSubComponent=function(t,e,n){return this.components[e]=l.componentsCollector.createComponent(t,e,n),this.components[e]},l.prototype.decorate=function(){return this.decorating_=!0,this.render(),this.decorating_=!1,
this},l.prototype.delegate=function(t,e,n){var o=r.delegate(this.element,t,e,n);return this.delegateEventHandler_.add(o),o},l.prototype.detach=function(){return this.inDocument&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.inDocument=!1,this.detached()),this.emit("detached"),this},l.prototype.detached=function(){},l.prototype.disposeInternal=function(){this.detach(),this.elementEventProxy_&&(this.elementEventProxy_.dispose(),this.elementEventProxy_=null),this.delegateEventHandler_.removeAllListeners(),this.delegateEventHandler_=null,this.disposeSubComponents(Object.keys(this.components)),this.components=null,this.renderer_.dispose(),this.renderer_=null,i.prototype.disposeInternal.call(this)},l.prototype.disposeSubComponents=function(t){for(var e=0;e<t.length;e++){var n=this.components[t[e]];n.isDisposed()||(l.componentsCollector.removeComponent(n),n.dispose(),delete this.components[t[e]])}},l.prototype.extractListenerInfo_=function(t){var e={fn:t};return n.isObject(t)&&!n.isFunction(t)&&(e.selector=t.selector,e.fn=t.fn),n.isString(e.fn)&&(e.fn=this.getListenerFn(e.fn)),e},l.prototype.getInitialConfig=function(){return this.initialConfig_},l.prototype.getListenerFn=function(t){var e,r=t.split(":");return 2===r.length&&(t=r[1],e=s.components[r[0]]),e=e||this,n.isFunction(e[t])?e[t].bind(e):void 0},l.prototype.findElementById=function(t){return document.getElementById(t)||this.element&&this.element.querySelector("#"+t)},l.prototype.fireAttrChange_=function(t,e){var r=this["sync"+t.charAt(0).toUpperCase()+t.slice(1)];n.isFunction(r)&&(e||(e={newVal:this[t],prevVal:void 0}),r.call(this,e.newVal,e.prevVal))},l.prototype.getComponentsWithPrefix=function(t){var e=this,n=Object.keys(this.components).filter(function(e){return 0===e.indexOf(t)}),r={};return n.forEach(function(t){return r[t]=e.components[t]}),r},l.prototype.getName=function(){return this.constructor.NAME||n.getFunctionName(this.constructor)},l.prototype.getRenderer=function(){return this.renderer_},l.prototype.handleAttributesChanges_=function(t){this.syncAttrsFromChanges_(t.changes),this.emit("attrsSynced",t)},l.prototype.makeId_=function(){return"metal_c_"+n.getUid(this)},l.prototype.mergeElementClasses_=function(t){var e={};return t.filter(function(t){return!t||e[t]?!1:(e[t]=!0,!0)}).join(" ")},l.prototype.onEventsChanged_=function(t){this.eventsAttrHandler_.removeAllListeners(),this.addListenersFromObj_(t.newVal)},l.prototype.registerMetalComponent=function(t,e){a.register(t,e)},l.prototype.render=function(t,e){if(this.wasRendered)throw new Error(l.Error.ALREADY_RENDERED);return this.emit("render",{decorating:this.decorating_}),this.syncAttrs_(),this.attach(t,e),this.wasRendered=!0,this},l.prototype.renderAsSubComponent=function(){this.syncAttrs_(),this.attach(),this.wasRendered=!0},l.prototype.renderElement_=function(t,e){var n=this.element;if(n.id=this.id,e||!n.parentNode){var o=r.toElement(t)||this.DEFAULT_ELEMENT_PARENT;o.insertBefore(n,r.toElement(e))}},l.prototype.setterElementFn_=function(t){var e=r.toElement(t);return e||(e=this.valueElementFn_()),e},l.prototype.syncAttrs_=function(){for(var t=this.getAttrNames(),e=0;e<t.length;e++)this.fireAttrChange_(t[e])},l.prototype.syncAttrsFromChanges_=function(t){for(var e in t)this.fireAttrChange_(e,t[e])},l.prototype.syncElementClasses=function(t,e){var n=this.constructor.ELEMENT_CLASSES_MERGED;t&&(n=n+" "+t),e&&r.removeClasses(this.element,e),r.addClasses(this.element,n)},l.prototype.syncVisible=function(t){this.element.style.display=t?"":"none"},l.prototype.validatorElementClassesFn_=function(t){return n.isString(t)},l.prototype.validatorElementFn_=function(t){return n.isElement(t)||n.isString(t)},l.prototype.validatorEventsFn_=function(t){return!n.isDefAndNotNull(t)||n.isObject(t)},l.prototype.validatorIdFn_=function(t){return n.isString(t)},l.prototype.valueElementFn_=function(){return this.id||(this.id=this.makeId_()),this.renderer_.buildElement()},l.prototype.valueIdFn_=function(){return this.hasBeenSet("element")?this.element.id:this.makeId_()},l}(i);u.prototype.registerMetalComponent&&u.prototype.registerMetalComponent(u,"Component"),u.componentsCollector=new s,u.ATTRS={element:{setter:"setterElementFn_",validator:"validatorElementFn_",valueFn:"valueElementFn_",writeOnce:!0},elementClasses:{validator:"validatorElementClassesFn_"},events:{validator:"validatorEventsFn_",value:null},id:{validator:"validatorIdFn_",valueFn:"valueIdFn_",writeOnce:!0},visible:{validator:n.isBoolean,value:!0}},u.ELEMENT_CLASSES="component",u.ELEMENT_TAG_NAME="div",u.RENDERER=l,u.Error={ALREADY_RENDERED:"Component already rendered"},u.INVALID_ATTRS=["components"],this.metal.Component=u}.call(this),function(){var e=this.metalNamed.metal.Disposable,n=this.metalNamed.events.EventHandler,r=function(e){function r(n){t.classCallCheck(this,r);var o=t.possibleConstructorReturn(this,e.call(this));if(!n)throw new Error("The component instance is mandatory");return o.component_=n,o.eventHandles_={},o.groupHasListener_={},o}return t.inherits(r,e),r.prototype.attachListener=function(t,e){var r=arguments.length<=2||void 0===arguments[2]?"element":arguments[2],o="[data-on"+t+'="'+e+'"]';if(this.groupHasListener_[r][o]=!0,!this.eventHandles_[o]){this.eventHandles_[o]=new n;for(var i=e.split(","),s=0;s<i.length;s++){var a=this.component_.getListenerFn(i[s]);a&&this.eventHandles_[o].add(this.component_.delegate(t,o,this.onEvent_.bind(this,a)))}}},r.prototype.attachListenersFromHtml=function(t){var e=arguments.length<=1||void 0===arguments[1]?"element":arguments[1];if(this.startCollecting(e),-1!==t.indexOf("data-on"))for(var n=/data-on([a-z]+)=['"]([^'"]+)['"]/g,r=n.exec(t);r;)this.attachListener(r[1],r[2],e),r=n.exec(t)},r.prototype.detachAllListeners=function(){for(var t in this.eventHandles_)this.eventHandles_[t]&&this.eventHandles_[t].removeAllListeners();this.eventHandles_={},this.listenerCounts_={}},r.prototype.detachUnusedListeners=function(){for(var t in this.eventHandles_)if(this.eventHandles_[t]){var e=!0;for(var n in this.groupHasListener_)if(this.groupHasListener_[n][t]){e=!1;break}e&&(this.eventHandles_[t].removeAllListeners(),this.eventHandles_[t]=null)}},r.prototype.disposeInternal=function(){this.detachAllListeners(),this.component_=null},r.prototype.hasAttachedForGroup=function(t){return!!this.groupHasListener_.hasOwnProperty(t)},r.prototype.onEvent_=function(t,e){var n=e.handledByComponent;return!n||n===this.component_||e.delegateTarget.contains(n.element)?(e.handledByComponent=this.component_,t(e)):void 0},r.prototype.startCollecting=function(){var t=arguments.length<=0||void 0===arguments[0]?"element":arguments[0];this.groupHasListener_[t]={}},r}(e);r.prototype.registerMetalComponent&&r.prototype.registerMetalComponent(r,"EventsCollector"),this.metal.EventsCollector=r}.call(this),function(){var e=this.metalNamed.metal.object,n=this.metalNamed.metal.Disposable,r=function(n){function r(){t.classCallCheck(this,r);var e=t.possibleConstructorReturn(this,n.call(this));return e.surfaces_={},e}return t.inherits(r,n),r.prototype.addSurface=function(t,e){this.surfaces_[t]?this.updateSurface(t,e):(this.surfaces_[t]=e||{},this.surfaces_[t].surfaceElementId=t)},r.prototype.disposeInternal=function(){this.surfaces_=null},r.prototype.getSurface=function(t){return this.surfaces_[t]?this.surfaces_[t]:null},r.prototype.removeAllSurfaces=function(){this.surfaces_=[]},r.prototype.removeSurface=function(t){this.surfaces_[t]=null},r.prototype.updateSurface=function(t,n){e.mixin(this.surfaces_[t],n)},r}(n);r.prototype.registerMetalComponent&&r.prototype.registerMetalComponent(r,"SurfaceCollector"),this.metal.SurfaceCollector=r}.call(this),function(){var e=this.metalNamed.metal.core,n=this.metalNamed.metal.string,r=function(){function r(){t.classCallCheck(this,r)}return r.compress=function(t){var e={};return t=r.preserveBlocks_(t,e),t=r.simplifyDoctype_(t),t=r.removeComments_(t),t=r.removeIntertagSpaces_(t),t=r.collapseBreakingSpaces_(t),t=r.removeSpacesInsideTags_(t),t=r.removeSurroundingSpaces_(t),t=r.returnBlocks_(t,e),t.trim()},r.collapseBreakingSpaces_=function(t){return n.collapseBreakingSpaces(t)},r.lookupPossibleTagBoundary_=function(t,e){var n=t.indexOf(e);return n>-1&&(n+=t.substring(n).indexOf(">")+1),n},r.preserveBlocks_=function(t,e){return t=r.preserveOuterHtml_(t,"<!--[if","<![endif]-->",e),t=r.preserveInnerHtml_(t,"<code","</code",e),t=r.preserveInnerHtml_(t,"<pre","</pre",e),t=r.preserveInnerHtml_(t,"<script","</script",e),t=r.preserveInnerHtml_(t,"<style","</style",e),t=r.preserveInnerHtml_(t,"<textarea","</textarea",e)},r.preserveInnerHtml_=function(t,e,n,o){for(var i=r.lookupPossibleTagBoundary_(t,e);i>-1;){var s=t.indexOf(n);t=r.preserveInterval_(t,i,s,o),t=t.replace(e,"%%%~1~%%%"),t=t.replace(n,"%%%~2~%%%"),i=r.lookupPossibleTagBoundary_(t,e)}return t=t.replace(/%%%~1~%%%/g,e),t=t.replace(/%%%~2~%%%/g,n)},r.preserveInterval_=function(t,r,o,i){var s="%%%~BLOCK~"+e.getUid()+"~%%%";return i[s]=t.substring(r,o),n.replaceInterval(t,r,o,s)},r.preserveOuterHtml_=function(t,e,n,o){for(var i=t.indexOf(e);i>-1;){var s=t.indexOf(n)+n.length;t=r.preserveInterval_(t,i,s,o),i=t.indexOf(e)}return t},r.removeComments_=function(t){var e={};return t=r.preserveOuterHtml_(t,"<![CDATA[","]]>",e),t=r.preserveOuterHtml_(t,"<!--","-->",e),t=r.replacePreservedBlocks_(t,e,"")},r.removeIntertagSpaces_=function(t){return t=t.replace(r.Patterns.INTERTAG_CUSTOM_CUSTOM,"~%%%%%%~"),t=t.replace(r.Patterns.INTERTAG_CUSTOM_TAG,"~%%%<"),t=t.replace(r.Patterns.INTERTAG_TAG,"><"),t=t.replace(r.Patterns.INTERTAG_TAG_CUSTOM,">%%%~")},r.removeSpacesInsideTags_=function(t){return t=t.replace(r.Patterns.TAG_END_SPACES,"$1$2"),t=t.replace(r.Patterns.TAG_QUOTE_SPACES,"=$1$2$3")},r.removeSurroundingSpaces_=function(t){return t.replace(r.Patterns.SURROUNDING_SPACES,"$1")},r.replacePreservedBlocks_=function(t,e,n){for(var r in e)t=t.replace(r,n);return t},r.simplifyDoctype_=function(t){var e={};return t=r.preserveOuterHtml_(t,"<!DOCTYPE",">",e),t=r.replacePreservedBlocks_(t,e,"<!DOCTYPE html>")},r.returnBlocks_=function(t,e){for(var n in e)t=t.replace(n,e[n]);return t},r}();r.Patterns={INTERTAG_CUSTOM_CUSTOM:/~%%%\s+%%%~/g,INTERTAG_TAG_CUSTOM:/>\s+%%%~/g,INTERTAG_CUSTOM_TAG:/~%%%\s+</g,INTERTAG_TAG:/>\s+</g,SURROUNDING_SPACES:/\s*(<[^>]+>)\s*/g,TAG_END_SPACES:/(<(?:[^>]+?))(?:\s+?)(\/?>)/g,TAG_QUOTE_SPACES:/\s*=\s*(["']?)\s*(.*?)\s*(\1)/g},this.metal.html=r}.call(this),function(){var e=this.metalNamed.metal.array,n=this.metalNamed.metal.core,r=this.metalNamed.metal.object,o=this.metalNamed.metal.string,i=this.metalNamed.dom.dom,s=this.metalNamed.dom.features,a=this.metalNamed.dom.globalEval,l=this.metal.html,c=this.metal.Component,u=this.metal.ComponentCollector,m=this.metal.ComponentRenderer,h=this.metal.EventsCollector,p=this.metal.SurfaceCollector,d=function(m){function p(r){t.classCallCheck(this,p);var o=t.possibleConstructorReturn(this,m.call(this,r));return o.collectedSurfaces_=[],o.generatedIdCount_={},o.removedSurfaces_=[],o.surfaceIds_={},o.eventsCollector_=new h(o.component_),n.mergeSuperClassesProperty(o.component_.constructor,"SURFACE_TAG_NAME",e.firstDefinedValue),o.component_.constructor.SURFACE_TAG_NAME_MERGED=o.component_.constructor.SURFACE_TAG_NAME_MERGED||"div",o.setShouldUseFacade(!0),o.addSurfacesFromStaticHint_(),o.addSurface(o.component_.id,{componentName:o.component_.getName()}),o.component_.once("attached",o.handleComponentAttachedOnce_.bind(o)),o.component_.on("detached",o.handleComponentDetached_.bind(o)),o.on("renderSurface",o.defaultRenderSurfaceFn_,!0),o}return t.inherits(p,m),p.prototype.addMissingAttr_=function(t,e){this.component_.getAttrConfig(t)||this.component_.addAttr(t,{},e)},p.prototype.addSurface=function(t,e){var n=e||{},r=this.getSurfaceElementId(t,n);return this.surfaceIds_[r]?p.surfacesCollector.updateSurface(r,n):(this.surfaceIds_[r]=!0,n.cacheState=n.cacheState||p.Cache.NOT_INITIALIZED,p.surfacesCollector.addSurface(r,n),n.componentName&&t!==this.component_.id&&this.addSubComponent(n.componentName,r)),this.cacheSurfaceRenderAttrs_(r,n.renderAttrs),this},p.prototype.addSurfaces=function(t){for(var e in t)this.addSurface(e,t[e]);return this},p.prototype.addSurfacesFromStaticHint_=function(){n.mergeSuperClassesProperty(this.component_.constructor,"SURFACES",this.mergeObjects_),this.surfacesRenderAttrs_={};var t=this.component_.constructor.SURFACES_MERGED;for(var e in t)this.addSurface(e,r.mixin({},t[e]))},p.prototype.addToRemovedSurfaces_=function(t){for(var e=0;e<t.length;e++){var n=this.getSurface(t[e]);this.removedSurfaces_.push(n),n.parent=null}},p.prototype.buildElement=function(){var t=this.component_.id,e=this.findElementInContent_(t,this.getElementContent_(!0)||"");return e||(e=this.findElementInContent_(t,this.getComponentHtml(""))),i.removeChildren(e),i.exitDocument(e),e},p.prototype.buildFragment_=function(t){var e=i.buildFragment(t);return-1!==t.indexOf("<script")&&a.runScriptsInElement(e),e},p.prototype.buildPlaceholder=function(t,e){return t&&e&&(e.surfaceElementId=t,this.addSurface(t,e)),"%%%%~s"+(t?"-"+t:"")+"~%%%%"},p.prototype.cacheSurfaceContent=function(t,e){var n=this.computeSurfaceCacheState_(e),r=this.getSurfaceFromElementId(t);r.cacheState=n},p.prototype.cacheSurfaceRenderAttrs_=function(t,e){for(var n=e||[],r=0;r<n.length;r++)this.surfacesRenderAttrs_[n[r]]||(this.surfacesRenderAttrs_[n[r]]={},this.addMissingAttr_(n[r],this.component_.getInitialConfig()[n[r]])),this.surfacesRenderAttrs_[n[r]][t]=!0},p.prototype.checkHasElementTag_=function(t,e){return-1!==t.indexOf(' id="'+e+'"')},p.prototype.clearSurfaceCache=function(t){this.getSurface(t).cacheState=p.Cache.NOT_INITIALIZED},p.prototype.compareCacheStates_=function(t,e){return t!==p.Cache.NOT_INITIALIZED&&t===e},p.prototype.computeSurfaceCacheState_=function(t){return t=t||"",s.checkAttrOrderChange()&&(t=this.convertHtmlToBrowserFormat_(t)),o.hashCode(t)},p.prototype.convertHtmlToBrowserFormat_=function(t){var e=document.createElement("div");return i.append(e,t),e.innerHTML},p.prototype.createPlaceholderSurface_=function(t,e){var r=e;n.isDefAndNotNull(r)||(r=this.generateSurfaceElementId(t));var o=this.getSurfaceFromElementId(r);return o||(o={surfaceElementId:r},this.addSurface(r,o)),o},p.prototype.addSubComponent=function(t,e){return this.component_.addSubComponent(t,e,this.getSurfaceFromElementId(e).componentData)},p.prototype.createSurfaceElement_=function(t){var e=document.createElement(this.component_.constructor.SURFACE_TAG_NAME_MERGED);return e.id=t,e},p.prototype.defaultRenderSurfaceFn_=function(t){var e=t.surfaceElementId,n=this.getSurfaceFromElementId(e);if(n.componentName&&e!==this.component_.id)return void this.renderComponentSurface_(e,t.content);var r=t.content||this.getSurfaceContent_(e),o=t.cacheContent||r,i=n["static"];if(!n["static"]){var s=n.cacheState;this.cacheSurfaceContent(e,o),i=this.compareCacheStates_(n.cacheState,s)}i?this.renderPlaceholderSurfaceContents_(o,e):(this.eventsCollector_.attachListenersFromHtml(o,e),this.replaceSurfaceContent_(e,n,r))},p.prototype.disposeInternal=function(){var t=this;m.prototype.disposeInternal.call(this),this.eventsCollector_.dispose(),this.eventsCollector_=null,this.surfacesRenderAttrs_=null,Object.keys(this.surfaceIds_).forEach(function(e){return t.removeSurface(e,!0)}),this.surfaceIds_=null},p.prototype.emitRenderSurfaceEvent_=function(t,e,n,r){this.emit("renderSurface",{cacheContent:n,content:e,renderAttrs:r||[],surfaceElementId:t,surfaceId:this.getSurfaceId(this.getSurfaceFromElementId(t))})},p.prototype.findElementInContent_=function(t,e){e=n.isString(e)?i.buildFragment(e):e;var r=e.childNodes[0];return r&&r.id===t?r:void 0},p.prototype.generateSurfaceElementId=function(t){return this.generatedIdCount_[t]=(this.generatedIdCount_[t]||0)+1,t+"-s"+this.generatedIdCount_[t]},p.prototype.getComponentHtml=function(t){return this.wrapContentIfNecessary(t,this.component_.id,this.component_.constructor.ELEMENT_TAG_NAME_MERGED)},p.prototype.getElementContent_=function(t){return this.getSurfaceContent(this.getSurface(this.component_.id),t)},p.prototype.getElementExtendedContent=function(){var t=this.getElementContent_()||"";return this.eventsCollector_.attachListenersFromHtml(t,this.component_.id),this.cacheSurfaceContent(this.component_.id,t),this.replaceSurfacePlaceholders_(t,this.component_.id,this.getSurface(this.component_.id))},p.prototype.getModifiedSurfacesFromChanges_=function(t){var e={};for(var n in t)for(var r=Object.keys(this.surfacesRenderAttrs_[n]||{}),o=0;o<r.length;o++)e[r[o]]||(e[r[o]]=[]),e[r[o]].push(n);return e},p.prototype.getNonComponentSurfaceHtml=function(t,e){return this.wrapContentIfNecessary(e,t,this.component_.constructor.SURFACE_TAG_NAME_MERGED)},p.prototype.getSurface=function(t){var e=this.getSurfaceFromElementId(this.getSurfaceElementId(t));return e?e:this.getSurfaceFromElementId(t)},p.prototype.getSurfaceContent=function(){n.abstractMethod()},p.prototype.getSurfaceContent_=function(t){var e=this.getSurfaceFromElementId(t);if(e.componentName&&t!==this.component_.id){var n=u.components[t];return n.wasRendered?"":n.getRenderer().getElementExtendedContent()}return this.getSurfaceContent(e)||""},p.prototype.getSurfaceElement=function(t,e){var n=e||this.getSurface(t);if(!n)return null;if(!n.element)if(n.componentName){var r=u.components[t];r&&(n.element=r.element)}else{var o=this.getSurfaceElementId(t,n);n.element=this.component_.findElementById(o)||this.createSurfaceElement_(o)}return n.element},p.prototype.getSurfaceElementId=function(t,e){var n=e||{};return n.surfaceElementId?n.surfaceElementId:n.componentName||this.hasComponentPrefix_(t)?t:this.prefixSurfaceId(t)},p.prototype.getSurfaceFromElementId=function(t){return p.surfacesCollector.getSurface(t)},p.prototype.getSurfaceHtml_=function(t,e){var n=t.surfaceElementId;if(t.componentName){var r=u.components[n];return r.getRenderer().getComponentHtml(e)}return this.getNonComponentSurfaceHtml(n,e)},p.prototype.getSurfaceId=function(t){return t.componentName||!this.hasComponentPrefix_(t.surfaceElementId)?t.surfaceElementId:t.surfaceElementId.substr(this.component_.id.length+1)},p.prototype.getSurfaces=function(){var t={};return Object.keys(this.surfaceIds_).forEach(function(e){var n=this.getSurfaceFromElementId(e);t[this.getSurfaceId(n)]=n}.bind(this)),t},p.prototype.handleComponentAttachedOnce_=function(){this.updatePlaceholderSurfaces_()},p.prototype.handleComponentDetached_=function(){this.eventsCollector_.detachAllListeners()},p.prototype.hasComponentPrefix_=function(t){var e=this.component_.id;return t.substr(0,e.length)===e&&(t.length===e.length||"-"===t[e.length])},p.prototype.mergeObjects_=function(t){return r.mixin.apply(null,[{}].concat(t.reverse()))},p.prototype.prefixSurfaceId=function(t){return this.component_.id+"-"+t},p.prototype.removeSurface=function(t,e){if(!e){var n=this.getSurfaceElement(t);n&&n.parentNode&&n.parentNode.removeChild(n)}var r=this.getSurfaceElementId(t,this.getSurface(t));return p.surfacesCollector.removeSurface(r),this.surfaceIds_[r]=!1,this},p.prototype.removeUnusedSurfaces_=function(){for(var t=[],e=0;e<this.removedSurfaces_.length;e++){var n=this.removedSurfaces_[e];n.parent||(this.removeSurface(n.surfaceElementId),n.componentName&&t.push(n.surfaceElementId))}this.component_.disposeSubComponents(t)},p.prototype.render=function(t){var e=this.component_.id;if(t.decorating){var n=this.getElementExtendedContent(),r=this.computeSurfaceCacheState_(n),o=l.compress(this.component_.element.outerHTML),i=this.computeSurfaceCacheState_(o);this.compareCacheStates_(i,r)||this.replaceElementContent(n)}else this.emitRenderSurfaceEvent_(e)},p.prototype.renderComponentSurface_=function(t,e){var n=u.components[t];if(n.wasRendered){var r=this.getSurfaceFromElementId(t);c.componentsCollector.updateComponent(t,r.componentData)}else e&&i.isEmpty(n.element)&&n.getRenderer().replaceElementContent(e),n.renderAsSubComponent()},p.prototype.renderPlaceholderSurfaceContents_=function(t,e){var n=this;t.replace(p.SURFACE_REGEX,function(t,r){var o=n.createPlaceholderSurface_(e,r);return n.emitRenderSurfaceEvent_(o.surfaceElementId),t})},p.prototype.renderSurfacesContent_=function(t){this.generatedIdCount_={},this.removedSurfaces_=[];var e=this.component_.id,n=Object.keys(t),r=n.indexOf(e);-1!==r&&(n.splice(r,1),n=[e].concat(n));for(var o=0;o<n.length;o++){var i=this.getSurfaceFromElementId(n[o]);i.handled||!i.parent&&n[o]!==e||this.emitRenderSurfaceEvent_(n[o],null,null,t[n[o]])}this.updatePlaceholderSurfaces_(),this.eventsCollector_.detachUnusedListeners(),this.removeUnusedSurfaces_()},p.prototype.replaceElementContent=function(t){var e=this.component_.element,n=this.buildFragment_(t),r=this.findElementInContent_(this.component_.id,n);r&&(this.updateElementAttributes_(e,r),n=r.childNodes),i.removeChildren(e),i.append(e,n)},p.prototype.replaceSurfaceContent_=function(t,e,n){if(n=this.replaceSurfacePlaceholders_(n,t,e),t===this.component_.id)return void this.replaceElementContent(n);var r=this.getSurfaceElement(t),o=this.buildFragment_(n),s=this.findElementInContent_(t,o);s?(e.element=s,i.replace(r,e.element)):(i.removeChildren(r),i.append(r,o))},p.prototype.replaceSurfacePlaceholders_=function(t,e,n){n.componentName&&e!==this.component_.id||(this.addToRemovedSurfaces_(n.children||[]),n.children=[]);var r=this;return t.replace(p.SURFACE_REGEX,function(t,o){var i=r.createPlaceholderSurface_(e,o);o=i.surfaceElementId,i.handled=!0,i.parent=e,n.children.push(o);var s=r.getSurfaceContent_(o),a=r.getSurfaceHtml_(i,s),l=r.replaceSurfacePlaceholders_(a,o,i);return r.collectedSurfaces_.push({cacheContent:s,content:l,surface:i}),l})},p.prototype.update=function(t){this.renderSurfacesContent_(this.getModifiedSurfacesFromChanges_(t.changes))},p.prototype.updateElementAttributes_=function(t,e){for(var n=e.attributes,r=0;r<n.length;r++)"id"!==n[r].name&&"class"!==n[r].name&&t.setAttribute(n[r].name,n[r].value);t.tagName!==e.tagName},p.prototype.updatePlaceholderSurface_=function(t){var e=t.surface,n=e.surfaceElementId;e.componentName?(i.replace(this.component_.findElementById(n),this.getSurfaceElement(n,e)),this.emitRenderSurfaceEvent_(n,t.content,t.cacheContent)):(e.element=null,this.cacheSurfaceContent(n,t.cacheContent),this.eventsCollector_.attachListenersFromHtml(t.cacheContent,n))},p.prototype.updatePlaceholderSurfaces_=function(){for(var t=this.collectedSurfaces_.length-1;t>=0;t--)this.updatePlaceholderSurface_(this.collectedSurfaces_[t]),this.collectedSurfaces_[t].surface.handled=!1;this.collectedSurfaces_=[]},p.prototype.wrapContentIfNecessary=function(t,e,n){return this.checkHasElementTag_(t,e)||(t="<"+n+' id="'+e+'">'+t+"</"+n+">"),t},p}(m);d.prototype.registerMetalComponent&&d.prototype.registerMetalComponent(d,"SurfaceRenderer"),d.Cache={NOT_INITIALIZED:-2},d.SURFACE_REGEX=/\%\%\%\%~s(?:-([^~:]+))?~\%\%\%\%/g,d.surfacesCollector=new p,this.metal.SurfaceRenderer=d}.call(this),function(){var t=this.metal.Component,e=this.metal.ComponentCollector,n=this.metal.ComponentRegistry,r=this.metal.ComponentRenderer,o=this.metal.EventsCollector,i=this.metal.SurfaceCollector,s=this.metal.SurfaceRenderer;this.metal.component=t,this.metalNamed.component={},this.metalNamed.component.Component=t,this.metalNamed.component.ComponentCollector=e,this.metalNamed.component.ComponentRegistry=n,this.metalNamed.component.ComponentRenderer=r,this.metalNamed.component.EventsCollector=o,this.metalNamed.component.SurfaceCollector=i,this.metalNamed.component.SurfaceRenderer=s}.call(this),function(){var e={},n=function(){function n(){t.classCallCheck(this,n)}return n.get=function(t,r){return t?r?n.get(t)[r]:e[t]||{}:e},n.set=function(t,n){e[t]=n},n}();this.metal.SoyTemplates=n}.call(this),function(){var t=this.metal.SoyTemplates,e={interceptFn_:null,getOriginalFn:function(t){return t.originalFn?t.originalFn:t},handleTemplateCall_:function(t,n,r,o,i,s){return e.interceptFn_?e.interceptFn_.call(null,t,n,r,o,i,s):r.call(null,o,i,s)},registerTemplates:function(n){var r=t.get(n);Object.keys(r).forEach(function(t){var o=r[t];o.originalFn||(r[t]=e.handleTemplateCall_.bind(null,n,t,o),r[t].originalFn=o)})},startInterception:function(t){e.interceptFn_=t},stopInterception:function(){e.interceptFn_=null}};this.metal.SoyAop=e}.call(this),function(){var e=this.metalNamed.metal.core,n=this.metalNamed.metal.object,r=this.metal.dom,o=this.metalNamed.component.Component,i=this.metalNamed.component.ComponentRegistry,s=this.metalNamed.component.SurfaceRenderer,a=this.metal.SoyAop,l=this.metal.SoyTemplates,c={},u=function(s){function u(){return t.classCallCheck(this,u),t.possibleConstructorReturn(this,s.apply(this,arguments))}return t.inherits(u,s),u.prototype.addSurfacesFromTemplates_=function(){for(var t=this.component_.getName(),e=l.get(t),n=Object.keys(e),r=0;r<n.length;r++){var o=n[r],i=a.getOriginalFn(e[o]);if(u.isSurfaceTemplate_(o,i)){var s="render"===o?this.component_.id:o;this.addSurface(s,{renderAttrs:i.params,templateComponentName:t,templateName:o})}}},u.buildComponentConfigData_=function(t,e){var n={id:t};for(var r in e)n[r]=e[r];return n},u.prototype.buildTemplateData_=function(){var t=this.component_,r=t.getAttrNames().filter(function(t){return"element"!==t}),o=this.getSurface(t.id),i=o&&o.componentData?o.componentData:{},s=n.map(t.getAttrs(r),function(n,r){return t.getAttrConfig(n).isHtml&&e.isString(r)?u.sanitizeHtml(r):r});return n.mixin(i,s)},u.createComponentFromTemplate=function(s,c,m){var h=c?r.toElement(c):null,p=n.mixin({id:h?h.id:null},m,{element:h}),d="TemplateComponent"+e.getUid(),f=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(o);return f.prototype.registerMetalComponent&&f.prototype.registerMetalComponent(f,"TemplateComponent"),f.RENDERER=u,i.register(f,d),l.set(d,{render:function(t,e,n){return a.getOriginalFn(s)(p,e,n)}}),a.registerTemplates(d),new f(p)},u.decorateFromTemplate=function(t,e,n){return u.createComponentFromTemplate(t,e,n).decorate()},u.prototype.generateSurfaceElementId=function(t,e){return e.templateName&&t===this.component_.id&&!this.firstSurfaceFound_[e.templateName]?(this.firstSurfaceFound_[e.templateName]=!0,this.prefixSurfaceId(e.templateName)):s.prototype.generateSurfaceElementId.call(this,t)},u.prototype.getSurfaceContent=function(t,e){t.surfaceElementId===this.component_.id&&(t.renderAttrs||this.addSurfacesFromTemplates_(),this.firstSurfaceFound_={}),this.surfaceBeingRendered_=t.surfaceElementId,this.skipInnerCalls_=this.skipInnerCalls_||e;var n=t.templateData;t.templateData=null;var r=this.renderTemplateByName_(t.templateComponentName,t.templateName,n);return this.surfaceBeingRendered_=null,this.skipInnerCalls_=!1,r},u.prototype.handleComponentCall_=function(t,e){var n={componentName:t},r=(e||{}).id;return r||(r=this.generateSurfaceElementId(this.surfaceBeingRendered_,n)),n.componentData=u.buildComponentConfigData_(r,e),this.buildPlaceholder(r,n)},u.prototype.handleInterceptedCall_=function(t,e,n,r,o,i){return this.skipInnerCalls_?"":"render"===e?this.handleComponentCall_.call(this,t,r):this.handleSurfaceCall_.call(this,t,e,n,r,o,i)},u.prototype.handleSurfaceCall_=function(t,n,r,o,i,s){var a,l={"static":r["static"],templateComponentName:t,templateData:o,templateName:n};if(e.isDefAndNotNull(o.surfaceElementId))a=o.surfaceElementId;else if(e.isDefAndNotNull(o.surfaceId))a=this.getSurfaceElementId(o.surfaceId.toString());else{if(r["private"])return r.call(null,o,i,s);a=this.generateSurfaceElementId(this.surfaceBeingRendered_,l)}return this.buildPlaceholder(a,l)},u.isSurfaceTemplate_=function(t,e){return"__deltemplate"!==t.substr(0,13)&&!e["private"]},u.renderFromTemplate=function(t,e,n){return u.createComponentFromTemplate(t,e,n).render()},u.prototype.renderTemplate_=function(t,e){a.startInterception(this.handleInterceptedCall_.bind(this)),t=a.getOriginalFn(t);var n=t(e||this.buildTemplateData_(),null,c).content;return a.stopInterception(),n},u.prototype.renderTemplateByName_=function(t,n,r){var o=l.get(t,n);return e.isFunction(o)?this.renderTemplate_(o,r):void 0},u.sanitizeHtml=function(t){return soydata.VERY_UNSAFE.ordainSanitizedHtml(t)},u.setInjectedData=function(t){c=t||{}},u}(s);u.prototype.registerMetalComponent&&u.prototype.registerMetalComponent(u,"SoyRenderer");var m=soydata.SanitizedHtml.from;soydata.SanitizedHtml.from=function(t){return t&&"HTML"===t.contentKind&&(t=u.sanitizeHtml(t.content)),m(t)},this.metal.SoyRenderer=u}.call(this),function(){var t=this.metal.SoyAop,e=this.metal.SoyRenderer,n=this.metal.SoyTemplates;this.metal.soy=e,this.metalNamed.soy={},this.metalNamed.soy.SoyAop=t,this.metalNamed.soy.SoyRenderer=e,this.metalNamed.soy.SoyTemplates=n}.call(this),function(){var e=this.metal.component,n=this.metalNamed.soy.SoyAop,r=this.metalNamed.soy.SoyRenderer,o=this.metalNamed.soy.SoyTemplates,i=o.get();"undefined"==typeof i.Alert&&(i.Alert={}),i.Alert.render=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(t.id)+'" class="alert alert-dismissible component'+soy.$$escapeHtmlAttribute(t.elementClasses?" "+t.elementClasses:"")+'" role="alert"><span class="alert-body">'+(t.body?soy.$$escapeHtml(t.body):"")+"</span>"+(t.dismissible?'<button type="button" class="close" aria-label="Close" data-onclick="toggle"><span aria-hidden="true"></span></button>':"")+"</div>")},goog.DEBUG&&(i.Alert.render.soyTemplateName="Templates.Alert.render"),i.Alert.render.params=["body","dismissible","id"];var s=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(e);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"Alert"),s.RENDERER=r,n.registerTemplates("Alert"),this.metal.Alert=s}.call(this),function(){var e=this.metal.metal,n=this.metalNamed.dom.dom,r=this.metalNamed.dom.features,o=function(){function o(){t.classCallCheck(this,o)}return o.emulateEnd=function(t,e){return this.getComputedDurationMs(t,"animation")>this.getComputedDurationMs(t,"transition")?this.emulateEnd_(t,"animation",e):this.emulateEnd_(t,"transition",e)},o.emulateAnimationEnd=function(t,e){return this.emulateEnd_(t,"animation",e)},o.emulateTransitionEnd=function(t,e){this.emulateEnd_(t,"transition",e)},o.emulateEnd_=function(t,o,i){var s=i;e.isDef(i)||(s=this.getComputedDurationMs(t,o));var a=setTimeout(function(){n.triggerEvent(t,r.checkAnimationEventName()[o])},s),l=function(){clearTimeout(a),c.removeListener()},c=n.once(t,o+"end",l);return{abort:l}},o.getComputedDurationMs=function(t,e){return 1e3*(parseFloat(window.getComputedStyle(t,null).getPropertyValue(e+"-duration"))||0)},o}();this.metal.Anim=o}.call(this),function(){var e=this.metalNamed.metal.core,n=this.metal.dom,r=this.metal.Alert,o=this.metal.Anim,i=this.metalNamed.events.EventHandler,s=function(r){function s(e){t.classCallCheck(this,s);var n=t.possibleConstructorReturn(this,r.call(this,e));return n.eventHandler_=new i,n}return t.inherits(s,r),s.prototype.detached=function(){r.prototype.detached.call(this),this.eventHandler_.removeAllListeners(),clearTimeout(this.delay_)},s.prototype.close=function(){n.once(this.element,"animationend",this.dispose.bind(this)),n.once(this.element,"transitionend",this.dispose.bind(this)),this.eventHandler_.removeAllListeners(),this.syncVisible(!1)},s.prototype.handleDocClick_=function(t){this.element.contains(t.target)||this.hide()},s.prototype.hide=function(){this.visible=!1},s.prototype.toggle=function(){this.visible=!this.visible},s.prototype.syncDismissible=function(t){t?this.eventHandler_.add(n.on(document,"click",this.handleDocClick_.bind(this))):this.eventHandler_.removeAllListeners(),n[t?"addClasses":"removeClasses"](this.element,"alert-dismissible")},s.prototype.syncVisible=function(t){n.removeClasses(this.element,this.animClasses[t?"hide":"show"]),n.addClasses(this.element,this.animClasses[t?"show":"hide"]),o.emulateEnd(this.element),
t&&e.isNumber(this.hideDelay)&&this.syncHideDelay(this.hideDelay)},s.prototype.syncHideDelay=function(t){e.isNumber(t)&&this.visible&&(clearTimeout(this.delay_),this.delay_=setTimeout(this.hide.bind(this),t))},s}(r);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"Alert"),s.ELEMENT_CLASSES="alert",s.ATTRS={animClasses:{validator:e.isObject,value:{show:"fade in",hide:"fade"}},body:{value:""},dismissible:{validator:e.isBoolean,value:!0},elementClasses:{value:"alert-success"},hideDelay:{},visible:{value:!1}},this.metal.Alert=s}.call(this)}).call(this);