this.steel={},this.steelNamed={},function(e){var t=e.babelHelpers={};t.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},t.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t.get=function n(e,t,r){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,t);if(void 0===s){var i=Object.getPrototypeOf(e);return null===i?void 0:n(i,t,r)}if("value"in s)return s.value;var a=s.get;return void 0===a?void 0:a.call(r)},t.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}("undefined"==typeof global?self:global),function(){"use strict";var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"abstractMethod",value:function(){throw Error("Unimplemented abstract method")}},{key:"collectSuperClassesProperty",value:function(e,t){for(var n=[e[t]];e.__proto__&&!e.__proto__.isPrototypeOf(Function);)e=e.__proto__,n.push(e[t]);return n}},{key:"getUid",value:function(t){return t?t[e.UID_PROPERTY]||(t[e.UID_PROPERTY]=e.uniqueIdCounter_++):e.uniqueIdCounter_++}},{key:"identityFunction",value:function(e){return e}},{key:"isBoolean",value:function(e){return"boolean"==typeof e}},{key:"isDef",value:function(e){return void 0!==e}},{key:"isDefAndNotNull",value:function(t){return e.isDef(t)&&!e.isNull(t)}},{key:"isDocument",value:function(e){return e&&"object"==typeof e&&9===e.nodeType}},{key:"isElement",value:function(e){return e&&"object"==typeof e&&1===e.nodeType}},{key:"isFunction",value:function(e){return"function"==typeof e}},{key:"isNull",value:function(e){return null===e}},{key:"isNumber",value:function(e){return"number"==typeof e}},{key:"isWindow",value:function(e){return null!==e&&e===e.window}},{key:"isObject",value:function(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"mergeSuperClassesProperty",value:function(t,n,r){var s=n+"_MERGED";if(t.hasOwnProperty(s))return!1;var i=e.collectSuperClassesProperty(t,n);return r&&(i=r(i)),t[s]=i,!0}},{key:"nullFunction",value:function(){}}]),e}();e.UID_PROPERTY="core_"+(1e9*Math.random()>>>0),e.uniqueIdCounter_=1,this.steel.core=e}.call(this),function(){"use strict";var e=this.steel.core,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"mixin",value:function(e){for(var t,n,r=1;r<arguments.length;r++){n=arguments[r];for(t in n)e[t]=n[t]}return e}},{key:"getObjectByName",value:function(t,n){for(var r,s=t.split("."),i=n||window;r=s.shift();){if(!e.isDefAndNotNull(i[r]))return null;i=i[r]}return i}}]),t}();this.steel.object=t}.call(this),function(){"use strict";var e=function(){function e(){babelHelpers.classCallCheck(this,e),this.disposed_=!1}return babelHelpers.createClass(e,[{key:"dispose",value:function(){this.disposed_||(this.disposeInternal(),this.disposed_=!0)}},{key:"disposeInternal",value:function(){}},{key:"isDisposed",value:function(){return this.disposed_}}]),e}();this.steel.Disposable=e}.call(this),function(){"use strict";var e=this.steel.Disposable,t=function(e){function t(e,n,r){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.emitter_=e,this.event_=n,this.listener_=r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"disposeInternal",value:function(){this.removeListener(),this.emitter_=null,this.listener_=null}},{key:"removeListener",value:function(){this.emitter_.isDisposed()||this.emitter_.removeListener(this.event_,this.listener_)}}]),t}(e);this.steel.EventHandle=t}.call(this),function(){"use strict";var e=this.steel.EventHandle,t=function(e){function t(e,n,r){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n,r)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"removeListener",value:function(){this.emitter_.removeEventListener(this.event_,this.listener_)}}]),t}(e);this.steel.DomEventHandle=t}.call(this),function(){"use strict";var e=this.steel.core,t=this.steel.object,n=this.steel.DomEventHandle,r=function(){function r(){babelHelpers.classCallCheck(this,r)}return babelHelpers.createClass(r,null,[{key:"addClasses",value:function(t,n){e.isObject(t)&&e.isString(n)&&("classList"in t?r.addClassesWithNative_(t,n):r.addClassesWithoutNative_(t,n))}},{key:"addClassesWithNative_",value:function(e,t){t.split(" ").forEach(function(t){e.classList.add(t)})}},{key:"addClassesWithoutNative_",value:function(e,t){var n=" "+e.className+" ",r="";t=t.split(" ");for(var s=0;s<t.length;s++){var i=t[s];-1===n.indexOf(" "+i+" ")&&(r+=" "+i)}r&&(e.className=e.className+r)}},{key:"append",value:function(t,n){if(e.isString(n)&&(n=r.buildFragment(n)),n instanceof NodeList)for(var s=Array.prototype.slice.call(n),i=0;i<s.length;i++)t.appendChild(s[i]);else t.appendChild(n);return n}},{key:"buildFragment",value:function(e){var t=document.createElement("div");t.innerHTML="<br>"+e,t.removeChild(t.firstChild);for(var n=document.createDocumentFragment();t.firstChild;)n.appendChild(t.firstChild);return n}},{key:"delegate",value:function(e,t,n,s){var i=r.customEvents[t];return i&&i.delegate&&(t=i.originalEvent,s=i.handler.bind(i,s)),r.on(e,t,r.handleDelegateEvent_.bind(null,n,s))}},{key:"enterDocument",value:function(e){r.append(document.body,e)}},{key:"exitDocument",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"handleDelegateEvent_",value:function(t,n,s){r.normalizeDelegateEvent_(s);for(var i=s.target,a=!0;i&&!s.stopped&&(e.isString(t)&&r.match(i,t)&&(s.delegateTarget=i,a&=n(s)),i!==s.currentTarget);)i=i.parentNode;return s.delegateTarget=null,a}},{key:"hasClass",value:function(e,t){return"classList"in e?r.hasClassWithNative_(e,t):r.hasClassWithoutNative_(e,t)}},{key:"hasClassWithNative_",value:function(e,t){return e.classList.contains(t)}},{key:"hasClassWithoutNative_",value:function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>=0}},{key:"isEmpty",value:function(e){return 0===e.childNodes.length}},{key:"match",value:function(e,t){if(!e||1!==e.nodeType)return!1;var n=Element.prototype,s=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;return s?s.call(e,t):r.matchFallback_(e,t)}},{key:"matchFallback_",value:function(e,t){for(var n=document.querySelectorAll(t,e.parentNode),r=0;r<n.length;++r)if(n[r]===e)return!0;return!1}},{key:"normalizeDelegateEvent_",value:function(e){e.stopPropagation=r.stopPropagation_,e.stopImmediatePropagation=r.stopImmediatePropagation_}},{key:"on",value:function(t,s,i){if(e.isString(t))return r.delegate(document,s,t,i);var a=r.customEvents[s];return a&&a.event&&(s=a.originalEvent,i=a.handler.bind(a,i)),t.addEventListener(s,i),new n(t,s,i)}},{key:"once",value:function(e,t,n){var r=this.on(e,t,function(){return r.removeListener(),n.apply(this,arguments)});return r}},{key:"registerCustomEvent",value:function(e,t){r.customEvents[e]=t}},{key:"removeChildren",value:function(e){for(var t;t=e.firstChild;)e.removeChild(t)}},{key:"removeClasses",value:function(t,n){e.isObject(t)&&e.isString(n)&&("classList"in t?r.removeClassesWithNative_(t,n):r.removeClassesWithoutNative_(t,n))}},{key:"removeClassesWithNative_",value:function(e,t){t.split(" ").forEach(function(t){e.classList.remove(t)})}},{key:"removeClassesWithoutNative_",value:function(e,t){var n=" "+e.className+" ";t=t.split(" ");for(var r=0;r<t.length;r++)n=n.replace(" "+t[r]+" "," ");e.className=n.trim()}},{key:"replace",value:function(e,t){e&&t&&e!==t&&(e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e))}},{key:"stopImmediatePropagation_",value:function(){this.stopped=!0,Event.prototype.stopImmediatePropagation.call(this)}},{key:"stopPropagation_",value:function(){this.stopped=!0,Event.prototype.stopPropagation.call(this)}},{key:"supportsEvent",value:function(t,n){return r.customEvents[n]?!0:(e.isString(t)&&(s[t]||(s[t]=document.createElement(t)),t=s[t]),"on"+n in t)}},{key:"toElement",value:function(t){return e.isElement(t)||e.isDocument(t)?t:e.isString(t)?"#"===t[0]&&-1===t.indexOf(" ")?document.getElementById(t.substr(1)):document.querySelector(t):null}},{key:"toggleClasses",value:function(t,n){e.isObject(t)&&e.isString(n)&&("classList"in t?r.toggleClassesWithNative_(t,n):r.toggleClassesWithoutNative_(t,n))}},{key:"toggleClassesWithNative_",value:function(e,t){t.split(" ").forEach(function(t){e.classList.toggle(t)})}},{key:"toggleClassesWithoutNative_",value:function(e,t){var n=" "+e.className+" ";t=t.split(" ");for(var r=0;r<t.length;r++){var s=" "+t[r]+" ",i=n.indexOf(s);n=-1===i?n+t[r]+" ":n.substring(0,i)+" "+n.substring(i+s.length)}e.className=n.trim()}},{key:"triggerEvent",value:function(e,n,r){var s=document.createEvent("HTMLEvents");s.initEvent(n,!0,!0),t.mixin(s,r),e.dispatchEvent(s)}}]),r}(),s={};r.customEvents={},this.steel.dom=r}.call(this),function(){"use strict";var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"equal",value:function(e,t){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return e.length===t.length}},{key:"firstDefinedValue",value:function(e){for(var t=0;t<e.length;t++)if(void 0!==e[t])return e[t]}},{key:"flatten",value:function(t,n){for(var r=n||[],s=0;s<t.length;s++)Array.isArray(t[s])?e.flatten(t[s],r):r.push(t[s]);return r}},{key:"remove",value:function(t,n){var r,s=t.indexOf(n);return(r=s>=0)&&e.removeAt(t,s),r}},{key:"removeAt",value:function(e,t){return 1===Array.prototype.splice.call(e,t,1).length}}]),e}();this.steel.array=e}.call(this),function(){"use strict";var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"collapseBreakingSpaces",value:function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}},{key:"hashCode",value:function(e){for(var t=0,n=0,r=e.length;r>n;n++)t=31*t+e.charCodeAt(n),t%=4294967296;return t}},{key:"replaceInterval",value:function(e,t,n,r){return e.substring(0,t)+r+e.substring(n)}}]),e}();this.steel.string=e}.call(this),function(){"use strict";var e=this.steel.dom,t=this.steel.string,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"checkAnimationEventName",value:function(){return void 0===n.animationEventName_&&(n.animationEventName_={animation:n.checkAnimationEventName_("animation"),transition:n.checkAnimationEventName_("transition")}),n.animationEventName_}},{key:"checkAnimationEventName_",value:function(e){for(var r=["Webkit","MS","O",""],s=t.replaceInterval(e,0,1,e.substring(0,1).toUpperCase()),i=[s+"End",s+"End",s+"End",e+"end"],a=0;a<r.length;a++)if(void 0!==n.animationElement_.style[r[a]+s])return r[a].toLowerCase()+i[a];return e+"end"}},{key:"checkAttrOrderChange",value:function(){if(void 0===n.attrOrderChange_){var t='<div data-component="" data-ref=""></div>',r=document.createElement("div");e.append(r,t),n.attrOrderChange_=t!==r.innerHTML}return n.attrOrderChange_}}]),n}();n.animationElement_=document.createElement("div"),n.animationEventName_=void 0,n.attrOrderChange_=void 0,this.steel.features=n}.call(this),function(){"use strict";var e=this.steel.core,t=this.steel.string,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"compress",value:function(e){var t={};return e=n.preserveBlocks_(e,t),e=n.simplifyDoctype_(e),e=n.removeComments_(e),e=n.removeIntertagSpaces_(e),e=n.collapseBreakingSpaces_(e),e=n.removeSpacesInsideTags_(e),e=n.removeSurroundingSpaces_(e),e=n.returnBlocks_(e,t),e.trim()}},{key:"collapseBreakingSpaces_",value:function(e){return t.collapseBreakingSpaces(e)}},{key:"lookupPossibleTagBoundary_",value:function(e,t){var n=e.indexOf(t);return n>-1&&(n+=e.substring(n).indexOf(">")+1),n}},{key:"preserveBlocks_",value:function(e,t){return e=n.preserveOuterHtml_(e,"<!--[if","<![endif]-->",t),e=n.preserveInnerHtml_(e,"<code","</code",t),e=n.preserveInnerHtml_(e,"<pre","</pre",t),e=n.preserveInnerHtml_(e,"<script","</script",t),e=n.preserveInnerHtml_(e,"<style","</style",t),e=n.preserveInnerHtml_(e,"<textarea","</textarea",t)}},{key:"preserveInnerHtml_",value:function(e,t,r,s){for(var i=n.lookupPossibleTagBoundary_(e,t);i>-1;){var a=e.indexOf(r);e=n.preserveInterval_(e,i,a,s),e=e.replace(t,"%%%~1~%%%"),e=e.replace(r,"%%%~2~%%%"),i=n.lookupPossibleTagBoundary_(e,t)}return e=e.replace(/%%%~1~%%%/g,t),e=e.replace(/%%%~2~%%%/g,r)}},{key:"preserveInterval_",value:function(n,r,s,i){var a="%%%~BLOCK~"+e.getUid()+"~%%%";return i[a]=n.substring(r,s),t.replaceInterval(n,r,s,a)}},{key:"preserveOuterHtml_",value:function(e,t,r,s){for(var i=e.indexOf(t);i>-1;){var a=e.indexOf(r)+r.length;e=n.preserveInterval_(e,i,a,s),i=e.indexOf(t)}return e}},{key:"removeComments_",value:function(e){var t={};return e=n.preserveOuterHtml_(e,"<![CDATA[","]]>",t),e=n.preserveOuterHtml_(e,"<!--","-->",t),e=n.replacePreservedBlocks_(e,t,"")}},{key:"removeIntertagSpaces_",value:function(e){return e=e.replace(n.Patterns.INTERTAG_CUSTOM_CUSTOM,"~%%%%%%~"),e=e.replace(n.Patterns.INTERTAG_CUSTOM_TAG,"~%%%<"),e=e.replace(n.Patterns.INTERTAG_TAG,"><"),e=e.replace(n.Patterns.INTERTAG_TAG_CUSTOM,">%%%~")}},{key:"removeSpacesInsideTags_",value:function(e){return e=e.replace(n.Patterns.TAG_END_SPACES,"$1$2"),e=e.replace(n.Patterns.TAG_QUOTE_SPACES,"=$1$2$3")}},{key:"removeSurroundingSpaces_",value:function(e){return e.replace(n.Patterns.SURROUNDING_SPACES,"$1")}},{key:"replacePreservedBlocks_",value:function(e,t,n){for(var r in t)e=e.replace(r,n);return e}},{key:"simplifyDoctype_",value:function(e){var t={};return e=n.preserveOuterHtml_(e,"<!DOCTYPE",">",t),e=n.replacePreservedBlocks_(e,t,"<!DOCTYPE html>")}},{key:"returnBlocks_",value:function(e,t){for(var n in t)e=e.replace(n,t[n]);return e}}]),n}();n.Patterns={INTERTAG_CUSTOM_CUSTOM:/~%%%\s+%%%~/g,INTERTAG_TAG_CUSTOM:/>\s+%%%~/g,INTERTAG_CUSTOM_TAG:/~%%%\s+</g,INTERTAG_TAG:/>\s+</g,SURROUNDING_SPACES:/\s*(<[^>]+>)\s*/g,TAG_END_SPACES:/(<(?:[^>]+?))(?:\s+?)(\/?>)/g,TAG_QUOTE_SPACES:/\s*=\s*(["']?)\s*(.*?)\s*(\1)/g},this.steel.html=n}.call(this),function(){"use strict";var e=this.steel.core,t=this.steel.Disposable,n=this.steel.EventHandle,r=function(t){function r(){babelHelpers.classCallCheck(this,r),babelHelpers.get(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),this.events_=[],this.maxListeners_=10,this.shouldUseFacade_=!1}return babelHelpers.inherits(r,t),babelHelpers.createClass(r,[{key:"addListener",value:function(e,t,r){this.validateListener_(t),e=this.normalizeEvents_(e);for(var s=0;s<e.length;s++)this.addSingleListener_(e[s],t,r);return new n(this,e,t)}},{key:"addSingleListener_",value:function(e,t,n,r){this.emit("newListener",e,t),this.events_[e]||(this.events_[e]=[]),this.events_[e].push({"default":n,fn:t,origin:r});var s=this.events_[e];s.length>this.maxListeners_&&!s.warned&&(s.warned=!0)}},{key:"disposeInternal",value:function(){this.events_=[]}},{key:"emit",value:function(e){var t,n=Array.prototype.slice.call(arguments,1),r=(this.events_[e]||[]).concat();this.getShouldUseFacade()&&(t={preventDefault:function(){t.preventedDefault=!0},target:this,type:e},n.push(t));for(var s=[],i=0;i<r.length;i++)r[i]["default"]?s.push(r[i]):r[i].fn.apply(this,n);if(!t||!t.preventedDefault)for(var a=0;a<s.length;a++)s[a].fn.apply(this,n);return"*"!==e&&this.emit.apply(this,["*",e].concat(n)),r.length>0}},{key:"getShouldUseFacade",value:function(){return this.shouldUseFacade_}},{key:"listeners",value:function(e){return(this.events_[e]||[]).map(function(e){return e.fn})}},{key:"many",value:function(e,t,r){e=this.normalizeEvents_(e);for(var s=0;s<e.length;s++)this.many_(e[s],t,r);return new n(this,e,r)}},{key:"many_",value:function(e,t,n){function r(){0===--t&&s.removeListener(e,r),n.apply(s,arguments)}var s=this;0>=t||s.addSingleListener_(e,r,!1,n)}},{key:"matchesListener_",value:function(e,t){return e.fn===t||e.origin&&e.origin===t}},{key:"normalizeEvents_",value:function(t){return e.isString(t)?[t]:t}},{key:"off",value:function(e,t){this.validateListener_(t),e=this.normalizeEvents_(e);for(var n=0;n<e.length;n++){var r=this.events_[e[n]]||[];this.removeMatchingListenerObjs_(r,t)}return this}},{key:"on",value:function(){return this.addListener.apply(this,arguments)}},{key:"once",value:function(e,t){return this.many(e,1,t)}},{key:"removeAllListeners",value:function(e){if(e)for(var t=this.normalizeEvents_(e),n=0;n<t.length;n++)this.events_[t[n]]=null;else this.events_={};return this}},{key:"removeMatchingListenerObjs_",value:function(e,t){for(var n=e.length-1;n>=0;n--)this.matchesListener_(e[n],t)&&e.splice(n,1)}},{key:"removeListener",value:function(){return this.off.apply(this,arguments)}},{key:"setMaxListeners",value:function(e){return this.maxListeners_=e,this}},{key:"setShouldUseFacade",value:function(e){return this.shouldUseFacade_=e,this}},{key:"validateListener_",value:function(t){if(!e.isFunction(t))throw new TypeError("Listener must be a function")}}]),r}(t);this.steel.EventEmitter=r}.call(this),function(){/*!
  * Polyfill from Google's Closure Library.
  * Copyright 2013 The Closure Library Authors. All Rights Reserved.
  */
"use strict";var e=this.steel.core,t={};t.throwException=function(e){t.nextTick(function(){throw e})},t.run=function(e,n){t.run.workQueueScheduled_||(t.nextTick(t.run.processWorkQueue),t.run.workQueueScheduled_=!0),t.run.workQueue_.push(new t.run.WorkItem_(e,n))},t.run.workQueueScheduled_=!1,t.run.workQueue_=[],t.run.processWorkQueue=function(){for(;t.run.workQueue_.length;){var e=t.run.workQueue_;t.run.workQueue_=[];for(var n=0;n<e.length;n++){var r=e[n];try{r.fn.call(r.scope)}catch(s){t.throwException(s)}}}t.run.workQueueScheduled_=!1},t.run.WorkItem_=function(e,t){this.fn=e,this.scope=t},t.nextTick=function(n,r){var s=n;return r&&(s=n.bind(r)),s=t.nextTick.wrapCallback_(s),e.isFunction(window.setImmediate)?void window.setImmediate(s):(t.nextTick.setImmediate_||(t.nextTick.setImmediate_=t.nextTick.getSetImmediateEmulator_()),void t.nextTick.setImmediate_(s))},t.nextTick.setImmediate_=null,t.nextTick.getSetImmediateEmulator_=function(){var e=window.MessageChannel;if("undefined"==typeof e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&(e=function(){var e=document.createElement("iframe");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow,n=t.document;n.open(),n.write(""),n.close();var r="callImmediate"+Math.random(),s=t.location.protocol+"//"+t.location.host,i=function(e){(e.origin===s||e.data===r)&&this.port1.onmessage()}.bind(this);t.addEventListener("message",i,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(r,s)}}}),"undefined"!=typeof e){var t=new e,n={},r=n;return t.port1.onmessage=function(){n=n.next;var e=n.cb;n.cb=null,e()},function(e){r.next={cb:e},r=r.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(e){var t=document.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){setTimeout(e,0)}},t.nextTick.wrapCallback_=function(e){return e},this.steel.async=t}.call(this),function(){"use strict";var e=this.steel.array,t=this.steel.core,n=this.steel.object,r=this.steel.EventEmitter,s=this.steel.async,i=function(r){function i(e){babelHelpers.classCallCheck(this,i),babelHelpers.get(Object.getPrototypeOf(i.prototype),"constructor",this).call(this),this.scheduledBatchData_=null,this.attrsInfo_={},this.setShouldUseFacade(!0),this.mergeInvalidAttrs_(),this.addAttrsFromStaticHint_(e)}return babelHelpers.inherits(i,r),babelHelpers.createClass(i,[{key:"addAttr",value:function(e,t,n){this.buildAttrInfo_(e,t,n),Object.defineProperty(this,e,this.buildAttrPropertyDef_(e))}},{key:"addAttrs",value:function(e,t,n){t=t||{};for(var r=Object.keys(e),s={},i=0;i<r.length;i++){var a=r[i];this.buildAttrInfo_(a,e[a],t[a]),s[a]=this.buildAttrPropertyDef_(a)}n!==!1&&Object.defineProperties(n||this,s)}},{key:"addAttrsFromStaticHint_",value:function(e){var t=this.constructor,n=!1;i.mergeAttrsStatic(t)&&(n=t.prototype),this.addAttrs(t.ATTRS_MERGED,e,n)}},{key:"assertValidAttrName_",value:function(e){if(this.constructor.INVALID_ATTRS_MERGED[e])throw new Error("It's not allowed to create an attribute with the name \""+e+'".')}},{key:"buildAttrInfo_",value:function(e,t,n){this.assertValidAttrName_(e),this.attrsInfo_[e]={config:t||{},initialValue:n,state:i.States.UNINITIALIZED}}},{key:"buildAttrPropertyDef_",value:function(e){return{configurable:!0,enumerable:!0,get:function(){return this.getAttrValue_(e)},set:function(t){this.setAttrValue_(e,t)}}}},{key:"callFunction_",value:function(e,n){return t.isString(e)?this[e].apply(this,n):t.isFunction(e)?e.apply(this,n):void 0}},{key:"callSetter_",value:function(e,t){var n=this.attrsInfo_[e],r=n.config;return r.setter&&(t=this.callFunction_(r.setter,[t])),t}},{key:"callValidator_",value:function(e,t){var n=this.attrsInfo_[e],r=n.config;return r.validator?this.callFunction_(r.validator,[t]):!0}},{key:"canSetAttribute",value:function(e){var t=this.attrsInfo_[e];return!t.config.writeOnce||!t.written}},{key:"disposeInternal",value:function(){babelHelpers.get(Object.getPrototypeOf(i.prototype),"disposeInternal",this).call(this),this.attrsInfo_=null,this.scheduledBatchData_=null}},{key:"emitBatchEvent_",value:function(){if(!this.isDisposed()){var e=this.scheduledBatchData_;this.scheduledBatchData_=null,this.emit("attrsChanged",e)}}},{key:"get",value:function(e){return this[e]}},{key:"getAttrConfig",value:function(e){return(this.attrsInfo_[e]||{}).config}},{key:"getAttrs",value:function(e){for(var t={},n=e||this.getAttrNames(),r=0;r<n.length;r++)t[n[r]]=this[n[r]];return t}},{key:"getAttrNames",value:function(){return Object.keys(this.attrsInfo_)}},{key:"getAttrValue_",value:function(e){return this.initAttr_(e),this.attrsInfo_[e].value}},{key:"informChange_",value:function(e,t){if(this.shouldInformChange_(e,t)){var n={attrName:e,newVal:this[e],prevVal:t};this.emit(e+"Changed",n),this.scheduleBatchEvent_(n)}}},{key:"initAttr_",value:function(e){var t=this.attrsInfo_[e];t.state===i.States.UNINITIALIZED&&(t.state=i.States.INITIALIZING,this.setInitialValue_(e),t.written||(t.state=i.States.INITIALIZING_DEFAULT,this.setDefaultValue_(e)),t.state=i.States.INITIALIZED)}},{key:"mergeInvalidAttrs_",value:function(){t.mergeSuperClassesProperty(this.constructor,"INVALID_ATTRS",function(t){return e.flatten(t).reduce(function(e,t){return t&&(e[t]=!0),e},{})})}},{key:"removeAttr",value:function(e){this.attrsInfo_[e]=null,delete this[e]}},{key:"scheduleBatchEvent_",value:function(e){this.scheduledBatchData_||(s.nextTick(this.emitBatchEvent_,this),this.scheduledBatchData_={changes:{}});var t=e.attrName,n=this.scheduledBatchData_.changes;n[t]?n[t].newVal=e.newVal:n[t]=e}},{key:"set",value:function(e,t){this[e]=t}},{key:"setAttrs",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)this[t[n]]=e[t[n]]}},{key:"setAttrValue_",value:function(e,t){if(this.canSetAttribute(e)&&this.validateAttrValue_(e,t)){var n=this.attrsInfo_[e];void 0===n.initialValue&&n.state===i.States.UNINITIALIZED&&(n.state=i.States.INITIALIZED);var r=this[e];n.value=this.callSetter_(e,t),n.written=!0,this.informChange_(e,r)}}},{key:"setDefaultValue_",value:function(e){var t=this.attrsInfo_[e].config;this[e]=void 0!==t.value?t.value:this.callFunction_(t.valueFn)}},{key:"setInitialValue_",value:function(e){var t=this.attrsInfo_[e];void 0!==t.initialValue&&(this[e]=t.initialValue,t.initialValue=void 0)}},{key:"shouldInformChange_",value:function(e,n){var r=this.attrsInfo_[e];return r.state===i.States.INITIALIZED&&(t.isObject(n)||n!==this[e])}},{key:"validateAttrValue_",value:function(e,t){var n=this.attrsInfo_[e];return n.state===i.States.INITIALIZING_DEFAULT||this.callValidator_(e,t)}}],[{key:"mergeAttrs_",value:function(e){return n.mixin.apply(null,[{}].concat(e.reverse()))}},{key:"mergeAttrsStatic",value:function(e){return t.mergeSuperClassesProperty(e,"ATTRS",i.mergeAttrs_)}}]),i}(r);i.INVALID_ATTRS=["attrs"],i.States={UNINITIALIZED:0,INITIALIZING:1,INITIALIZING_DEFAULT:2,INITIALIZED:3},this.steel.Attribute=i}.call(this),function(){"use strict";var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"getConstructor",value:function(t){var n=e.components_[t];return n}},{key:"register",value:function(t,n){e.components_[t]=n,n.NAME=t,n.TEMPLATES=e.Templates[t]}}]),e}();e.components_={},e.Templates={},this.steel.ComponentRegistry=e}.call(this),function(){"use strict";var e=this.steel.ComponentRegistry,t=this.steel.Disposable,n=function(t){function n(){babelHelpers.classCallCheck(this,n),babelHelpers.get(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(n,t),babelHelpers.createClass(n,[{key:"addComponent",value:function(e){n.components[e.id]=e}},{key:"createComponent",value:function(t,r,s){var i=n.components[r];if(!i){var a=e.getConstructor(t),l=s||{};l.id=r,l.element="#"+r,i=new a(l)}return i}},{key:"removeComponent",value:function(e){delete n.components[e.id]}},{key:"updateComponent",value:function(e,t){var r=n.components[e];return r&&t&&r.setAttrs(t),r}}]),n}(t);n.components={},this.steel.ComponentCollector=n}.call(this),function(){"use strict";var e=this.steel.core,t=this.steel.dom,n=this.steel.Disposable,r=function(n){function r(e,t,n,s){babelHelpers.classCallCheck(this,r),babelHelpers.get(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),this.blacklist_=n||{},this.originEmitter_=e,this.proxiedEvents_={},this.targetEmitter_=t,this.whitelist_=s,this.startProxy_()}return babelHelpers.inherits(r,n),babelHelpers.createClass(r,[{key:"disposeInternal",value:function(){var e=this.originEmitter_.removeEventListener?"removeEventListener":"removeListener";for(var t in this.proxiedEvents_)this.originEmitter_[e](t,this.proxiedEvents_[t]);this.proxiedEvents_=null,this.originEmitter_=null,this.targetEmitter_=null}},{key:"proxyEvent_",value:function(n){if(this.shouldProxyEvent_(n)){var r=this;this.proxiedEvents_[n]=function(){var e=[n].concat(Array.prototype.slice.call(arguments,0));r.targetEmitter_.emit.apply(r.targetEmitter_,e)},e.isElement(this.originEmitter_)||e.isDocument(this.originEmitter_)?t.on(this.originEmitter_,n,this.proxiedEvents_[n]):this.originEmitter_.on(n,this.proxiedEvents_[n])}}},{key:"shouldProxyEvent_",value:function(e){return this.whitelist_&&!this.whitelist_[e]?!1:this.blacklist_[e]?!1:!this.proxiedEvents_[e]&&(!(this.originEmitter_.removeEventListener||this.originEmitter_.addEventListener)||t.supportsEvent(this.originEmitter_,e))}},{key:"startProxy_",value:function(){this.targetEmitter_.on("newListener",this.proxyEvent_.bind(this))}}]),r}(n);this.steel.EventEmitterProxy=r}.call(this),function(){"use strict";var e=this.steel.Disposable,t=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.eventHandles_=[]}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"add",value:function(){for(var e=0;e<arguments.length;e++)this.eventHandles_.push(arguments[e])}},{key:"disposeInternal",value:function(){this.eventHandles_=null}},{key:"removeAllListeners",value:function(){for(var e=0;e<this.eventHandles_.length;e++)this.eventHandles_[e].removeListener();this.eventHandles_=[]}}]),t}(e);this.steel.EventHandler=t}.call(this),function(){"use strict";var e=this.steel.core,t=this.steel.ComponentCollector,n=this.steel.Disposable,r=this.steel.EventHandler,s=function(n){function s(e){if(babelHelpers.classCallCheck(this,s),babelHelpers.get(Object.getPrototypeOf(s.prototype),"constructor",this).call(this),!e)throw new Error("The component instance is mandatory");this.component_=e,this.eventHandles_={},this.groupHasListener_={}}return babelHelpers.inherits(s,n),babelHelpers.createClass(s,[{key:"attachListener_",value:function(e,t,n){var s="[data-on"+e+'="'+t+'"]';if(this.groupHasListener_[n][s]=!0,!this.eventHandles_[s]){this.eventHandles_[s]=new r;for(var i=t.split(","),a=0;a<i.length;a++){var l=this.getListenerFn(i[a]);l&&this.eventHandles_[s].add(this.component_.delegate(e,s,this.onEvent_.bind(this,l)))}}}},{key:"attachListeners",value:function(t,n){e.isString(t)&&(this.groupHasListener_[n]={},this.attachListenersFromHtml_(t,n))}},{key:"attachListenersFromHtml_",value:function(e,t){if(-1!==e.indexOf("data-on"))for(var n=/data-on([a-z]+)=['"]([^'"]+)['"]/g,r=n.exec(e);r;)this.attachListener_(r[1],r[2],t),r=n.exec(e)}},{key:"detachAllListeners",value:function(){for(var e in this.eventHandles_)this.eventHandles_[e]&&this.eventHandles_[e].removeAllListeners();this.eventHandles_={},this.listenerCounts_={}}},{key:"detachUnusedListeners",value:function(){for(var e in this.eventHandles_)if(this.eventHandles_[e]){var t=!0;for(var n in this.groupHasListener_)if(this.groupHasListener_[n][e]){t=!1;break}t&&(this.eventHandles_[e].removeAllListeners(),this.eventHandles_[e]=null)}}},{key:"disposeInternal",value:function(){this.detachAllListeners(),this.component_=null}},{key:"getListenerFn",value:function(n){var r,s=n.split(":");return 2===s.length&&(n=s[1],r=t.components[s[0]]),r=r||this.component_,e.isFunction(r[n])?r[n].bind(r):void 0}},{key:"hasAttachedForGroup",value:function(e){return!!this.groupHasListener_.hasOwnProperty(e)}},{key:"onEvent_",value:function(e,t){var n=t.handledByComponent;return!n||n===this.component_||t.delegateTarget.contains(n.element)?(t.handledByComponent=this.component_,e(t)):void 0}}]),s}(n);this.steel.EventsCollector=s}.call(this),function(){"use strict";var e=this.steel.object,t=this.steel.Disposable,n=function(t){function n(){babelHelpers.classCallCheck(this,n),babelHelpers.get(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.surfaces_={}}return babelHelpers.inherits(n,t),babelHelpers.createClass(n,[{key:"addSurface",value:function(e,t){this.surfaces_[e]?this.updateSurface(e,t):this.surfaces_[e]=t}},{key:"disposeInternal",value:function(){this.surfaces_=null}},{key:"getSurface",value:function(e){return this.surfaces_[e]?this.surfaces_[e]:null}},{key:"removeAllSurfaces",value:function(){this.surfaces_=[]}},{key:"removeSurface",value:function(e){this.surfaces_[e]=null}},{key:"updateSurface",value:function(t,n){e.mixin(this.surfaces_[t],n)}}]),n}(t);this.steel.SurfaceCollector=n}.call(this),function(){"use strict";var e=this.steel.array,t=this.steel.core,n=this.steel.dom,r=this.steel.features,s=this.steel.html,i=this.steel.object,a=this.steel.string,l=this.steel.Attribute,o=this.steel.ComponentCollector,u=this.steel.EventEmitterProxy,c=this.steel.EventHandler,h=this.steel.EventsCollector,d=this.steel.SurfaceCollector,f=function(l){function d(n){babelHelpers.classCallCheck(this,d),babelHelpers.get(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,n),this.collectedSurfaces_=[],this.components={},this.decorating_=!1,this.delegateEventHandler_=null,this.elementEventProxy_=null,this.eventsAttrHandler_=new c,this.eventsCollector_=new h(this),this.generatedIdCount_={},this.inDocument=!1,this.initialConfig_=n||{},this.surfaceIds_={},this.wasRendered=!1,this.DEFAULT_ELEMENT_PARENT=document.body,t.mergeSuperClassesProperty(this.constructor,"ELEMENT_CLASSES",this.mergeElementClasses_),t.mergeSuperClassesProperty(this.constructor,"ELEMENT_TAG_NAME",e.firstDefinedValue),t.mergeSuperClassesProperty(this.constructor,"SURFACE_TAG_NAME",e.firstDefinedValue),this.addSurfacesFromStaticHint_(),this.delegateEventHandler_=new c,this.created_()}return babelHelpers.inherits(d,l),babelHelpers.createClass(d,[{key:"addListenersFromObj_",value:function(e){for(var t=Object.keys(e||{}),n=0;n<t.length;n++){var r=this.extractListenerInfo_(e[t[n]]);if(r.fn){var s;s=r.selector?this.delegate(t[n],r.selector,r.fn):this.on(t[n],r.fn),this.eventsAttrHandler_.add(s)}}}},{key:"addMissingAttr_",value:function(e,t){this.getAttrConfig(e)||this.addAttr(e,{},t)}},{key:"addSingleListener_",value:function(e,t,r){!this.elementEventProxy_&&n.supportsEvent(this.constructor.ELEMENT_TAG_NAME_MERGED,e)&&(this.elementEventProxy_=new u(this.element,this)),babelHelpers.get(Object.getPrototypeOf(d.prototype),"addSingleListener_",this).call(this,e,t,r)}},{key:"addSurface",value:function(e,t){var n=t||{};n.cacheState=n.cacheState||d.Cache.NOT_INITIALIZED;var r=this.getSurfaceElementId_(e,n);return this.surfaceIds_[r]?d.surfacesCollector.updateSurface(r,n):(this.surfaceIds_[r]=!0,d.surfacesCollector.addSurface(r,n),n.componentName&&e!==this.id&&this.createSubComponent_(n.componentName,r),this.cacheSurfaceRenderAttrs_(r)),this}},{key:"addSurfaces",value:function(e){for(var t in e)this.addSurface(t,e[t]);return this}},{key:"addSurfacesFromStaticHint_",value:function(){t.mergeSuperClassesProperty(this.constructor,"SURFACES",this.mergeObjects_),this.surfacesRenderAttrs_={};var e=this.constructor.SURFACES_MERGED;for(var n in e)this.addSurface(n,i.mixin({},e[n]))}},{key:"attach",value:function(e,t){return this.inDocument||(this.renderElement_(e,t),this.inDocument=!0,this.wasRendered||this.updatePlaceholderSurfaces_(),this.attached()),this}},{key:"attached",value:function(){}},{key:"buildElementSurfaceData_",value:function(){return{componentName:this.constructor.NAME}}},{key:"buildPlaceholder",value:function(e,t){return e&&t&&(t.surfaceElementId=e,this.addSurface(e,t)),"%%%%~s"+(e?"-"+e:"")+"~%%%%"}},{key:"cacheSurfaceContent",value:function(e,t){var n=this.computeSurfaceCacheState_(t),r=this.getSurface(e);r.cacheState=n}},{key:"cacheSurfaceRenderAttrs_",value:function(e){for(var t=this.getSurface(e).renderAttrs||[],n=0;n<t.length;n++)this.surfacesRenderAttrs_[t[n]]||(this.surfacesRenderAttrs_[t[n]]={},this.addMissingAttr_(t[n],this.initialConfig_[t[n]])),this.surfacesRenderAttrs_[t[n]][e]=!0}},{key:"checkHasElementTag_",value:function(e,n){return t.isString(e)?-1!==e.indexOf(' id="'+n+'"'):e.id===n}},{key:"compareCacheStates_",value:function(e,t){return e!==d.Cache.NOT_INITIALIZED&&e!==d.Cache.NOT_CACHEABLE&&e===t}},{key:"computeSurfaceCacheState_",value:function(e){return t.isString(e)?(r.checkAttrOrderChange()&&(e=this.convertHtmlToBrowserFormat_(e)),a.hashCode(e)):d.Cache.NOT_CACHEABLE}},{key:"convertHtmlToBrowserFormat_",value:function(e){var t=document.createElement("div");return n.append(t,e),t.innerHTML}},{key:"createPlaceholderSurface_",value:function(e,n){var r=e;t.isDefAndNotNull(r)||(r=this.generateSurfaceElementId_(n));var s=this.getSurface(r);return s||this.addSurface(r,{surfaceElementId:r}),r}},{key:"createSubComponent_",value:function(e,t){return this.components[t]=d.componentsCollector.createComponent(e,t,this.getSurface(t).componentData),this.components[t]}},{key:"createSurfaceElement_",value:function(e){var t=document.createElement(this.constructor.SURFACE_TAG_NAME_MERGED);return t.id=e,t}},{key:"decorateAsSubComponent",value:function(){this.decorating_=!0,this.renderAsSubComponent(),this.decorating_=!1}},{key:"delegate",value:function(e,t,r){var s=n.delegate(this.element,e,t,r);return this.delegateEventHandler_.add(s),s}},{key:"detach",value:function(){return this.inDocument&&(this.element.parentNode.removeChild(this.element),this.inDocument=!1,this.detached()),this.eventsCollector_.detachAllListeners(),this}},{key:"detached",value:function(){}},{key:"created_",value:function(){this.on("eventsChanged",this.onEventsChanged_),this.addListenersFromObj_(this.events),this.on("attrsChanged",this.handleAttributesChanges_),d.componentsCollector.addComponent(this)}},{key:"decorate",value:function(){return this.decorating_=!0,this.render(),this.decorating_=!1,this}},{key:"disposeSubComponents_",value:function(){for(var e=Object.keys(this.components),t=0;t<e.length;t++){var n=this.components[e[t]];n.isDisposed()||(d.componentsCollector.removeComponent(n),n.dispose())}this.components=null}},{key:"disposeInternal",value:function(){var e=this;this.detach(),this.elementEventProxy_&&(this.elementEventProxy_.dispose(),this.elementEventProxy_=null),this.delegateEventHandler_.removeAllListeners(),this.delegateEventHandler_=null,this.disposeSubComponents_(),this.generatedIdCount_=null,this.surfacesRenderAttrs_=null,Object.keys(this.surfaceIds_).forEach(function(t){return e.removeSurface(t)}),this.surfaceIds_=null,babelHelpers.get(Object.getPrototypeOf(d.prototype),"disposeInternal",this).call(this)}},{key:"extractListenerInfo_",value:function(e){var n={fn:e};return t.isObject(e)&&!t.isFunction(e)&&(n.selector=e.selector,n.fn=e.fn),t.isString(n.fn)&&(n.fn=this.eventsCollector_.getListenerFn(n.fn)),n}},{key:"syncAttrs_",value:function(){for(var e=this.getAttrNames(),t=0;t<e.length;t++)this.fireAttrChange_(e[t])}},{key:"syncAttrsFromChanges_",value:function(e){for(var t in e)this.fireAttrChange_(t,e[t])}},{key:"findElementById_",value:function(e){return document.getElementById(e)||this.element&&this.element.querySelector("#"+e)}},{key:"findElementInContent_",value:function(e,r){var s;return t.isString(r)&&(r=n.buildFragment(r).childNodes[0]),r&&r.id===e&&(s=r),s}},{key:"fireAttrChange_",value:function(e,n){var r=this["sync"+e.charAt(0).toUpperCase()+e.slice(1)];t.isFunction(r)&&(n||(n={newVal:this[e],prevVal:void 0}),r.call(this,n.newVal,n.prevVal))}},{key:"generateSurfaceElementId_",value:function(e){var t=e||this.id;return this.generatedIdCount_[t]=(this.generatedIdCount_[t]||0)+1,t+"-s"+this.generatedIdCount_[t]}},{key:"getComponentHtml",value:function(e){return this.wrapContentIfNecessary(e,this.id,this.constructor.ELEMENT_TAG_NAME_MERGED)}},{key:"getElementContent",value:function(){}},{key:"getElementExtendedContent",value:function(){var e=this.getElementContent();return this.eventsCollector_.attachListeners(e),this.replaceSurfacePlaceholders_(e)}},{key:"getModifiedSurfacesFromChanges_",value:function(e){var t=[{}];for(var n in e)this.surfacesRenderAttrs_[n]&&t.push(this.surfacesRenderAttrs_[n]);return i.mixin.apply(null,t)}},{key:"getNonComponentSurfaceHtml",value:function(e,t){return this.wrapContentIfNecessary(t,e,this.constructor.SURFACE_TAG_NAME_MERGED)}},{key:"getSurface",value:function(e){var t=d.surfacesCollector.getSurface(this.getSurfaceElementId_(e));return t?t:d.surfacesCollector.getSurface(e)}},{key:"getSurfaceContent",value:function(){}},{key:"getSurfaceContent_",value:function(e){var t=this.getSurface(e);if(e===this.id)return this.getElementContent();if(t.componentName){var n=o.components[e];return n.wasRendered?"":n.getElementExtendedContent()}return this.getSurfaceContent(this.getSurfaceId_(e,t),e)}},{key:"getSurfaceElement",value:function(e){var t=this.getSurface(e);if(!t)return null;if(!t.element)if(t.componentName){var n=o.components[e];n&&(t.element=n.element)}else{var r=this.getSurfaceElementId_(e,t);t.element=this.findElementById_(r)||this.createSurfaceElement_(r)}return t.element}},{key:"getSurfaceElementId_",value:function(e,t){var n=t||{};return n.surfaceElementId?n.surfaceElementId:n.componentName||this.hasComponentPrefix_(e)?e:this.prefixSurfaceId_(e)}},{key:"getSurfaceHtml",value:function(e,t){var n=this.getSurface(e);return n.componentName?o.components[e].getComponentHtml(t):this.getNonComponentSurfaceHtml(e,t)}},{key:"getSurfaceId_",value:function(e,t){return t.componentName||!this.hasComponentPrefix_(e)?e:e.substr(this.id.length+1)}},{key:"getSurfaces",value:function(){var e={};return Object.keys(this.surfaceIds_).forEach(function(t){var n=d.surfacesCollector.getSurface(t);e[this.getSurfaceId_(t,n)]=n}.bind(this)),e}},{key:"handleAttributesChanges_",value:function(e){this.inDocument&&this.renderSurfacesContent_(this.getModifiedSurfacesFromChanges_(e.changes)),this.syncAttrsFromChanges_(e.changes)}},{key:"hasComponentPrefix_",value:function(e){return e.substr(0,this.id.length)===this.id&&(e.length===this.id.length||"-"===e[this.id.length])}},{key:"onEventsChanged_",value:function(e){this.eventsAttrHandler_.removeAllListeners(),this.addListenersFromObj_(e.newVal)}},{key:"makeId_",value:function(){return"metal_c_"+t.getUid(this)}},{key:"mergeElementClasses_",value:function(e){var t={};return e.filter(function(e){return!e||t[e]?!1:(t[e]=!0,!0)}).join(" ")}},{key:"mergeObjects_",value:function(e){return i.mixin.apply(null,[{}].concat(e.reverse()))}},{key:"prefixSurfaceId_",value:function(e){return this.id+"-"+e}},{key:"removeSurface",value:function(e){var t=this.getSurfaceElement(e);t&&t.parentNode&&t.parentNode.removeChild(t);var n=this.getSurfaceElementId_(e,this.getSurface(e));return d.surfacesCollector.removeSurface(n),this.surfaceIds_[n]=!1,this}},{key:"render",value:function(e,t){if(this.wasRendered)throw new Error(d.Error.ALREADY_RENDERED);return this.addSurface(this.id,this.buildElementSurfaceData_()),this.renderSurfacesContent_(this.surfaceIds_),this.syncAttrs_(),this.attach(e,t),this.wasRendered=!0,this}},{key:"renderAsSubComponent",value:function(){this.addSurface(this.id,this.buildElementSurfaceData_()),this.syncAttrs_(),this.attach(),this.wasRendered=!0}},{key:"renderComponentSurface_",value:function(e,t){var r=o.components[e];if(r.wasRendered){var s=this.getSurface(e);d.componentsCollector.updateComponent(e,s.componentData)}else if(t){var i=r.element;n.isEmpty(i)&&n.append(i,t),this.decorating_?r.decorateAsSubComponent():r.renderAsSubComponent()}else r.render()}},{key:"renderElement_",value:function(e,t){var r=this.element;if(r.id=this.id,t||!r.parentNode){var s=n.toElement(e)||this.DEFAULT_ELEMENT_PARENT;s.insertBefore(r,n.toElement(t))}}},{key:"renderPlaceholderSurfaceContents_",value:function(e,t){var n=this;e.replace(d.SURFACE_REGEX,function(e,r){return n.renderSurfaceContent(n.createPlaceholderSurface_(r,t)),e})}},{key:"renderSurfaceContent",value:function(e,n,r){var i=this.getSurface(e);if(i.componentName&&e!==this.id)return void this.renderComponentSurface_(e,n);var a=n||this.getSurfaceContent_(e);if(t.isDefAndNotNull(a)){var l=r||a,o=l;this.decorating_&&(this.cacheSurfaceContent(e,s.compress(this.getSurfaceElement(e).outerHTML)),a===l&&(a=this.replaceSurfacePlaceholders_(a,e)),o=a);var u=i.cacheState;this.cacheSurfaceContent(e,o);var c=this.compareCacheStates_(i.cacheState,u);this.decorating_&&this.cacheSurfaceContent(e,l),c?(this.decorating_&&this.eventsCollector_.attachListeners(l,e),this.renderPlaceholderSurfaceContents_(a,e)):(this.eventsCollector_.attachListeners(l,e),this.replaceSurfaceContent_(e,a))}}},{key:"renderSurfacesContent_",value:function(e){this.generatedIdCount_={};var t=this.id;e[t]&&this.renderSurfaceContent(t);for(var n in e)n===t||this.getSurface(n).handled||this.renderSurfaceContent(n);this.wasRendered&&(this.updatePlaceholderSurfaces_(),this.eventsCollector_.detachUnusedListeners())}},{key:"replaceElementContent_",value:function(e){var t=this.element,r=this.findElementInContent_(this.id,e);r&&(this.updateElementAttributes_(t,r),e=r.childNodes),n.removeChildren(t),n.append(t,e)}},{key:"replaceSurfaceContent_",value:function(e,r){if(r=this.replaceSurfacePlaceholders_(r,e),e===this.id)return void this.replaceElementContent_(r);var s=this.getSurfaceElement(e);if(this.checkHasElementTag_(r,e)){var i=this.getSurface(e);i.element=r,t.isString(r)&&(i.element=n.buildFragment(r).childNodes[0]),s.parentNode&&n.replace(s,i.element)}else n.removeChildren(s),n.append(s,r)}},{key:"replaceSurfacePlaceholders_",value:function(e,n){if(!t.isString(e))return e;var r=this;return e.replace(d.SURFACE_REGEX,function(e,t){t=r.createPlaceholderSurface_(t,n),r.getSurface(t).handled=!0;var s=r.getSurfaceContent_(t),i=r.getSurfaceHtml(t,s),a=r.replaceSurfacePlaceholders_(i,t);return r.collectedSurfaces_.push({cacheContent:s,content:a,surfaceElementId:t}),a})}},{key:"setterElementFn_",value:function(e){var t=n.toElement(e);return t||(t=this.valueElementFn_()),t}},{key:"syncElementClasses",value:function(e,t){var r=this.constructor.ELEMENT_CLASSES_MERGED;e&&(r=r+" "+e),t&&n.removeClasses(this.element,t),n.addClasses(this.element,r)}},{key:"syncVisible",value:function(e){this.element.style.display=e?"":"none"}},{key:"updateElementAttributes_",value:function(e,t){for(var n=t.attributes,r=0;r<n.length;r++)"id"!==n[r].name&&"class"!==n[r].name&&e.setAttribute(n[r].name,n[r].value);e.tagName!==t.tagName}},{key:"updatePlaceholderSurface_",value:function(e){var t=e.surfaceElementId,r=this.getSurface(t);r.componentName&&n.replace(this.findElementById_(t),this.getSurfaceElement(t)),this.decorating_||r.componentName?this.renderSurfaceContent(t,e.content,e.cacheContent):(r.element=null,this.cacheSurfaceContent(t,e.cacheContent),this.eventsCollector_.attachListeners(e.cacheContent,t))}},{key:"updatePlaceholderSurfaces_",value:function(){for(var e=this.collectedSurfaces_.length-1;e>=0;e--)this.updatePlaceholderSurface_(this.collectedSurfaces_[e]),this.getSurface(this.collectedSurfaces_[e].surfaceElementId).handled=!1;this.collectedSurfaces_=[]}},{key:"validatorElementFn_",value:function(e){return t.isElement(e)||t.isString(e)}},{key:"validatorElementClassesFn_",value:function(e){return t.isString(e)}},{key:"validatorEventsFn_",value:function(e){return!t.isDefAndNotNull(e)||t.isObject(e)}},{key:"validatorIdFn_",value:function(e){return t.isString(e)}},{key:"valueElementFn_",value:function(){this.id||(this.id=this.makeId_());var e=this.findElementInContent_(this.id,this.getElementContent());return e||(e=this.findElementInContent_(this.id,this.getComponentHtml(""))),n.removeChildren(e),n.exitDocument(e),e}},{key:"valueIdFn_",value:function(){var e=this.element;return e&&e.id?e.id:this.makeId_()}},{key:"wrapContentIfNecessary",value:function(e,t,n){return this.checkHasElementTag_(e,t)||(e="<"+n+' id="'+t+'">'+e+"</"+n+">"),e}}]),d}(l);f.componentsCollector=new o,f.surfacesCollector=new d,f.ATTRS={element:{setter:"setterElementFn_",validator:"validatorElementFn_",valueFn:"valueElementFn_",writeOnce:!0},elementClasses:{validator:"validatorElementClassesFn_"},events:{validator:"validatorEventsFn_",value:null},id:{validator:"validatorIdFn_",valueFn:"valueIdFn_",writeOnce:!0},visible:{validator:t.isBoolean,value:!0}},f.ELEMENT_CLASSES="component",f.ELEMENT_TAG_NAME="div",f.SURFACE_REGEX=/\%\%\%\%~s(?:-([^~:]+))?~\%\%\%\%/g,f.SURFACE_TAG_NAME="div",f.Cache={NOT_CACHEABLE:-1,NOT_INITIALIZED:-2},f.Error={ALREADY_RENDERED:"Component already rendered"},f.INVALID_ATTRS=["components","elementContent"],this.steel.Component=f}.call(this),function(){"use strict";var e=this.steel.ComponentRegistry,t={interceptFn_:null,registeredTemplates_:!1,getOriginalFn:function(e){return e.originalFn?e.originalFn:e},handleTemplateCall_:function(e,n,r,s,i,a){return t.interceptFn_?t.interceptFn_.call(null,e,n,r,s,i,a):r.call(null,s,i,a)},registerAll:function(){t.registeredTemplates_||(Object.keys(e.Templates).forEach(function(e){t.registerTemplates(e)}),t.registeredTemplates_=!0)},registerTemplates:function(n){var r=e.Templates[n];Object.keys(r).forEach(function(e){var s=r[e];s.originalFn||(r[e]=t.handleTemplateCall_.bind(null,n,e,s),r[e].originalFn=s)})},startInterception:function(e){this.registerAll(),t.interceptFn_=e},stopInterception:function(){t.interceptFn_=null}};this.steel.SoyComponentAop=t}.call(this),function(){"use strict";var e=this.steel.core,t=this.steel.object,n=this.steel.Component,r=this.steel.ComponentRegistry,s=this.steel.SoyComponentAop,i={},a=function(n){function a(e){babelHelpers.classCallCheck(this,a),babelHelpers.get(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.contentParams_=null,this.firstSurfaceFound_={},this.surfaceBeingRendered_=null,this.skipInnerCalls_=!1,this.addSurfacesFromTemplates_(e)}return babelHelpers.inherits(a,n),babelHelpers.createClass(a,[{key:"addSurfacesFromTemplates_",value:function(e){for(var t=r.Templates[this.constructor.NAME]||{},n=Object.keys(t),i=0;i<n.length;i++){var a=n[i],l=s.getOriginalFn(t[a]);if(this.isSurfaceTemplate_(a,l)){var o=this.getSurface(a);o||this.addSurface(a,{renderAttrs:l.params,templateComponentName:this.constructor.NAME,templateName:a},e)}else"content"===a&&(this.contentParams_=l.params)}}},{key:"buildComponentConfigData_",value:function(e,t){var n={id:e};for(var r in t)n[r]=t[r];return n}},{key:"buildElementSurfaceData_",value:function(){var e=babelHelpers.get(Object.getPrototypeOf(a.prototype),"buildElementSurfaceData_",this).call(this);return e.renderAttrs=this.contentParams_,this.contentParams_=null,e}},{key:"buildTemplateData_",value:function(){var e=this.getAttrNames().filter(function(e){return"element"!==e}),n=this.getSurface(this.id),r=n&&n.componentData?n.componentData:{};return t.mixin(r,this.getAttrs(e))}},{key:"generateSurfaceElementId_",value:function(e,t){return!t.templateName||e||this.firstSurfaceFound_[t.templateName]||t.templateComponentName!==this.constructor.NAME?babelHelpers.get(Object.getPrototypeOf(a.prototype),"generateSurfaceElementId_",this).call(this,e):(this.firstSurfaceFound_[t.templateName]=!0,this.prefixSurfaceId_(t.templateName))}},{key:"getElementContent",value:function(){return this.surfaceBeingRendered_=null,this.renderTemplateByName_(this.constructor.NAME,"content")}},{key:"getSurfaceContent",
value:function(e,t){var n=this.getSurface(e),r=n.templateData;return n.templateData=null,this.surfaceBeingRendered_=t,this.renderTemplateByName_(n.templateComponentName,n.templateName,r)}},{key:"handleComponentCall_",value:function(e,t){var n={componentName:e},r=(t||{}).id||this.generateSurfaceElementId_(this.surfaceBeingRendered_,n);return n.componentData=this.buildComponentConfigData_(r,t),this.buildPlaceholder(r,n)}},{key:"handleInterceptedCall_",value:function(e,t,n,r,s,i){return this.skipInnerCalls_?"":"content"===t?this.handleComponentCall_.call(this,e,r):this.handleSurfaceCall_.call(this,e,t,n,r,s,i)}},{key:"handleSurfaceCall_",value:function(t,n,r,s,i,a){var l,o={templateComponentName:t,templateData:s,templateName:n};if(e.isDefAndNotNull(s.surfaceId))l=this.getSurfaceElementId_(s.surfaceId.toString());else{if(r["private"])return r.call(null,s,i,a);l=this.generateSurfaceElementId_(this.surfaceBeingRendered_,o)}return this.buildPlaceholder(l,o)}},{key:"isSurfaceTemplate_",value:function(e,t){return"content"!==e&&"__deltemplate"!==e.substr(0,13)&&!t["private"]}},{key:"renderTemplate_",value:function(e,t){s.startInterception(this.handleInterceptedCall_.bind(this)),e=s.getOriginalFn(e);var n=e(t||this.buildTemplateData_(),null,i).content;return s.stopInterception(),n}},{key:"renderTemplateByName_",value:function(t,n,s){var i,a=r.Templates[t];return a&&(i=a[n]),e.isFunction(i)?this.renderTemplate_(i,s):void 0}},{key:"valueElementFn_",value:function(){this.skipInnerCalls_=!0;var e=babelHelpers.get(Object.getPrototypeOf(a.prototype),"valueElementFn_",this).call(this);return this.skipInnerCalls_=!1,e}}],[{key:"createComponentFromTemplate",value:function(t,n,i){var l="TemplateComponent"+e.getUid(),o=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),t}(a);return r.register(l,o),r.Templates[l]={content:function(e,n,r){return s.getOriginalFn(t)(i||{},n,r)}},s.registerTemplates(l),new o({element:n})}},{key:"decorateFromTemplate",value:function(e,t,n){return a.createComponentFromTemplate(e,t,n).decorate()}},{key:"renderFromTemplate",value:function(e,t,n){return a.createComponentFromTemplate(e,t,n).render()}},{key:"sanitizeHtml",value:function(e){return soydata.VERY_UNSAFE.ordainSanitizedHtml(e)}},{key:"setInjectedData",value:function(e){i=e||{}}}]),a}(n),l=soydata.SanitizedHtml.from;soydata.SanitizedHtml.from=function(e){return e&&"HTML"===e.contentKind&&(e=a.sanitizeHtml(e.content)),l(e)},this.steel.SoyComponent=a}.call(this),function(){"use strict";var e=this.steel.dom,t=this.steel.features,n={mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"};Object.keys(n).forEach(function(t){e.registerCustomEvent(t,{delegate:!0,handler:function(e,n){var r=n.relatedTarget,s=n.delegateTarget;return!r||r!==s&&!s.contains(r)?(n.customType=t,e(n)):void 0},originalEvent:n[t]})});var r={animation:"animationend",transition:"transitionend"};Object.keys(r).forEach(function(n){var s=r[n];e.registerCustomEvent(s,{event:!0,delegate:!0,handler:function(e,t){return t.customType=s,e(t)},originalEvent:t.checkAnimationEventName()[n]})})}.call(this),function(){"use strict";var e=this.steel.core,t=this.steel.dom,n=this.steel.features,r=function(){function r(){babelHelpers.classCallCheck(this,r)}return babelHelpers.createClass(r,null,[{key:"emulateEnd",value:function(e,t){return this.getComputedDurationMs(e,"animation")>this.getComputedDurationMs(e,"transition")?this.emulateEnd_(e,"animation",t):this.emulateEnd_(e,"transition",t)}},{key:"emulateAnimationEnd",value:function(e,t){return this.emulateEnd_(e,"animation",t)}},{key:"emulateTransitionEnd",value:function(e,t){this.emulateEnd_(e,"transition",t)}},{key:"emulateEnd_",value:function(r,s,i){var a=i;e.isDef(i)||(a=this.getComputedDurationMs(r,s));var l=setTimeout(function(){t.triggerEvent(r,n.checkAnimationEventName()[s])},a),o=function(){clearTimeout(l),u.removeListener()},u=t.once(r,s+"end",o);return{abort:o}}},{key:"getComputedDurationMs",value:function(e,t){return 1e3*(parseFloat(window.getComputedStyle(e,null).getPropertyValue(t+"-duration"))||0)}}]),r}();this.steel.Anim=r}.call(this),function(){"use strict";var e=this.steel.ComponentRegistry,t=e.Templates;"undefined"==typeof t.Alert&&(t.Alert={}),t.Alert.content=function(e,n,r){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(e.id)+'" class="alert alert-dismissible component'+soy.$$escapeHtmlAttribute(e.elementClasses?" "+e.elementClasses:"")+'" role="alert">'+t.Alert.dismiss(e,null,r)+t.Alert.body(e,null,r)+"</div>")},goog.DEBUG&&(t.Alert.content.soyTemplateName="Templates.Alert.content"),t.Alert.body=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(e.id)+'-body">'+(e.body?soy.$$escapeHtml(e.body):"")+"</div>")},goog.DEBUG&&(t.Alert.body.soyTemplateName="Templates.Alert.body"),t.Alert.dismiss=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(e.id)+'-dismiss">'+(e.dismissible?'<button type="button" class="close" aria-label="Close" data-onclick="toggle"><span aria-hidden="true"></span></button>':"")+"</div>")},goog.DEBUG&&(t.Alert.dismiss.soyTemplateName="Templates.Alert.dismiss"),t.Alert.content.params=["id"],t.Alert.body.params=["body","id"],t.Alert.dismiss.params=["dismissible","id"],this.steel.Alert={},this.steel.Alert.soy=t.Alert}.call(this),function(){"use strict";var e=this.steel.core,t=this.steel.dom,n=this.steel.SoyComponent,r=this.steel.ComponentRegistry,s=this.steel.Anim,i=this.steel.EventHandler,a=function(n){function r(e){babelHelpers.classCallCheck(this,r),babelHelpers.get(Object.getPrototypeOf(r.prototype),"constructor",this).call(this,e),this.eventHandler_=new i}return babelHelpers.inherits(r,n),babelHelpers.createClass(r,[{key:"detached",value:function(){babelHelpers.get(Object.getPrototypeOf(r.prototype),"detached",this).call(this),this.eventHandler_.removeAllListeners(),clearTimeout(this.delay_)}},{key:"close",value:function(){t.once(this.element,"animationend",this.dispose.bind(this)),t.once(this.element,"transitionend",this.dispose.bind(this)),this.eventHandler_.removeAllListeners(),this.syncVisible(!1)}},{key:"handleDocClick_",value:function(e){this.element.contains(e.target)||this.hide()}},{key:"hide",value:function(){this.visible=!1}},{key:"toggle",value:function(){this.visible=!this.visible}},{key:"syncDismissible",value:function(e){e?this.eventHandler_.add(t.on(document,"click",this.handleDocClick_.bind(this))):this.eventHandler_.removeAllListeners(),t[e?"addClasses":"removeClasses"](this.element,"alert-dismissible")}},{key:"syncVisible",value:function(n){t.removeClasses(this.element,this.animClasses[n?"hide":"show"]),t.addClasses(this.element,this.animClasses[n?"show":"hide"]),s.emulateEnd(this.element),n&&e.isNumber(this.hideDelay)&&this.syncHideDelay(this.hideDelay)}},{key:"syncHideDelay",value:function(t){e.isNumber(t)&&this.visible&&(clearTimeout(this.delay_),this.delay_=setTimeout(this.hide.bind(this),t))}}]),r}(n);a.ELEMENT_CLASSES="alert",a.ATTRS={animClasses:{validator:e.isObject,value:{show:"fade in",hide:"fade"}},body:{value:""},dismissible:{validator:e.isBoolean,value:!0},elementClasses:{value:"alert-success"},hideDelay:{},visible:{value:!1}},r.register("Alert",a),this.steel.Alert=a}.call(this);