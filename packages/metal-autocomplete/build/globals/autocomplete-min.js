(function(){this.metal=this.metal||{},this.metalNamed=this.metalNamed||{};var babelHelpers={};babelHelpers["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},babelHelpers.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},babelHelpers.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},babelHelpers.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return e.abstractMethod=function(){throw Error("Unimplemented abstract method")},e.collectSuperClassesProperty=function(e,t){for(var n=[e[t]];e.__proto__&&!e.__proto__.isPrototypeOf(Function);)e=e.__proto__,n.push(e[t]);return n},e.getFunctionName=function(e){if(!e.name){var t=e.toString();e.name=t.substring(9,t.indexOf("("))}return e.name},e.getUid=function(t){return t?t[e.UID_PROPERTY]||(t[e.UID_PROPERTY]=e.uniqueIdCounter_++):e.uniqueIdCounter_++},e.identityFunction=function(e){return e},e.isBoolean=function(e){return"boolean"==typeof e},e.isDef=function(e){return void 0!==e},e.isDefAndNotNull=function(t){return e.isDef(t)&&!e.isNull(t)},e.isDocument=function(e){return e&&"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))&&9===e.nodeType},e.isElement=function(e){return e&&"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))&&1===e.nodeType},e.isFunction=function(e){return"function"==typeof e},e.isNull=function(e){return null===e},e.isNumber=function(e){return"number"==typeof e},e.isWindow=function(e){return null!==e&&e===e.window},e.isObject=function(e){var t="undefined"==typeof e?"undefined":babelHelpers["typeof"](e);return"object"===t&&null!==e||"function"===t},e.isPromise=function(e){return e&&"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))&&"function"==typeof e.then},e.isString=function(e){return"string"==typeof e},e.mergeSuperClassesProperty=function(t,n,o){var r=n+"_MERGED";if(t.hasOwnProperty(r))return!1;var i=e.collectSuperClassesProperty(t,n);return o&&(i=o(i)),t[r]=i,!0},e.nullFunction=function(){},e}();e.UID_PROPERTY="core_"+(1e9*Math.random()>>>0),e.uniqueIdCounter_=1,this.metal.core=e}.call(this),function(){var e=this.metal.core,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return t.equal=function(e,t){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return e.length===t.length},t.firstDefinedValue=function(e){for(var t=0;t<e.length;t++)if(void 0!==e[t])return e[t]},t.flatten=function(e,n){for(var o=n||[],r=0;r<e.length;r++)Array.isArray(e[r])?t.flatten(e[r],o):o.push(e[r]);return o},t.remove=function(e,n){var o,r=e.indexOf(n);return(o=r>=0)&&t.removeAt(e,r),o},t.removeAt=function(e,t){return 1===Array.prototype.splice.call(e,t,1).length},t.slice=function(t,n,o){for(var r=[],i=e.isDef(o)?o:t.length,a=n;i>a;a++)r.push(t[a]);return r},t}();this.metal.array=t}.call(this),function(){var e={};e.throwException=function(t){e.nextTick(function(){throw t})},e.run=function(t,n){e.run.workQueueScheduled_||(e.nextTick(e.run.processWorkQueue),e.run.workQueueScheduled_=!0),e.run.workQueue_.push(new e.run.WorkItem_(t,n))},e.run.workQueueScheduled_=!1,e.run.workQueue_=[],e.run.processWorkQueue=function(){for(;e.run.workQueue_.length;){var t=e.run.workQueue_;e.run.workQueue_=[];for(var n=0;n<t.length;n++){var o=t[n];try{o.fn.call(o.scope)}catch(r){e.throwException(r)}}}e.run.workQueueScheduled_=!1},e.run.WorkItem_=function(e,t){this.fn=e,this.scope=t},e.nextTick=function(t,n){var o=t;return n&&(o=t.bind(n)),o=e.nextTick.wrapCallback_(o),"function"==typeof setImmediate?void setImmediate(o):(e.nextTick.setImmediate_||(e.nextTick.setImmediate_=e.nextTick.getSetImmediateEmulator_()),void e.nextTick.setImmediate_(o))},e.nextTick.setImmediate_=null,e.nextTick.getSetImmediateEmulator_=function(){var e;if("function"==typeof MessageChannel&&(e=MessageChannel),"undefined"==typeof e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&(e=function(){var e=document.createElement("iframe");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow,n=t.document;n.open(),n.write(""),n.close();var o="callImmediate"+Math.random(),r=t.location.protocol+"//"+t.location.host,i=function(e){e.origin!==r&&e.data!==o||this.port1.onmessage()}.bind(this);t.addEventListener("message",i,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(o,r)}}}),"undefined"!=typeof e){var t=new e,n={},o=n;return t.port1.onmessage=function(){n=n.next;var e=n.cb;n.cb=null,e()},function(e){o.next={cb:e},o=o.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(e){var t=document.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){setTimeout(e,0)}},e.nextTick.wrapCallback_=function(e){return e},this.metal.async=e}.call(this),function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e),this.disposed_=!1}return e.prototype.dispose=function(){this.disposed_||(this.disposeInternal(),this.disposed_=!0)},e.prototype.disposeInternal=function(){},e.prototype.isDisposed=function(){return this.disposed_},e}();this.metal.Disposable=e}.call(this),function(){var e=this.metal.core,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return t.mixin=function(e){for(var t,n,o=1;o<arguments.length;o++){n=arguments[o];for(t in n)e[t]=n[t]}return e},t.getObjectByName=function(t,n){for(var o,r=t.split("."),i=n||window;o=r.shift();){if(!e.isDefAndNotNull(i[o]))return null;i=i[o]}return i},t.map=function(e,t){for(var n={},o=Object.keys(e),r=0;r<o.length;r++)n[o[r]]=t(o[r],e[o[r]]);return n},t}();this.metal.object=t}.call(this),function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return e.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},e.getRandomString=function(){var e=2147483648;return Math.floor(Math.random()*e).toString(36)+Math.abs(Math.floor(Math.random()*e)^Date.now()).toString(36)},e.hashCode=function(e){for(var t=0,n=0,o=e.length;o>n;n++)t=31*t+e.charCodeAt(n),t%=4294967296;return t},e.replaceInterval=function(e,t,n,o){return e.substring(0,t)+o+e.substring(n)},e}();this.metal.string=e}.call(this),function(){var e=this.metal.core,t=this.metal.array,n=this.metal.async,o=this.metal.Disposable,r=this.metal.object,i=this.metal.string;this.metal.metal=e,this.metalNamed.metal={},this.metalNamed.metal.core=e,this.metalNamed.metal.array=t,this.metalNamed.metal.async=n,this.metalNamed.metal.Disposable=o,this.metalNamed.metal.object=r,this.metalNamed.metal.string=i}.call(this),function(){function e(e,t){var n;return function(){var o=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(null,o)},t)}}this.metal.debounce=e}.call(this),function(){var e=this.metalNamed.metal.Disposable,t=function(e){function t(n,o,r){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,e.call(this));return i.emitter_=n,i.event_=o,i.listener_=r,i}return babelHelpers.inherits(t,e),t.prototype.disposeInternal=function(){this.removeListener(),this.emitter_=null,this.listener_=null},t.prototype.removeListener=function(){this.emitter_.isDisposed()||this.emitter_.removeListener(this.event_,this.listener_)},t}(e);t.prototype.registerMetalComponent&&t.prototype.registerMetalComponent(t,"EventHandle"),this.metal.EventHandle=t}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.array,n=this.metalNamed.metal.Disposable,o=this.metal.EventHandle,r=function(n){function r(){babelHelpers.classCallCheck(this,r);var e=babelHelpers.possibleConstructorReturn(this,n.call(this));return e.events_=[],e.maxListeners_=10,e.shouldUseFacade_=!1,e}return babelHelpers.inherits(r,n),r.prototype.addListener=function(e,t,n){this.validateListener_(t),e=this.normalizeEvents_(e);for(var r=0;r<e.length;r++)this.addSingleListener_(e[r],t,n);return new o(this,e,t)},r.prototype.addSingleListener_=function(e,t,n,o){this.emit("newListener",e,t),this.events_[e]||(this.events_[e]=[]),this.events_[e].push({"default":n,fn:t,origin:o});var r=this.events_[e];r.length>this.maxListeners_&&!r.warned&&(r.warned=!0)},r.prototype.disposeInternal=function(){this.events_=[]},r.prototype.emit=function(e){var n,o=t.slice(arguments,1),r=(this.events_[e]||[]).concat();this.getShouldUseFacade()&&(n={preventDefault:function(){n.preventedDefault=!0},target:this,type:e},o.push(n));for(var i=[],a=0;a<r.length;a++)r[a]["default"]?i.push(r[a]):r[a].fn.apply(this,o);if(!n||!n.preventedDefault)for(var s=0;s<i.length;s++)i[s].fn.apply(this,o);return"*"!==e&&this.emit.apply(this,["*",e].concat(o)),r.length>0},r.prototype.getShouldUseFacade=function(){return this.shouldUseFacade_},r.prototype.listeners=function(e){return(this.events_[e]||[]).map(function(e){return e.fn})},r.prototype.many=function(e,t,n){e=this.normalizeEvents_(e);for(var r=0;r<e.length;r++)this.many_(e[r],t,n);return new o(this,e,n)},r.prototype.many_=function(e,t,n){function o(){0===--t&&r.removeListener(e,o),n.apply(r,arguments)}var r=this;0>=t||r.addSingleListener_(e,o,!1,n)},r.prototype.matchesListener_=function(e,t){return e.fn===t||e.origin&&e.origin===t},r.prototype.normalizeEvents_=function(t){return e.isString(t)?[t]:t},r.prototype.off=function(e,t){this.validateListener_(t),e=this.normalizeEvents_(e);for(var n=0;n<e.length;n++){var o=this.events_[e[n]]||[];this.removeMatchingListenerObjs_(o,t)}return this},r.prototype.on=function(){return this.addListener.apply(this,arguments)},r.prototype.once=function(e,t){return this.many(e,1,t)},r.prototype.removeAllListeners=function(e){if(e)for(var t=this.normalizeEvents_(e),n=0;n<t.length;n++)this.events_[t[n]]=null;else this.events_={};return this},r.prototype.removeMatchingListenerObjs_=function(e,t){for(var n=e.length-1;n>=0;n--)this.matchesListener_(e[n],t)&&e.splice(n,1)},r.prototype.removeListener=function(){return this.off.apply(this,arguments)},r.prototype.setMaxListeners=function(e){return this.maxListeners_=e,this},r.prototype.setShouldUseFacade=function(e){return this.shouldUseFacade_=e,this},r.prototype.validateListener_=function(t){if(!e.isFunction(t))throw new TypeError("Listener must be a function")},r}(n);r.prototype.registerMetalComponent&&r.prototype.registerMetalComponent(r,"EventEmitter"),this.metal.EventEmitter=r}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metalNamed.metal.Disposable,n=(this.metalNamed.metal.object,function(t){function n(e,o,r,i){babelHelpers.classCallCheck(this,n);var a=babelHelpers.possibleConstructorReturn(this,t.call(this));return a.blacklist_=r||{},a.originEmitter_=e,a.proxiedEvents_={},a.targetEmitter_=o,a.whitelist_=i,a.startProxy_(),a}return babelHelpers.inherits(n,t),n.prototype.addListener_=function(e,t){return this.originEmitter_.on(e,t)},n.prototype.addListenerForEvent_=function(e){return this.addListener_(e,this.emitOnTarget_.bind(this,e))},n.prototype.disposeInternal=function(){this.removeListeners_(),this.proxiedEvents_=null,this.originEmitter_=null,this.targetEmitter_=null},n.prototype.emitOnTarget_=function(t){var n=[t].concat(e.slice(arguments,1));this.targetEmitter_.emit.apply(this.targetEmitter_,n)},n.prototype.proxyEvent=function(e){this.shouldProxyEvent_(e)&&(this.proxiedEvents_[e]=this.addListenerForEvent_(e))},n.prototype.removeListeners_=function(){for(var e=Object.keys(this.proxiedEvents_),t=0;t<e.length;t++)this.proxiedEvents_[e[t]].removeListener();this.proxiedEvents_={}},n.prototype.setOriginEmitter=function(e){var t=this.proxiedEvents_;this.removeListeners_(),this.originEmitter_=e;for(var n=Object.keys(t),o=0;o<n.length;o++)this.proxiedEvents_[n[o]]=this.addListenerForEvent_(n[o])},n.prototype.shouldProxyEvent_=function(e){return this.whitelist_&&!this.whitelist_[e]?!1:this.blacklist_[e]?!1:!this.proxiedEvents_[e]},n.prototype.startProxy_=function(){this.targetEmitter_.on("newListener",this.proxyEvent.bind(this))},n}(t));n.prototype.registerMetalComponent&&n.prototype.registerMetalComponent(n,"EventEmitterProxy"),this.metal.EventEmitterProxy=n}.call(this),function(){var e=this.metalNamed.metal.Disposable,t=function(e){function t(){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,e.call(this));return n.eventHandles_=[],n}return babelHelpers.inherits(t,e),t.prototype.add=function(){for(var e=0;e<arguments.length;e++)this.eventHandles_.push(arguments[e])},t.prototype.disposeInternal=function(){this.eventHandles_=null},t.prototype.removeAllListeners=function(){for(var e=0;e<this.eventHandles_.length;e++)this.eventHandles_[e].removeListener();this.eventHandles_=[]},t}(e);t.prototype.registerMetalComponent&&t.prototype.registerMetalComponent(t,"EventHandler"),this.metal.EventHandler=t}.call(this),function(){var e=this.metal.EventEmitter,t=this.metal.EventEmitterProxy,n=this.metal.EventHandle,o=this.metal.EventHandler;this.metal.events=e,this.metalNamed.events={},this.metalNamed.events.EventEmitter=e,this.metalNamed.events.EventEmitterProxy=t,this.metalNamed.events.EventHandle=n,this.metalNamed.events.EventHandler=o}.call(this),function(){var e=this.metalNamed.events.EventHandle,t=function(e){function t(n,o,r,i){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,e.call(this,n,o,r));return a.capture_=i,a}return babelHelpers.inherits(t,e),t.prototype.removeListener=function(){this.emitter_.removeEventListener(this.event_,this.listener_,this.capture_)},t}(e);t.prototype.registerMetalComponent&&t.prototype.registerMetalComponent(t,"DomEventHandle"),this.metal.DomEventHandle=t}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.object,n=this.metal.DomEventHandle,o=function(){function o(){babelHelpers.classCallCheck(this,o)}return o.addClasses=function(t,n){e.isObject(t)&&e.isString(n)&&("classList"in t?o.addClassesWithNative_(t,n):o.addClassesWithoutNative_(t,n))},o.addClassesWithNative_=function(e,t){t.split(" ").forEach(function(t){t&&e.classList.add(t)})},o.addClassesWithoutNative_=function(e,t){var n=" "+e.className+" ",o="";t=t.split(" ");for(var r=0;r<t.length;r++){var i=t[r];-1===n.indexOf(" "+i+" ")&&(o+=" "+i)}o&&(e.className=e.className+o)},o.closest=function(e,t){for(;e&&!o.match(e,t);)e=e.parentNode;return e},o.append=function(t,n){if(e.isString(n)&&(n=o.buildFragment(n)),n instanceof NodeList)for(var r=Array.prototype.slice.call(n),i=0;i<r.length;i++)t.appendChild(r[i]);else t.appendChild(n);return n},o.buildFragment=function(e){var t=document.createElement("div");t.innerHTML="<br>"+e,t.removeChild(t.firstChild);for(var n=document.createDocumentFragment();t.firstChild;)n.appendChild(t.firstChild);return n},o.contains=function(t,n){return e.isDocument(t)?t.documentElement.contains(n):t.contains(n)},o.delegate=function(e,t,n,r){var i=o.customEvents[t];return i&&i.delegate&&(t=i.originalEvent,r=i.handler.bind(i,r)),o.on(e,t,o.handleDelegateEvent_.bind(null,n,r))},o.enterDocument=function(e){o.append(document.body,e)},o.exitDocument=function(e){e.parentNode&&e.parentNode.removeChild(e)},o.handleDelegateEvent_=function(t,n,r){o.normalizeDelegateEvent_(r);for(var i=r.target,a=!0;i&&!r.stopped&&(e.isString(t)&&o.match(i,t)&&(r.delegateTarget=i,a&=n(r)),i!==r.currentTarget);)i=i.parentNode;return r.delegateTarget=null,a},o.hasClass=function(e,t){return"classList"in e?o.hasClassWithNative_(e,t):o.hasClassWithoutNative_(e,t)},o.hasClassWithNative_=function(e,t){return e.classList.contains(t)},o.hasClassWithoutNative_=function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>=0},o.isEmpty=function(e){return 0===e.childNodes.length},o.match=function(e,t){if(!e||1!==e.nodeType)return!1;var n=Element.prototype,r=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;return r?r.call(e,t):o.matchFallback_(e,t)},o.matchFallback_=function(e,t){for(var n=document.querySelectorAll(t,e.parentNode),o=0;o<n.length;++o)if(n[o]===e)return!0;return!1},o.next=function(e,t){do if(e=e.nextSibling,e&&o.match(e,t))return e;while(e);return null},o.normalizeDelegateEvent_=function(e){e.stopPropagation=o.stopPropagation_,e.stopImmediatePropagation=o.stopImmediatePropagation_},o.on=function(t,r,i,a){if(e.isString(t))return o.delegate(document,r,t,i);var s=o.customEvents[r];return s&&s.event&&(r=s.originalEvent,i=s.handler.bind(s,i)),t.addEventListener(r,i,a),new n(t,r,i,a)},o.once=function(e,t,n){var o=this.on(e,t,function(){return o.removeListener(),n.apply(this,arguments)});return o},o.parent=function(e,t){return o.closest(e.parentNode,t)},o.registerCustomEvent=function(e,t){o.customEvents[e]=t},o.removeChildren=function(e){for(var t;t=e.firstChild;)e.removeChild(t)},o.removeClasses=function(t,n){e.isObject(t)&&e.isString(n)&&("classList"in t?o.removeClassesWithNative_(t,n):o.removeClassesWithoutNative_(t,n))},o.removeClassesWithNative_=function(e,t){t.split(" ").forEach(function(t){t&&e.classList.remove(t)})},o.removeClassesWithoutNative_=function(e,t){var n=" "+e.className+" ";t=t.split(" ");for(var o=0;o<t.length;o++)n=n.replace(" "+t[o]+" "," ");e.className=n.trim()},o.replace=function(e,t){e&&t&&e!==t&&e.parentNode&&(e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e))},o.stopImmediatePropagation_=function(){this.stopped=!0,Event.prototype.stopImmediatePropagation.call(this)},o.stopPropagation_=function(){this.stopped=!0,Event.prototype.stopPropagation.call(this)},o.supportsEvent=function(t,n){return o.customEvents[n]?!0:(e.isString(t)&&(r[t]||(r[t]=document.createElement(t)),t=r[t]),"on"+n in t)},o.toElement=function(t){return e.isElement(t)||e.isDocument(t)?t:e.isString(t)?"#"===t[0]&&-1===t.indexOf(" ")?document.getElementById(t.substr(1)):document.querySelector(t):null},o.toggleClasses=function(t,n){e.isObject(t)&&e.isString(n)&&("classList"in t?o.toggleClassesWithNative_(t,n):o.toggleClassesWithoutNative_(t,n))},o.toggleClassesWithNative_=function(e,t){t.split(" ").forEach(function(t){e.classList.toggle(t)})},o.toggleClassesWithoutNative_=function(e,t){var n=" "+e.className+" ";t=t.split(" ");for(var o=0;o<t.length;o++){var r=" "+t[o]+" ",i=n.indexOf(r);n=-1===i?n+t[o]+" ":n.substring(0,i)+" "+n.substring(i+r.length)}e.className=n.trim()},o.triggerEvent=function(e,n,o){var r=document.createEvent("HTMLEvents");r.initEvent(n,!0,!0),t.mixin(r,o),e.dispatchEvent(r)},o}(),r={};o.customEvents={},this.metal.dom=o}.call(this),function(){var e=this.metal.dom,t=this.metalNamed.events.EventEmitterProxy,n=function(t){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,t.apply(this,arguments))}return babelHelpers.inherits(n,t),n.prototype.addListener_=function(n,o){if(this.originEmitter_.addEventListener){if(n.startsWith("delegate:")){var r=n.indexOf(":",9),i=n.substring(9,r),a=n.substring(r+1);return e.delegate(this.originEmitter_,i,a,o)}return e.on(this.originEmitter_,n,o)}return t.prototype.addListener_.call(this,n,o)},n.prototype.isSupportedDomEvent_=function(t){return t.startsWith("delegate:")&&-1!==t.indexOf(":",9)||e.supportsEvent(this.originEmitter_,t)},n.prototype.shouldProxyEvent_=function(e){return t.prototype.shouldProxyEvent_.call(this,e)&&(!this.originEmitter_.addEventListener||this.isSupportedDomEvent_(e))},n}(t);n.prototype.registerMetalComponent&&n.prototype.registerMetalComponent(n,"DomEventEmitterProxy"),this.metal.DomEventEmitterProxy=n}.call(this),function(){var e=this.metal.dom,t=this.metalNamed.metal.string,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return n.checkAnimationEventName=function(){return void 0===n.animationEventName_&&(n.animationEventName_={animation:n.checkAnimationEventName_("animation"),transition:n.checkAnimationEventName_("transition")}),n.animationEventName_},n.checkAnimationEventName_=function(e){for(var o=["Webkit","MS","O",""],r=t.replaceInterval(e,0,1,e.substring(0,1).toUpperCase()),i=[r+"End",r+"End",r+"End",e+"end"],a=0;a<o.length;a++)if(void 0!==n.animationElement_.style[o[a]+r])return o[a].toLowerCase()+i[a];return e+"end"},n.checkAttrOrderChange=function(){if(void 0===n.attrOrderChange_){var t='<div data-component="" data-ref=""></div>',o=document.createElement("div");e.append(o,t),n.attrOrderChange_=t!==o.innerHTML}return n.attrOrderChange_},n}();n.animationElement_=document.createElement("div"),n.animationEventName_=void 0,n.attrOrderChange_=void 0,this.metal.features=n}.call(this),function(){var e=this.metalNamed.metal.async,t=this.metal.dom,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return n.run=function(e,n){var o=document.createElement("script");return o.text=e,n?n(o):document.head.appendChild(o),t.exitDocument(o),o},n.runFile=function(e,n,o){var r=document.createElement("script");r.src=e;var i=function(){t.exitDocument(r),n&&n()};return t.on(r,"load",i),t.on(r,"error",i),o?o(r):document.head.appendChild(r),r},n.runScript=function(o,r,i){var a=function(){r&&r()};return o.type&&"text/javascript"!==o.type?void e.nextTick(a):(t.exitDocument(o),o.src?n.runFile(o.src,r,i):(e.nextTick(a),n.run(o.text,i)))},n.runScriptsInElement=function(t,o,r){var i=t.querySelectorAll("script");i.length?n.runScriptsInOrder(i,0,o,r):o&&e.nextTick(o)},n.runScriptsInOrder=function(t,o,r,i){n.runScript(t.item(o),function(){o<t.length-1?n.runScriptsInOrder(t,o+1,r,i):r&&e.nextTick(r)},i)},n}();this.metal.globalEval=n}.call(this),function(){var e=this.metalNamed.metal.async,t=this.metal.dom,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return n.run=function(e,t){var n=document.createElement("style");return n.innerHTML=e,t?t(n):document.head.appendChild(n),n},n.runFile=function(e,t,o){var r=document.createElement("link");return r.rel="stylesheet",r.href=e,n.runStyle(r,t,o),r},n.runStyle=function(n,o,r){var i=function(){o&&o()};return n.rel&&"stylesheet"!==n.rel?void e.nextTick(i):("STYLE"===n.tagName?e.nextTick(i):(t.on(n,"load",i),t.on(n,"error",i)),r?r(n):document.head.appendChild(n),n)},n.runStylesInElement=function(t,o,r){var i=t.querySelectorAll("style,link");if(0===i.length&&o)return void e.nextTick(o);for(var a=0,s=function(){o&&++a===i.length&&e.nextTick(o)},l=0;l<i.length;l++)n.runStyle(i[l],s,r)},n}();this.metal.globalEvalStyles=n}.call(this),function(){var e=this.metal.dom,t=this.metal.features,n={mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"};Object.keys(n).forEach(function(t){e.registerCustomEvent(t,{delegate:!0,handler:function(e,n){var o=n.relatedTarget,r=n.delegateTarget;return!o||o!==r&&!r.contains(o)?(n.customType=t,e(n)):void 0},originalEvent:n[t]})});var o={animation:"animationend",transition:"transitionend"};Object.keys(o).forEach(function(n){var r=o[n];e.registerCustomEvent(r,{event:!0,delegate:!0,handler:function(e,t){return t.customType=r,e(t)},originalEvent:t.checkAnimationEventName()[n]})})}.call(this),function(){var e=this.metal.dom,t=this.metal.DomEventEmitterProxy,n=this.metal.DomEventHandle,o=this.metal.features,r=this.metal.globalEval,i=this.metal.globalEvalStyles;this.metal.dom=e,this.metalNamed.dom={},this.metalNamed.dom.dom=e,this.metalNamed.dom.DomEventEmitterProxy=t,this.metalNamed.dom.DomEventHandle=n,this.metalNamed.dom.features=o,this.metalNamed.dom.globalEval=r,this.metalNamed.dom.globalEvalStyles=i}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.async,n=function(){};n.prototype.then=function(){},n.IMPLEMENTED_BY_PROP="$goog_Thenable",n.addImplementation=function(e){e.prototype.then=e.prototype.then,e.prototype.$goog_Thenable=!0},n.isImplementedBy=function(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}};var o=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=t.slice();return n.push.apply(n,arguments),e.apply(this,n)}},r=function i(e,t){this.state_=i.State_.PENDING,this.result_=void 0,this.parent_=null,this.callbackEntries_=null,this.executing_=!1,i.UNHANDLED_REJECTION_DELAY>0?this.unhandledRejectionId_=0:0===i.UNHANDLED_REJECTION_DELAY&&(this.hadUnhandledRejection_=!1);try{var n=this;e.call(t,function(e){n.resolve_(i.State_.FULFILLED,e)},function(e){n.resolve_(i.State_.REJECTED,e)})}catch(o){this.resolve_(i.State_.REJECTED,o)}};r.UNHANDLED_REJECTION_DELAY=0,r.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3},r.CallbackEntry_=null,r.resolve=function(e){return new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){e.length||t(void 0);for(var o,r=0;o=e[r];r++)o.then(t,n)})},r.all=function(e){return new r(function(t,n){var r=e.length,i=[];if(!r)return void t(i);for(var a,s=function(e,n){r--,i[e]=n,0===r&&t(i)},l=function(e){n(e)},c=0;a=e[c];c++)a.then(o(s,c),l)})},r.firstFulfilled=function(e){return new r(function(t,n){var r=e.length,i=[];if(!r)return void t(void 0);for(var a,s=function(e){t(e)},l=function(e,t){r--,i[e]=t,0===r&&n(i)},c=0;a=e[c];c++)a.then(s,o(l,c))})},r.prototype.then=function(t,n,o){return this.addChildPromise_(e.isFunction(t)?t:null,e.isFunction(n)?n:null,o)},n.addImplementation(r),r.prototype.thenAlways=function(e,t){var n=function(){try{e.call(t)}catch(n){r.handleRejection_.call(null,n)}};return this.addCallbackEntry_({child:null,onRejected:n,onFulfilled:n}),this},r.prototype.thenCatch=function(e,t){return this.addChildPromise_(null,e,t)},r.prototype["catch"]=r.prototype.thenCatch,r.prototype.cancel=function(e){this.state_===r.State_.PENDING&&t.run(function(){var t=new r.CancellationError(e);t.IS_CANCELLATION_ERROR=!0,this.cancelInternal_(t)},this)},r.prototype.cancelInternal_=function(e){this.state_===r.State_.PENDING&&(this.parent_?this.parent_.cancelChild_(this,e):this.resolve_(r.State_.REJECTED,e))},r.prototype.cancelChild_=function(e,t){if(this.callbackEntries_){for(var n,o=0,i=-1,a=0;n=this.callbackEntries_[a];a++){var s=n.child;if(s&&(o++,s===e&&(i=a),i>=0&&o>1))break}if(i>=0)if(this.state_===r.State_.PENDING&&1===o)this.cancelInternal_(t);else{var l=this.callbackEntries_.splice(i,1)[0];this.executeCallback_(l,r.State_.REJECTED,t)}}},r.prototype.addCallbackEntry_=function(e){this.callbackEntries_&&this.callbackEntries_.length||this.state_!==r.State_.FULFILLED&&this.state_!==r.State_.REJECTED||this.scheduleCallbacks_(),this.callbackEntries_||(this.callbackEntries_=[]),this.callbackEntries_.push(e)},r.prototype.addChildPromise_=function(t,n,o){var i={child:null,onFulfilled:null,onRejected:null};return i.child=new r(function(r,a){i.onFulfilled=t?function(e){try{var n=t.call(o,e);r(n)}catch(i){a(i)}}:r,i.onRejected=n?function(t){try{var i=n.call(o,t);!e.isDef(i)&&t.IS_CANCELLATION_ERROR?a(t):r(i)}catch(s){a(s)}}:a}),i.child.parent_=this,this.addCallbackEntry_(i),i.child},r.prototype.unblockAndFulfill_=function(e){if(this.state_!==r.State_.BLOCKED)throw new Error("CancellablePromise is not blocked.");this.state_=r.State_.PENDING,this.resolve_(r.State_.FULFILLED,e)},r.prototype.unblockAndReject_=function(e){if(this.state_!==r.State_.BLOCKED)throw new Error("CancellablePromise is not blocked.");this.state_=r.State_.PENDING,this.resolve_(r.State_.REJECTED,e)},r.prototype.resolve_=function(t,o){if(this.state_===r.State_.PENDING){if(this===o)t=r.State_.REJECTED,o=new TypeError("CancellablePromise cannot resolve to itself");else{if(n.isImplementedBy(o))return o=o,this.state_=r.State_.BLOCKED,void o.then(this.unblockAndFulfill_,this.unblockAndReject_,this);if(e.isObject(o))try{var i=o.then;if(e.isFunction(i))return void this.tryThen_(o,i)}catch(a){t=r.State_.REJECTED,o=a}}this.result_=o,this.state_=t,this.scheduleCallbacks_(),t!==r.State_.REJECTED||o.IS_CANCELLATION_ERROR||r.addUnhandledRejection_(this,o)}},r.prototype.tryThen_=function(e,t){this.state_=r.State_.BLOCKED;var n=this,o=!1,i=function(e){o||(o=!0,n.unblockAndFulfill_(e))},a=function(e){o||(o=!0,n.unblockAndReject_(e))};try{t.call(e,i,a)}catch(s){a(s)}},r.prototype.scheduleCallbacks_=function(){this.executing_||(this.executing_=!0,t.run(this.executeCallbacks_,this))},r.prototype.executeCallbacks_=function(){for(;this.callbackEntries_&&this.callbackEntries_.length;){var e=this.callbackEntries_;this.callbackEntries_=[];for(var t=0;t<e.length;t++)this.executeCallback_(e[t],this.state_,this.result_)}this.executing_=!1},r.prototype.executeCallback_=function(e,t,n){t===r.State_.FULFILLED?e.onFulfilled(n):(this.removeUnhandledRejection_(),e.onRejected(n))},r.prototype.removeUnhandledRejection_=function(){var e;if(r.UNHANDLED_REJECTION_DELAY>0)for(e=this;e&&e.unhandledRejectionId_;e=e.parent_)clearTimeout(e.unhandledRejectionId_),e.unhandledRejectionId_=0;else if(0===r.UNHANDLED_REJECTION_DELAY)for(e=this;e&&e.hadUnhandledRejection_;e=e.parent_)e.hadUnhandledRejection_=!1},r.addUnhandledRejection_=function(e,n){r.UNHANDLED_REJECTION_DELAY>0?e.unhandledRejectionId_=setTimeout(function(){r.handleRejection_.call(null,n)},r.UNHANDLED_REJECTION_DELAY):0===r.UNHANDLED_REJECTION_DELAY&&(e.hadUnhandledRejection_=!0,t.run(function(){e.hadUnhandledRejection_&&r.handleRejection_.call(null,n)}))},r.handleRejection_=t.throwException,r.setUnhandledRejectionHandler=function(e){r.handleRejection_=e},r.CancellationError=function(e){function t(n){babelHelpers.classCallCheck(this,t);var o=babelHelpers.possibleConstructorReturn(this,e.call(this,n));return n&&(o.message=n),o}return babelHelpers.inherits(t,e),t}(Error),r.CancellationError.prototype.name="cancel",this.metalNamed.Promise={},this.metalNamed.Promise.CancellablePromise=r,this.metal.Promise=r}.call(this),function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return e.intersectRect=function(e,t,n,o,r,i,a,s){return!(r>n||e>a||i>o||t>s)},e}();this.metal.Geometry=e}.call(this),function(){var e=this.metal.metal,t=this.metal.Geometry,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return n.getClientHeight=function(e){return this.getClientSize_(e,"Height")},n.getClientSize_=function(t,n){var o=t;return e.isWindow(t)&&(o=t.document.documentElement),e.isDocument(t)&&(o=t.documentElement),o["client"+n]},n.getClientWidth=function(e){return this.getClientSize_(e,"Width")},n.getDocumentRegion_=function(e){var t=this.getHeight(e),n=this.getWidth(e);return this.makeRegion(t,t,0,n,0,n)},n.getHeight=function(e){return this.getSize_(e,"Height")},n.getOffsetLeft=function(e,t){return e.offsetLeft+(t?0:n.getTranslation(e).left)},n.getOffsetTop=function(e,t){return e.offsetTop+(t?0:n.getTranslation(e).top)},n.getRegion=function(t,n){return e.isDocument(t)||e.isWindow(t)?this.getDocumentRegion_(t):this.makeRegionFromBoundingRect_(t.getBoundingClientRect(),n)},n.getScrollLeft=function(t){return e.isWindow(t)?t.pageXOffset:e.isDocument(t)?t.defaultView.pageXOffset:t.scrollLeft},n.getScrollTop=function(t){return e.isWindow(t)?t.pageYOffset:e.isDocument(t)?t.defaultView.pageYOffset:t.scrollTop},n.getSize_=function(t,n){if(e.isWindow(t))return this.getClientSize_(t,n);if(e.isDocument(t)){var o=t.documentElement;return Math.max(t.body["scroll"+n],o["scroll"+n],t.body["offset"+n],o["offset"+n],o["client"+n])}return Math.max(t["client"+n],t["scroll"+n],t["offset"+n])},n.getTransformMatrixValues=function(e){var t=getComputedStyle(e),n=t.msTransform||t.transform||t.webkitTransform||t.mozTransform;if("none"!==n){for(var o=[],r=/([\d-\.\s]+)/g,i=r.exec(n);i;)o.push(i[1]),i=r.exec(n);return o}},n.getTranslation=function(e){
var t=n.getTransformMatrixValues(e),o={left:0,top:0};return t&&(o.left=parseFloat(6===t.length?t[4]:t[13]),o.top=parseFloat(6===t.length?t[5]:t[14])),o},n.getWidth=function(e){return this.getSize_(e,"Width")},n.intersectRegion=function(e,n){return t.intersectRect(e.top,e.left,e.bottom,e.right,n.top,n.left,n.bottom,n.right)},n.insideRegion=function(e,t){return t.top>=e.top&&t.bottom<=e.bottom&&t.right<=e.right&&t.left>=e.left},n.insideViewport=function(e){return this.insideRegion(this.getRegion(window),e)},n.intersection=function(e,t){if(!this.intersectRegion(e,t))return null;var n=Math.min(e.bottom,t.bottom),o=Math.min(e.right,t.right),r=Math.max(e.left,t.left),i=Math.max(e.top,t.top);return this.makeRegion(n,n-i,r,o,i,o-r)},n.makeRegion=function(e,t,n,o,r,i){return{bottom:e,height:t,left:n,right:o,top:r,width:i}},n.makeRegionFromBoundingRect_=function(e,t){var o=t?n.getScrollLeft(document):0,r=t?n.getScrollTop(document):0;return this.makeRegion(e.bottom+r,e.height,e.left+o,e.right+o,e.top+r,e.width)},n.pointInsideRegion=function(e,t,o){return n.insideRegion(o,n.makeRegion(t,0,e,e,t,0))},n}();this.metal.Position=n}.call(this),function(){var e=this.metal.Position,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return t.align=function(t,n,o){var r=this.suggestAlignBestRegion(t,n,o),i=r.region,a=window.getComputedStyle(t,null);if("fixed"!==a.getPropertyValue("position")){i.top+=window.pageYOffset,i.left+=window.pageXOffset;for(var s=t;s=s.offsetParent;)i.top-=e.getOffsetTop(s),i.left-=e.getOffsetLeft(s)}return t.style.top=i.top+"px",t.style.left=i.left+"px",r.position},t.getAlignBestRegion=function(e,n,o){return t.suggestAlignBestRegion(e,n,o).region},t.getAlignRegion=function(n,o,r){var i=e.getRegion(o),a=e.getRegion(n),s=0,l=0;switch(r){case t.TopCenter:s=i.top-a.height,l=i.left+i.width/2-a.width/2;break;case t.RightCenter:s=i.top+i.height/2-a.height/2,l=i.left+i.width;break;case t.BottomCenter:s=i.bottom,l=i.left+i.width/2-a.width/2;break;case t.LeftCenter:s=i.top+i.height/2-a.height/2,l=i.left-a.width;break;case t.TopRight:s=i.top-a.height,l=i.right-a.width;break;case t.BottomRight:s=i.bottom,l=i.right-a.width;break;case t.BottomLeft:s=i.bottom,l=i.left;break;case t.TopLeft:s=i.top-a.height,l=i.left}return{bottom:s+a.height,height:a.height,left:l,right:l+a.width,top:s,width:a.width}},t.isValidPosition=function(e){return e>=0&&8>=e},t.suggestAlignBestRegion=function(t,n,o){for(var r=0,i=o,a=this.getAlignRegion(t,n,i),s=i,l=a,c=e.getRegion(window),u=0;8>u;){if(e.intersectRegion(c,l)){var g=e.intersection(c,l),d=g.width*g.height;if(d>r&&(r=d,a=l,i=s),e.insideViewport(l))break}s=(o+ ++u)%8,l=this.getAlignRegion(t,n,s)}return{position:i,region:a}},t}();t.TopCenter=0,t.TopRight=1,t.RightCenter=2,t.BottomRight=3,t.BottomCenter=4,t.BottomLeft=5,t.LeftCenter=6,t.TopLeft=7,t.Top=t.TopCenter,t.Right=t.RightCenter,t.Bottom=t.BottomCenter,t.Left=t.LeftCenter,this.metal.Align=t}.call(this),function(){var e=this.metal.Align,t=this.metal.Geometry,n=this.metal.Position;this.metal.position=n,this.metalNamed.position={},this.metalNamed.position.Align=e,this.metalNamed.position.Geometry=t,this.metalNamed.position.Position=n}.call(this),function(){var e=this.metalNamed.metal.core,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return t.getConstructor=function(e){var n=t.components_[e];return n},t.register=function(n,o){var r=o;r||(r=n.hasOwnProperty("NAME")?n.NAME:e.getFunctionName(n)),n.NAME=r,t.components_[r]=n},t}();t.components_={},this.metal.ComponentRegistry=t}.call(this),function(){var e=this.metal.ComponentRegistry,t=this.metalNamed.metal.core,n=this.metalNamed.metal.Disposable,o=function(n){function o(){return babelHelpers.classCallCheck(this,o),babelHelpers.possibleConstructorReturn(this,n.apply(this,arguments))}return babelHelpers.inherits(o,n),o.prototype.addComponent=function(e){o.components[e.id]=e},o.prototype.createComponent=function(n,r){var i=o.components[(r||{}).id];if(!i){var a=n;t.isString(a)&&(a=e.getConstructor(n)),i=new a(r)}return i},o.prototype.removeComponent=function(e){delete o.components[e.id]},o.prototype.updateComponent=function(e,t){var n=o.components[e];return n&&t&&n.setState(t),n},o}(n);o.prototype.registerMetalComponent&&o.prototype.registerMetalComponent(o,"ComponentCollector"),o.components={},this.metal.ComponentCollector=o}.call(this),function(){var e=this.metalNamed.events.EventEmitter,t=this.metalNamed.events.EventHandler,n=function(e){function n(o){babelHelpers.classCallCheck(this,n);var r=babelHelpers.possibleConstructorReturn(this,e.call(this));return r.component_=o,r.componentRendererEvents_=new t,r.componentRendererEvents_.add(r.component_.on("stateChanged",r.handleComponentRendererStateChanged_.bind(r)),r.component_.once("render",r.render.bind(r))),r}return babelHelpers.inherits(n,e),n.prototype.disposeInternal=function(){this.componentRendererEvents_.removeAllListeners(),this.componentRendererEvents_=null},n.prototype.handleComponentRendererStateChanged_=function(e){this.component_.wasRendered&&this.update(e)},n.prototype.render=function(){this.component_.element||(this.component_.element=document.createElement("div"))},n.prototype.update=function(){},n}(e);n.prototype.registerMetalComponent&&n.prototype.registerMetalComponent(n,"ComponentRenderer"),this.metal.ComponentRenderer=n}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metalNamed.metal.async,n=this.metalNamed.metal.core,o=this.metalNamed.metal.object,r=this.metalNamed.events.EventEmitter,i=function(r){function i(e){babelHelpers.classCallCheck(this,i);var t=babelHelpers.possibleConstructorReturn(this,r.call(this));return t.scheduledBatchData_=null,t.stateInfo_={},t.setShouldUseFacade(!0),t.mergeInvalidKeys_(),t.addToStateFromStaticHint_(e),t}return babelHelpers.inherits(i,r),i.prototype.addKeyToState=function(e,t,n){this.buildKeyInfo_(e,t,n),Object.defineProperty(this,e,this.buildKeyPropertyDef_(e))},i.prototype.addToState=function(e,t,o){if(n.isString(e))return this.addKeyToState(e,t,o);for(var r=t||{},i=Object.keys(e),a={},s=0;s<i.length;s++){var l=i[s];this.buildKeyInfo_(l,e[l],r[l]),a[l]=this.buildKeyPropertyDef_(l)}o!==!1&&Object.defineProperties(o||this,a)},i.prototype.addToStateFromStaticHint_=function(e){var t=this.constructor,n=!1;i.mergeStateStatic(t)&&(n=t.prototype),this.addToState(t.STATE_MERGED,e,n)},i.prototype.assertValidStateKeyName_=function(e){if(this.constructor.INVALID_KEYS_MERGED[e])throw new Error("It's not allowed to create a state key with the name \""+e+'".')},i.prototype.buildKeyInfo_=function(e,t,n){this.assertValidStateKeyName_(e),this.stateInfo_[e]={config:t||{},initialValue:n,state:i.KeyStates.UNINITIALIZED}},i.prototype.buildKeyPropertyDef_=function(e){return{configurable:!0,enumerable:!0,get:function(){return this.getStateKeyValue_(e)},set:function(t){this.setStateKeyValue_(e,t)}}},i.prototype.callFunction_=function(e,t){return n.isString(e)?this[e].apply(this,t):n.isFunction(e)?e.apply(this,t):void 0},i.prototype.callSetter_=function(e,t,n){var o=this.stateInfo_[e],r=o.config;return r.setter&&(t=this.callFunction_(r.setter,[t,n])),t},i.prototype.callValidator_=function(e,t){var n=this.stateInfo_[e],o=n.config;return o.validator?this.callFunction_(o.validator,[t]):!0},i.prototype.canSetState=function(e){var t=this.stateInfo_[e];return!t.config.writeOnce||!t.written},i.prototype.disposeInternal=function(){r.prototype.disposeInternal.call(this),this.stateInfo_=null,this.scheduledBatchData_=null},i.prototype.emitBatchEvent_=function(){if(!this.isDisposed()){var e=this.scheduledBatchData_;this.scheduledBatchData_=null,this.emit("stateChanged",e)}},i.prototype.get=function(e){return this[e]},i.prototype.getState=function(e){for(var t={},n=e||this.getStateKeys(),o=0;o<n.length;o++)t[n[o]]=this[n[o]];return t},i.prototype.getStateKeyConfig=function(e){return(this.stateInfo_[e]||{}).config},i.prototype.getStateKeys=function(){return Object.keys(this.stateInfo_)},i.prototype.getStateKeyValue_=function(e){return this.initStateKey_(e),this.stateInfo_[e].value},i.prototype.hasBeenSet=function(e){var t=this.stateInfo_[e];return t.state===i.KeyStates.INITIALIZED||t.initialValue},i.prototype.informChange_=function(e,t){if(this.shouldInformChange_(e,t)){var n={key:e,newVal:this[e],prevVal:t};this.emit(e+"Changed",n),this.emit("stateKeyChanged",n),this.scheduleBatchEvent_(n)}},i.prototype.initStateKey_=function(e){var t=this.stateInfo_[e];t.state===i.KeyStates.UNINITIALIZED&&(t.state=i.KeyStates.INITIALIZING,this.setInitialValue_(e),t.written||(t.state=i.KeyStates.INITIALIZING_DEFAULT,this.setDefaultValue_(e)),t.state=i.KeyStates.INITIALIZED)},i.mergeState_=function(e){return o.mixin.apply(null,[{}].concat(e.reverse()))},i.mergeStateStatic=function(e){return n.mergeSuperClassesProperty(e,"STATE",i.mergeState_)},i.prototype.mergeInvalidKeys_=function(){n.mergeSuperClassesProperty(this.constructor,"INVALID_KEYS",function(t){return e.flatten(t).reduce(function(e,t){return t&&(e[t]=!0),e},{})})},i.prototype.removeStateKey=function(e){this.stateInfo_[e]=null,delete this[e]},i.prototype.scheduleBatchEvent_=function(e){this.scheduledBatchData_||(t.nextTick(this.emitBatchEvent_,this),this.scheduledBatchData_={changes:{}});var n=e.key,o=this.scheduledBatchData_.changes;o[n]?o[n].newVal=e.newVal:o[n]=e},i.prototype.set=function(e,t){this[e]=t},i.prototype.setDefaultValue_=function(e){var t=this.stateInfo_[e].config;void 0!==t.value?this[e]=t.value:this[e]=this.callFunction_(t.valueFn)},i.prototype.setInitialValue_=function(e){var t=this.stateInfo_[e];void 0!==t.initialValue&&(this[e]=t.initialValue,t.initialValue=void 0)},i.prototype.setState=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)this[t[n]]=e[t[n]]},i.prototype.setStateKeyValue_=function(e,t){if(this.canSetState(e)&&this.validateKeyValue_(e,t)){var n=this.stateInfo_[e];void 0===n.initialValue&&n.state===i.KeyStates.UNINITIALIZED&&(n.state=i.KeyStates.INITIALIZED);var o=this[e];n.value=this.callSetter_(e,t,o),n.written=!0,this.informChange_(e,o)}},i.prototype.shouldInformChange_=function(e,t){var o=this.stateInfo_[e];return o.state===i.KeyStates.INITIALIZED&&(n.isObject(t)||t!==this[e])},i.prototype.validateKeyValue_=function(e,t){var n=this.stateInfo_[e];return n.state===i.KeyStates.INITIALIZING_DEFAULT||this.callValidator_(e,t)},i}(r);i.prototype.registerMetalComponent&&i.prototype.registerMetalComponent(i,"State"),i.INVALID_KEYS=["state","stateKey"],i.KeyStates={UNINITIALIZED:0,INITIALIZING:1,INITIALIZING_DEFAULT:2,INITIALIZED:3},this.metal.State=i}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metalNamed.metal.core,n=this.metalNamed.metal.object,o=this.metalNamed.dom.dom,r=this.metalNamed.dom.DomEventEmitterProxy,i=this.metal.ComponentCollector,a=this.metal.ComponentRegistry,s=this.metal.ComponentRenderer,l=this.metalNamed.events.EventHandler,c=this.metal.State,u=function(s){function c(n){babelHelpers.classCallCheck(this,c);var o=babelHelpers.possibleConstructorReturn(this,s.call(this,n));return o.attachedListeners_={},o.components={},o.decorating_=!1,o.elementEventProxy_=null,o.eventsStateKeyHandler_=new l,o.inDocument=!1,o.initialConfig_=n||{},o.wasRendered=!1,o.DEFAULT_ELEMENT_PARENT=document.body,t.mergeSuperClassesProperty(o.constructor,"ELEMENT_CLASSES",o.mergeElementClasses_),t.mergeSuperClassesProperty(o.constructor,"RENDERER",e.firstDefinedValue),o.renderer_=new o.constructor.RENDERER_MERGED(o),o.created_(),o}return babelHelpers.inherits(c,s),c.prototype.addElementClasses_=function(){var e=this.constructor.ELEMENT_CLASSES_MERGED;this.elementClasses&&(e=e+" "+this.elementClasses),o.addClasses(this.element,e)},c.prototype.addListenersFromObj_=function(e){for(var t=Object.keys(e||{}),n=0;n<t.length;n++){var o=this.extractListenerInfo_(e[t[n]]);if(o.fn){var r;r=o.selector?this.delegate(t[n],o.selector,o.fn):this.on(t[n],o.fn),this.eventsStateKeyHandler_.add(r)}}},c.prototype.attach=function(e,t){if(!this.element)throw new Error(c.Error.ELEMENT_NOT_CREATED);return this.inDocument||(this.renderElement_(e,t),this.inDocument=!0,this.emit("attached"),this.attached()),this},c.prototype.attached=function(){},c.prototype.created_=function(){this.on("stateChanged",this.handleStateChanged_),c.componentsCollector.addComponent(this),this.newListenerHandle_=this.on("newListener",this.handleNewListener_),this.on("eventsChanged",this.onEventsChanged_),this.addListenersFromObj_(this.events)},c.prototype.addSubComponent=function(e,t){var n=(t||{}).id,o=c.componentsCollector.createComponent(e,t);return this.components[n||o.id]=o,o},c.prototype.decorate=function(){return this.decorating_=!0,this.render(),this.decorating_=!1,this},c.prototype.delegate=function(e,t,n){return this.on("delegate:"+e+":"+t,n)},c.prototype.detach=function(){return this.inDocument&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.inDocument=!1,this.detached()),this.emit("detached"),this},c.prototype.detached=function(){},c.prototype.disposeInternal=function(){this.detach(),this.elementEventProxy_&&(this.elementEventProxy_.dispose(),this.elementEventProxy_=null),this.disposeSubComponents(Object.keys(this.components)),this.components=null,this.renderer_.dispose(),this.renderer_=null,s.prototype.disposeInternal.call(this)},c.prototype.disposeSubComponents=function(e){for(var t=0;t<e.length;t++){var n=this.components[e[t]];n.isDisposed()||(c.componentsCollector.removeComponent(n),n.dispose(),delete this.components[e[t]])}},c.prototype.extractListenerInfo_=function(e){var n={fn:e};return t.isObject(e)&&!t.isFunction(e)&&(n.selector=e.selector,n.fn=e.fn),t.isString(n.fn)&&(n.fn=this.getListenerFn(n.fn)),n},c.prototype.getInitialConfig=function(){return this.initialConfig_},c.prototype.getListenerFn=function(e){var n,o=e.split(":");return 2===o.length&&(e=o[1],n=i.components[o[0]]),n=n||this,t.isFunction(n[e])?n[e].bind(n):void 0},c.prototype.findElementById=function(e){return document.getElementById(e)||this.element&&this.element.querySelector("#"+e)},c.prototype.fireStateKeyChange_=function(e,n){var o=this["sync"+e.charAt(0).toUpperCase()+e.slice(1)];t.isFunction(o)&&(n||(n={newVal:this[e],prevVal:void 0}),o.call(this,n.newVal,n.prevVal))},c.prototype.getComponentsWithPrefix=function(e){var t=this,n=Object.keys(this.components).filter(function(t){return 0===t.indexOf(e)}),o={};return n.forEach(function(e){return o[e]=t.components[e]}),o},c.prototype.getName=function(){return this.constructor.NAME||t.getFunctionName(this.constructor)},c.prototype.getRenderer=function(){return this.renderer_},c.prototype.handleStateChanged_=function(e){this.syncStateFromChanges_(e.changes),this.emit("stateSynced",e)},c.prototype.handleNewListener_=function(e){this.attachedListeners_[e]=!0},c.prototype.makeId_=function(){return"metal_c_"+t.getUid(this)},c.prototype.mergeElementClasses_=function(e){var t={};return e.filter(function(e){return!e||t[e]?!1:(t[e]=!0,!0)}).join(" ")},c.prototype.onElementChanged_=function(e){e.prevVal!==e.newVal&&(this.elementEventProxy_.setOriginEmitter(e.newVal),e.newVal.id=this.id,this.addElementClasses_(),this.syncVisible(this.visible))},c.prototype.onEventsChanged_=function(e){this.eventsStateKeyHandler_.removeAllListeners(),this.addListenersFromObj_(e.newVal)},c.prototype.registerMetalComponent=function(e,t){a.register(e,t)},c.prototype.render=function(e,t,n){if(this.wasRendered)throw new Error(c.Error.ALREADY_RENDERED);return n||this.emit("render",{decorating:this.decorating_}),this.setUpProxy_(),this.syncState_(),e!==!1&&this.attach(e,t),this.wasRendered=!0,this},c.prototype.renderAsSubComponent=function(){this.render(null,null,!0)},c.prototype.renderElement_=function(e,t){var n=this.element;if(n.id=this.id,t||!n.parentNode){var r=o.toElement(e)||this.DEFAULT_ELEMENT_PARENT;r.insertBefore(n,o.toElement(t))}},c.prototype.setterElementFn_=function(e,t){return o.toElement(e)||t},c.prototype.setUpProxy_=function(){var e=new r(this.element,this);this.elementEventProxy_=e,n.map(this.attachedListeners_,e.proxyEvent.bind(e)),this.attachedListeners_=null,this.newListenerHandle_.removeListener(),this.newListenerHandle_=null,this.on("elementChanged",this.onElementChanged_)},c.prototype.syncState_=function(){for(var e=this.getStateKeys(),t=0;t<e.length;t++)this.fireStateKeyChange_(e[t])},c.prototype.syncStateFromChanges_=function(e){for(var t in e)this.fireStateKeyChange_(t,e[t])},c.prototype.syncElementClasses=function(e,t){this.element&&t&&o.removeClasses(this.element,t),this.addElementClasses_()},c.prototype.syncVisible=function(e){this.element&&(this.element.style.display=e?"":"none")},c.prototype.validatorElementClassesFn_=function(e){return t.isString(e)},c.prototype.validatorElementFn_=function(e){return t.isElement(e)||t.isString(e)},c.prototype.validatorEventsFn_=function(e){return!t.isDefAndNotNull(e)||t.isObject(e)},c.prototype.validatorIdFn_=function(e){return t.isString(e)},c.prototype.valueIdFn_=function(){var e=this.hasBeenSet("element")&&this.element;return e&&this.element.id?this.element.id:this.makeId_()},c}(c);u.prototype.registerMetalComponent&&u.prototype.registerMetalComponent(u,"Component"),u.componentsCollector=new i,u.STATE={element:{setter:"setterElementFn_",validator:"validatorElementFn_"},elementClasses:{validator:"validatorElementClassesFn_"},events:{validator:"validatorEventsFn_",value:null},id:{validator:"validatorIdFn_",valueFn:"valueIdFn_",writeOnce:!0},visible:{validator:t.isBoolean,value:!0}},u.ELEMENT_CLASSES="",u.RENDERER=s,u.Error={ALREADY_RENDERED:"Component already rendered.",ELEMENT_NOT_CREATED:"Can't attach component element. It hasn't been created yet."},u.INVALID_KEYS=["components"],this.metal.Component=u}.call(this),function(){var e=this.metalNamed.metal.Disposable,t=this.metalNamed.events.EventHandler,n=function(e){function n(t){babelHelpers.classCallCheck(this,n);var o=babelHelpers.possibleConstructorReturn(this,e.call(this));if(!t)throw new Error("The component instance is mandatory");return o.component_=t,o.eventHandles_={},o.groupHasListener_={},o}return babelHelpers.inherits(n,e),n.prototype.attachListener=function(e,n){var o=arguments.length<=2||void 0===arguments[2]?"element":arguments[2],r="[data-on"+e+'="'+n+'"]';if(this.groupHasListener_[o][r]=!0,!this.eventHandles_[r]){this.eventHandles_[r]=new t;for(var i=n.split(","),a=0;a<i.length;a++){var s=this.component_.getListenerFn(i[a]);s&&this.eventHandles_[r].add(this.component_.delegate(e,r,this.onEvent_.bind(this,s)))}}},n.prototype.attachListenersFromHtml=function(e){var t=arguments.length<=1||void 0===arguments[1]?"element":arguments[1];if(this.startCollecting(t),-1!==e.indexOf("data-on"))for(var n=/data-on([a-z]+)=['"]([^'"]+)['"]/g,o=n.exec(e);o;)this.attachListener(o[1],o[2],t),o=n.exec(e)},n.prototype.detachAllListeners=function(){for(var e in this.eventHandles_)this.eventHandles_[e]&&this.eventHandles_[e].removeAllListeners();this.eventHandles_={},this.listenerCounts_={}},n.prototype.detachUnusedListeners=function(){for(var e in this.eventHandles_)if(this.eventHandles_[e]){var t=!0;for(var n in this.groupHasListener_)if(this.groupHasListener_[n][e]){t=!1;break}t&&(this.eventHandles_[e].removeAllListeners(),this.eventHandles_[e]=null)}},n.prototype.disposeInternal=function(){this.detachAllListeners(),this.component_=null},n.prototype.hasAttachedForGroup=function(e){return!!this.groupHasListener_.hasOwnProperty(e)},n.prototype.onEvent_=function(e,t){var n=t.handledByComponent;return!n||n===this.component_||t.delegateTarget.contains(n.element)?(t.handledByComponent=this.component_,e(t)):void 0},n.prototype.startCollecting=function(){var e=arguments.length<=0||void 0===arguments[0]?"element":arguments[0];this.groupHasListener_[e]={}},n}(e);n.prototype.registerMetalComponent&&n.prototype.registerMetalComponent(n,"EventsCollector"),this.metal.EventsCollector=n}.call(this),function(){var e=this.metalNamed.metal.object,t=this.metalNamed.metal.Disposable,n=function(t){function n(){babelHelpers.classCallCheck(this,n);var e=babelHelpers.possibleConstructorReturn(this,t.call(this));return e.surfaces_={},e}return babelHelpers.inherits(n,t),n.prototype.addSurface=function(e,t){this.surfaces_[e]?this.updateSurface(e,t):(this.surfaces_[e]=t||{},this.surfaces_[e].surfaceElementId=e)},n.prototype.disposeInternal=function(){this.surfaces_=null},n.prototype.getSurface=function(e){return this.surfaces_[e]?this.surfaces_[e]:null},n.prototype.removeAllSurfaces=function(){this.surfaces_=[]},n.prototype.removeSurface=function(e){this.surfaces_[e]=null},n.prototype.updateSurface=function(t,n){e.mixin(this.surfaces_[t],n)},n}(t);n.prototype.registerMetalComponent&&n.prototype.registerMetalComponent(n,"SurfaceCollector"),this.metal.SurfaceCollector=n}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.string,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return n.compress=function(e){var t={};return e=n.preserveBlocks_(e,t),e=n.simplifyDoctype_(e),e=n.removeComments_(e),e=n.removeIntertagSpaces_(e),e=n.collapseBreakingSpaces_(e),e=n.removeSpacesInsideTags_(e),e=n.removeSurroundingSpaces_(e),e=n.returnBlocks_(e,t),e.trim()},n.collapseBreakingSpaces_=function(e){return t.collapseBreakingSpaces(e)},n.lookupPossibleTagBoundary_=function(e,t){var n=e.indexOf(t);return n>-1&&(n+=e.substring(n).indexOf(">")+1),n},n.preserveBlocks_=function(e,t){return e=n.preserveOuterHtml_(e,"<!--[if","<![endif]-->",t),e=n.preserveInnerHtml_(e,"<code","</code",t),e=n.preserveInnerHtml_(e,"<pre","</pre",t),e=n.preserveInnerHtml_(e,"<script","</script",t),e=n.preserveInnerHtml_(e,"<style","</style",t),e=n.preserveInnerHtml_(e,"<textarea","</textarea",t)},n.preserveInnerHtml_=function(e,t,o,r){for(var i=n.lookupPossibleTagBoundary_(e,t);i>-1;){var a=e.indexOf(o);e=n.preserveInterval_(e,i,a,r),e=e.replace(t,"%%%~1~%%%"),e=e.replace(o,"%%%~2~%%%"),i=n.lookupPossibleTagBoundary_(e,t)}return e=e.replace(/%%%~1~%%%/g,t),e=e.replace(/%%%~2~%%%/g,o)},n.preserveInterval_=function(n,o,r,i){var a="%%%~BLOCK~"+e.getUid()+"~%%%";return i[a]=n.substring(o,r),t.replaceInterval(n,o,r,a)},n.preserveOuterHtml_=function(e,t,o,r){for(var i=e.indexOf(t);i>-1;){var a=e.indexOf(o)+o.length;e=n.preserveInterval_(e,i,a,r),i=e.indexOf(t)}return e},n.removeComments_=function(e){var t={};return e=n.preserveOuterHtml_(e,"<![CDATA[","]]>",t),e=n.preserveOuterHtml_(e,"<!--","-->",t),e=n.replacePreservedBlocks_(e,t,"")},n.removeIntertagSpaces_=function(e){return e=e.replace(n.Patterns.INTERTAG_CUSTOM_CUSTOM,"~%%%%%%~"),e=e.replace(n.Patterns.INTERTAG_CUSTOM_TAG,"~%%%<"),e=e.replace(n.Patterns.INTERTAG_TAG,"><"),e=e.replace(n.Patterns.INTERTAG_TAG_CUSTOM,">%%%~")},n.removeSpacesInsideTags_=function(e){return e=e.replace(n.Patterns.TAG_END_SPACES,"$1$2"),e=e.replace(n.Patterns.TAG_QUOTE_SPACES,"=$1$2$3")},n.removeSurroundingSpaces_=function(e){return e.replace(n.Patterns.SURROUNDING_SPACES,"$1")},n.replacePreservedBlocks_=function(e,t,n){for(var o in t)e=e.replace(o,n);return e},n.simplifyDoctype_=function(e){var t={};return e=n.preserveOuterHtml_(e,"<!DOCTYPE",">",t),e=n.replacePreservedBlocks_(e,t,"<!DOCTYPE html>")},n.returnBlocks_=function(e,t){for(var n in t)e=e.replace(n,t[n]);return e},n}();n.Patterns={INTERTAG_CUSTOM_CUSTOM:/~%%%\s+%%%~/g,INTERTAG_TAG_CUSTOM:/>\s+%%%~/g,INTERTAG_CUSTOM_TAG:/~%%%\s+</g,INTERTAG_TAG:/>\s+</g,SURROUNDING_SPACES:/\s*(<[^>]+>)\s*/g,TAG_END_SPACES:/(<(?:[^>]+?))(?:\s+?)(\/?>)/g,TAG_QUOTE_SPACES:/\s*=\s*(["']?)\s*(.*?)\s*(\1)/g},this.metal.html=n}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metalNamed.metal.core,n=this.metalNamed.metal.object,o=this.metalNamed.metal.string,r=this.metalNamed.dom.dom,i=this.metalNamed.dom.features,a=this.metalNamed.dom.globalEval,s=this.metal.html,l=this.metal.Component,c=this.metal.ComponentCollector,u=this.metal.ComponentRenderer,g=this.metal.EventsCollector,d=this.metal.SurfaceCollector,p=function(u){function d(n){babelHelpers.classCallCheck(this,d);var o=babelHelpers.possibleConstructorReturn(this,u.call(this,n));return o.collectedSurfaces_=[],o.generatedIdCount_={},o.removedSurfaces_=[],o.surfaceIds_={},o.eventsCollector_=new g(o.component_),t.mergeSuperClassesProperty(o.component_.constructor,"SURFACE_TAG_NAME",e.firstDefinedValue),o.component_.constructor.SURFACE_TAG_NAME_MERGED=o.component_.constructor.SURFACE_TAG_NAME_MERGED||"div",o.setShouldUseFacade(!0),o.addSurfacesFromStaticHint_(),o.addSurface(o.component_.id,{componentName:o.component_.getName()}),o.component_.once("attached",o.handleComponentAttachedOnce_.bind(o)),o.component_.on("detached",o.handleComponentDetached_.bind(o)),o.on("renderSurface",o.defaultRenderSurfaceFn_,!0),o}return babelHelpers.inherits(d,u),d.prototype.addMissingStateKey_=function(e,t){this.component_.getStateKeyConfig(e)||this.component_.addToState(e,{},t)},d.prototype.addSubComponent=function(e,t){var n=this.getSurfaceFromElementId(t).componentData||{};return n.id=t,n.element="#"+t,this.component_.addSubComponent(e,n)},d.prototype.addSurface=function(e,t){var n=t||{},o=this.getSurfaceElementId(e,n);return this.surfaceIds_[o]?d.surfacesCollector.updateSurface(o,n):(this.surfaceIds_[o]=!0,n.cacheState=n.cacheState||d.Cache.NOT_INITIALIZED,d.surfacesCollector.addSurface(o,n),n.componentName&&e!==this.component_.id&&this.addSubComponent(n.componentName,o)),this.cacheSurfaceRenderKeys_(o,n.renderKeys),this},d.prototype.addSurfaces=function(e){for(var t in e)this.addSurface(t,e[t]);return this},d.prototype.addSurfacesFromStaticHint_=function(){t.mergeSuperClassesProperty(this.component_.constructor,"SURFACES",this.mergeObjects_),this.surfacesRenderKeys_={};var e=this.component_.constructor.SURFACES_MERGED;for(var o in e)this.addSurface(o,n.mixin({},e[o]))},d.prototype.addToRemovedSurfaces_=function(e){for(var t=0;t<e.length;t++){var n=this.getSurface(e[t]);this.removedSurfaces_.push(n),n.parent=null}},d.prototype.buildFragment_=function(e){var t=r.buildFragment(e);return-1!==e.indexOf("<script")&&a.runScriptsInElement(t),t},d.prototype.buildPlaceholder=function(e,t){return e&&t&&(t.surfaceElementId=e,this.addSurface(e,t)),"%%%%~s"+(e?"-"+e:"")+"~%%%%"},d.prototype.cacheSurfaceContent=function(e,t){var n=this.computeSurfaceCacheState_(t),o=this.getSurfaceFromElementId(e);o.cacheState=n},d.prototype.cacheSurfaceRenderKeys_=function(e,t){for(var n=t||[],o=0;o<n.length;o++)this.surfacesRenderKeys_[n[o]]||(this.surfacesRenderKeys_[n[o]]={},this.addMissingStateKey_(n[o],this.component_.getInitialConfig()[n[o]])),this.surfacesRenderKeys_[n[o]][e]=!0},d.prototype.checkHasElementTag_=function(e,t){return-1!==e.indexOf(' id="'+t+'"')},d.prototype.clearSurfaceCache=function(e){this.getSurface(e).cacheState=d.Cache.NOT_INITIALIZED},d.prototype.compareCacheStates_=function(e,t){return e!==d.Cache.NOT_INITIALIZED&&e===t},d.prototype.computeSurfaceCacheState_=function(e){return e=e||"",i.checkAttrOrderChange()&&(e=this.convertHtmlToBrowserFormat_(e)),o.hashCode(e)},d.prototype.convertHtmlToBrowserFormat_=function(e){var t=document.createElement("div");return r.append(t,e),t.innerHTML},d.prototype.createPlaceholderSurface_=function(e,n){var o=n;t.isDefAndNotNull(o)||(o=this.generateSurfaceElementId(e));var r=this.getSurfaceFromElementId(o);return r||(r={surfaceElementId:o},this.addSurface(o,r)),r},d.prototype.createSurfaceElement_=function(e){var t=document.createElement(this.component_.constructor.SURFACE_TAG_NAME_MERGED);return t.id=e,t},d.prototype.defaultRenderSurfaceFn_=function(e){var t=e.surfaceElementId,n=this.getSurfaceFromElementId(t);if(n.componentName&&t!==this.component_.id)return void this.renderComponentSurface_(t,e.content);var o=e.content||this.getSurfaceContent_(t),r=e.cacheContent||o,i=n["static"];if(!n["static"]){var a=n.cacheState;this.cacheSurfaceContent(t,r),i=this.compareCacheStates_(n.cacheState,a)}i?this.renderPlaceholderSurfaceContents_(r,t):(this.eventsCollector_.attachListenersFromHtml(r,t),this.replaceSurfaceContent_(t,n,o))},d.prototype.disposeInternal=function(){var e=this;u.prototype.disposeInternal.call(this),this.eventsCollector_.dispose(),this.eventsCollector_=null,this.surfacesRenderKeys_=null,Object.keys(this.surfaceIds_).forEach(function(t){return e.removeSurface(t,!0)}),this.surfaceIds_=null},d.prototype.emitRenderSurfaceEvent_=function(e,t,n,o){this.emit("renderSurface",{cacheContent:n,content:t,renderKeys:o||[],surfaceElementId:e,surfaceId:this.getSurfaceId(this.getSurfaceFromElementId(e))})},d.prototype.findElementInContent_=function(e,n){n=t.isString(n)?r.buildFragment(n):n;var o=n.childNodes[0];return o&&o.id===e?o:void 0},d.prototype.generateSurfaceElementId=function(e){return this.generatedIdCount_[e]=(this.generatedIdCount_[e]||0)+1,e+"-s"+this.generatedIdCount_[e]},d.prototype.getComponentHtml=function(e){return this.wrapContentIfNecessary(e,this.component_.id,"div")},d.prototype.getElementContent_=function(){return this.getSurfaceContent(this.getSurface(this.component_.id))},d.prototype.getElementExtendedContent=function(){var e=this.getElementContent_()||"";return this.eventsCollector_.attachListenersFromHtml(e,this.component_.id),this.cacheSurfaceContent(this.component_.id,e),this.replaceSurfacePlaceholders_(e,this.component_.id,this.getSurface(this.component_.id))},d.prototype.getModifiedSurfacesFromChanges_=function(e){var t={};for(var n in e)for(var o=Object.keys(this.surfacesRenderKeys_[n]||{}),r=0;r<o.length;r++)t[o[r]]||(t[o[r]]=[]),t[o[r]].push(n);return t},d.prototype.getNonComponentSurfaceHtml=function(e,t){return this.wrapContentIfNecessary(t,e,this.component_.constructor.SURFACE_TAG_NAME_MERGED)},d.prototype.getSurface=function(e){var t=this.getSurfaceFromElementId(this.getSurfaceElementId(e));return t?t:this.getSurfaceFromElementId(e)},d.prototype.getSurfaceContent=function(){t.abstractMethod()},d.prototype.getSurfaceContent_=function(e){var t=this.getSurfaceFromElementId(e);if(t.componentName&&e!==this.component_.id){var n=c.components[e];return n.wasRendered?"":n.getRenderer().getElementExtendedContent()}return this.getSurfaceContent(t)||""},d.prototype.getSurfaceElement=function(e,t){var n=t||this.getSurface(e);if(!n)return null;if(!n.element)if(n.componentName){var o=c.components[e];o&&(n.element=o.element)}else{var r=this.getSurfaceElementId(e,n);n.element=this.component_.findElementById(r)||this.createSurfaceElement_(r)}return n.element},d.prototype.getSurfaceElementId=function(e,t){var n=t||{};return n.surfaceElementId?n.surfaceElementId:n.componentName||this.hasComponentPrefix_(e)?e:this.prefixSurfaceId(e)},d.prototype.getSurfaceFromElementId=function(e){return d.surfacesCollector.getSurface(e)},d.prototype.getSurfaceHtml_=function(e,t){var n=e.surfaceElementId;if(e.componentName){var o=c.components[n];return o.getRenderer().getComponentHtml(t)}return this.getNonComponentSurfaceHtml(n,t)},d.prototype.getSurfaceId=function(e){return e.componentName||!this.hasComponentPrefix_(e.surfaceElementId)?e.surfaceElementId:e.surfaceElementId.substr(this.component_.id.length+1)},d.prototype.getSurfaces=function(){var e={};return Object.keys(this.surfaceIds_).forEach(function(t){var n=this.getSurfaceFromElementId(t);e[this.getSurfaceId(n)]=n}.bind(this)),e},d.prototype.handleComponentAttachedOnce_=function(){this.updatePlaceholderSurfaces_()},d.prototype.handleComponentDetached_=function(){this.eventsCollector_.detachAllListeners()},d.prototype.hasComponentPrefix_=function(e){var t=this.component_.id;return e.substr(0,t.length)===t&&(e.length===t.length||"-"===e[t.length])},d.prototype.mergeObjects_=function(e){return n.mixin.apply(null,[{}].concat(e.reverse()))},d.prototype.prefixSurfaceId=function(e){return this.component_.id+"-"+e},d.prototype.removeSurface=function(e,t){if(!t){var n=this.getSurfaceElement(e);n&&n.parentNode&&n.parentNode.removeChild(n)}var o=this.getSurfaceElementId(e,this.getSurface(e));return d.surfacesCollector.removeSurface(o),this.surfaceIds_[o]=!1,this},d.prototype.removeUnusedSurfaces_=function(){for(var e=[],t=0;t<this.removedSurfaces_.length;t++){
var n=this.removedSurfaces_[t];n.parent||(this.removeSurface(n.surfaceElementId),n.componentName&&e.push(n.surfaceElementId))}this.component_.disposeSubComponents(e)},d.prototype.render=function(e){var t=this.component_.id;if(e.decorating&&this.component_.element){var n=this.getElementExtendedContent(),o=this.computeSurfaceCacheState_(n),r=s.compress(this.component_.element.outerHTML),i=this.computeSurfaceCacheState_(r);this.compareCacheStates_(i,o)||this.replaceElementContent(n)}else this.emitRenderSurfaceEvent_(t)},d.prototype.renderComponentSurface_=function(e,t){var n=c.components[e];if(n.wasRendered){var o=this.getSurfaceFromElementId(e);l.componentsCollector.updateComponent(e,o.componentData)}else n.element?t&&r.isEmpty(n.element)&&n.getRenderer().replaceElementContent(t):n.element=this.component_.findElementById(e),n.renderAsSubComponent()},d.prototype.renderPlaceholderSurfaceContents_=function(e,t){var n=this;e.replace(d.SURFACE_REGEX,function(e,o){var r=n.createPlaceholderSurface_(t,o);return n.emitRenderSurfaceEvent_(r.surfaceElementId),e})},d.prototype.renderSurfacesContent_=function(e){this.generatedIdCount_={},this.removedSurfaces_=[];var t=this.component_.id,n=Object.keys(e),o=n.indexOf(t);-1!==o&&(n.splice(o,1),n=[t].concat(n));for(var r=0;r<n.length;r++){var i=this.getSurfaceFromElementId(n[r]);i.handled||!i.parent&&n[r]!==t||this.emitRenderSurfaceEvent_(n[r],null,null,e[n[r]])}this.updatePlaceholderSurfaces_(),this.eventsCollector_.detachUnusedListeners(),this.removeUnusedSurfaces_()},d.prototype.replaceElementContent=function(e){var t=this.component_.element,n=this.buildFragment_(e),o=this.findElementInContent_(this.component_.id,n);if(!t){if(o)return void(this.component_.element=o);this.component_.element=document.createElement("div"),t=this.component_.element}o&&(this.updateElementAttributes_(t,o),n=o.childNodes),r.removeChildren(t),r.append(t,n)},d.prototype.replaceSurfaceContent_=function(e,t,n){if(n=this.replaceSurfacePlaceholders_(n,e,t),e===this.component_.id)return void this.replaceElementContent(n);var o=this.getSurfaceElement(e),i=this.buildFragment_(n),a=this.findElementInContent_(e,i);a?(t.element=a,r.replace(o,t.element)):(r.removeChildren(o),r.append(o,i))},d.prototype.replaceSurfacePlaceholders_=function(e,t,n){n.componentName&&t!==this.component_.id||(this.addToRemovedSurfaces_(n.children||[]),n.children=[]);var o=this;return e.replace(d.SURFACE_REGEX,function(e,r){var i=o.createPlaceholderSurface_(t,r);r=i.surfaceElementId,i.handled=!0,i.parent=t,n.children.push(r);var a=o.getSurfaceContent_(r),s=o.getSurfaceHtml_(i,a),l=o.replaceSurfacePlaceholders_(s,r,i);return o.collectedSurfaces_.push({cacheContent:a,content:l,surface:i}),l})},d.prototype.update=function(e){this.renderSurfacesContent_(this.getModifiedSurfacesFromChanges_(e.changes))},d.prototype.updateElementAttributes_=function(e,t){for(var n=t.attributes,o=0;o<n.length;o++)"id"!==n[o].name&&"class"!==n[o].name&&e.setAttribute(n[o].name,n[o].value);e.tagName!==t.tagName},d.prototype.updatePlaceholderSurface_=function(e){var t=e.surface,n=t.surfaceElementId;t.componentName?(r.replace(this.component_.findElementById(n),this.getSurfaceElement(n,t)),this.emitRenderSurfaceEvent_(n,e.content,e.cacheContent)):(t.element=null,this.cacheSurfaceContent(n,e.cacheContent),this.eventsCollector_.attachListenersFromHtml(e.cacheContent,n))},d.prototype.updatePlaceholderSurfaces_=function(){for(var e=this.collectedSurfaces_.length-1;e>=0;e--)this.updatePlaceholderSurface_(this.collectedSurfaces_[e]),this.collectedSurfaces_[e].surface.handled=!1;this.collectedSurfaces_=[]},d.prototype.wrapContentIfNecessary=function(e,t,n){return this.checkHasElementTag_(e,t)||(e="<"+n+' id="'+t+'">'+e+"</"+n+">"),e},d}(u);p.prototype.registerMetalComponent&&p.prototype.registerMetalComponent(p,"SurfaceRenderer"),p.Cache={NOT_INITIALIZED:-2},p.SURFACE_REGEX=/\%\%\%\%~s(?:-([^~:]+))?~\%\%\%\%/g,p.surfacesCollector=new d,this.metal.SurfaceRenderer=p}.call(this),function(){var e=this.metal.Component,t=this.metal.ComponentCollector,n=this.metal.ComponentRegistry,o=this.metal.ComponentRenderer,r=this.metal.EventsCollector,i=this.metal.SurfaceCollector,a=this.metal.SurfaceRenderer;this.metal.component=e,this.metalNamed.component={},this.metalNamed.component.Component=e,this.metalNamed.component.ComponentCollector=t,this.metalNamed.component.ComponentRegistry=n,this.metalNamed.component.ComponentRenderer=o,this.metalNamed.component.EventsCollector=r,this.metalNamed.component.SurfaceCollector=i,this.metalNamed.component.SurfaceRenderer=a}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metal.Promise,o=this.metal.component,r=this.metalNamed.events.EventHandler,i=function(o){function i(e){babelHelpers.classCallCheck(this,i);var t=babelHelpers.possibleConstructorReturn(this,o.call(this,e));return t.eventHandler_=new r,t.on("select",t.select),t}return babelHelpers.inherits(i,o),i.prototype.attached=function(){this.inputElement&&this.eventHandler_.add(t.on(this.inputElement,"input",this.handleUserInput_.bind(this)))},i.prototype.detached=function(){this.eventHandler_.removeAllListeners()},i.prototype.handleUserInput_=function(){this.request(this.inputElement.value)},i.prototype.request=function(t){var o=this;this.pendingRequest&&this.pendingRequest.cancel("Cancelled by another request");var r=o.data(t);return e.isPromise(r)||(r=n.resolve(r)),this.pendingRequest=r.then(function(t){return Array.isArray(t)?t.map(o.format.bind(o)).filter(function(t){return e.isDefAndNotNull(t)}):void 0}),this.pendingRequest},i.prototype.setData_=function(t){return e.isFunction(t)?t:function(){return t}},i}(o);i.prototype.registerMetalComponent&&i.prototype.registerMetalComponent(i,"AutocompleteBase"),i.STATE={data:{setter:"setData_"},format:{value:e.identityFunction,validator:e.isFunction},inputElement:{setter:t.toElement},select:{value:function(e){this.inputElement.value=e.text,this.inputElement.focus()},validator:e.isFunction},visible:{validator:e.isBoolean,value:!1}},this.metal.AutocompleteBase=i}.call(this),function(){this.CLOSURE_NO_DEPS=!0,this.goog=this.goog||{};var COMPILED=!1,goog=this.goog||{};goog.global=this,goog.global.CLOSURE_UNCOMPILED_DEFINES,goog.global.CLOSURE_DEFINES,goog.isDef=function(e){return void 0!==e},goog.exportPath_=function(e,t,n){var o=e.split("."),r=n||goog.global;o[0]in r||!r.execScript||r.execScript("var "+o[0]);for(var i;o.length&&(i=o.shift());)!o.length&&goog.isDef(t)?r[i]=t:r=r[i]?r[i]:r[i]={}},goog.define=function(e,t){var n=t;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,e)?n=goog.global.CLOSURE_UNCOMPILED_DEFINES[e]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,e)&&(n=goog.global.CLOSURE_DEFINES[e])),goog.exportPath_(e,n)},goog.define("goog.DEBUG",!0),goog.define("goog.LOCALE","en"),goog.define("goog.TRUSTED_SITE",!0),goog.define("goog.STRICT_MODE_COMPATIBLE",!1),goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG),goog.define("goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING",!1),goog.provide=function(e){if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var n=e;(n=n.substring(0,n.lastIndexOf(".")))&&!goog.getObjectByName(n);)goog.implicitNamespaces_[n]=!0}goog.exportPath_(e,t)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){return COMPILED?void 0:goog.isProvided_(e)?e in goog.loadedModules_?goog.loadedModules_[e]:goog.getObjectByName(e):null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw new Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){for(var n,o=e.split("."),r=t||goog.global;n=o.shift();){if(!goog.isDefAndNotNull(r[n]))return null;r=r[n]}return r},goog.globalize=function(e,t){var n=t||goog.global;for(var o in e)n[o]=e[o]},goog.addDependency=function(e,t,n,o){if(goog.DEPENDENCIES_ENABLED){var r,i,a=e.replace(/\\/g,"/"),s=goog.dependencies_;o&&"boolean"!=typeof o||(o=o?{module:"goog"}:{});for(var l=0;r=t[l];l++)s.nameToPath[r]=a,s.pathIsModule[a]="goog"==o.module;for(var c=0;i=n[c];c++)a in s.requires||(s.requires[a]={}),s.requires[a][i]=!0}},goog.define("goog.ENABLE_DEBUG_LOADER",!0),goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(e),goog.isProvided_(e))return goog.isInModuleLoader_()?goog.module.getInternal_(e):null;if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(t)return goog.writeScripts_(t),null}var n="goog.require could not find: "+e;throw goog.logToConsole_(n),Error(n)}},goog.basePath="",goog.global.CLOSURE_BASE_PATH,goog.global.CLOSURE_NO_DEPS,goog.global.CLOSURE_IMPORT_SCRIPT,goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.define("goog.LOAD_MODULE_USING_EVAL",!0),goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG),goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))return void(goog.basePath=goog.global.CLOSURE_BASE_PATH);if(goog.inHtmlDocument_())for(var e=goog.global.document,t=e.getElementsByTagName("SCRIPT"),n=t.length-1;n>=0;--n){var o=t[n],r=o.src,i=r.lastIndexOf("?"),a=-1==i?r.length:i;if("base.js"==r.substr(a-7,7))return void(goog.basePath=r.substr(0,a-7))}},goog.importScript_=function(e,t){var n=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;n(e,t)&&(goog.dependencies_.written[e]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.importModule_=function(e){var t='goog.retrieveAndExecModule_("'+e+'");';goog.importScript_("",t)&&(goog.dependencies_.written[e]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(e,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\n//# sourceURL="+e+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+t+"\n;return exports});\n//# sourceURL="+e+"\n"},goog.loadQueuedModules_=function(){var e=goog.queuedModules_.length;if(e>0){var t=goog.queuedModules_;goog.queuedModules_=[];for(var n=0;e>n;n++){var o=t[n];goog.maybeProcessDeferredPath_(o)}}},goog.maybeProcessDeferredDep_=function(e){if(goog.isDeferredModule_(e)&&goog.allDepsAreAvailable_(e)){var t=goog.getPathFromDeps_(e);goog.maybeProcessDeferredPath_(goog.basePath+t)}},goog.isDeferredModule_=function(e){var t=goog.getPathFromDeps_(e);if(t&&goog.dependencies_.pathIsModule[t]){var n=goog.basePath+t;return n in goog.dependencies_.deferred}return!1},goog.allDepsAreAvailable_=function(e){var t=goog.getPathFromDeps_(e);if(t&&t in goog.dependencies_.requires)for(var n in goog.dependencies_.requires[t])if(!goog.isProvided_(n)&&!goog.isDeferredModule_(n))return!1;return!0},goog.maybeProcessDeferredPath_=function(e){if(e in goog.dependencies_.deferred){var t=goog.dependencies_.deferred[e];delete goog.dependencies_.deferred[e],goog.globalEval(t)}},goog.loadModuleFromUrl=function(e){goog.retrieveAndExecModule_(e)},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1};var n;if(goog.isFunction(e))n=e.call(goog.global,{});else{if(!goog.isString(e))throw Error("Invalid module definition");n=goog.loadModuleFromSource_.call(goog.global,e)}var o=goog.moduleLoaderState_.moduleName;if(!goog.isString(o)||!o)throw Error('Invalid module name "'+o+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(o,n):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(n),goog.loadedModules_[o]=n}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(){"use strict";var exports={};return eval(arguments[0]),exports},goog.writeScriptSrcNode_=function(e){goog.global.document.write('<script type="text/javascript" src="'+e+'"></script>')},goog.appendScriptSrcNode_=function(e){var t=goog.global.document,n=t.createElement("script");n.type="text/javascript",n.src=e,n.defer=!1,n.async=!1,t.head.appendChild(n)},goog.writeScriptTag_=function(e,t){if(goog.inHtmlDocument_()){var n=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==n.readyState){var o=/\bdeps.js$/.test(e);if(o)return!1;throw Error('Cannot write "'+e+'" after document load')}var r=goog.IS_OLD_IE_;if(void 0===t)if(r){var i=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";n.write('<script type="text/javascript" src="'+e+'"'+i+"></script>")}else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(e):goog.writeScriptSrcNode_(e);else n.write('<script type="text/javascript">'+t+"</script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(e,t){return"complete"==e.readyState&&goog.lastNonModuleScriptIndex_==t&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(e){function t(e){if(!(e in r.written||e in r.visited)){if(r.visited[e]=!0,e in r.requires)for(var i in r.requires[e])if(!goog.isProvided_(i)){if(!(i in r.nameToPath))throw Error("Undefined nameToPath for "+i);t(r.nameToPath[i])}e in o||(o[e]=!0,n.push(e))}}var n=[],o={},r=goog.dependencies_;t(e);for(var i=0;i<n.length;i++){var a=n[i];goog.dependencies_.written[a]=!0}var s=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(var i=0;i<n.length;i++){var a=n[i];if(!a)throw goog.moduleLoaderState_=s,Error("Undefined script input");r.pathIsModule[a]?goog.importModule_(goog.basePath+a):goog.importScript_(goog.basePath+a)}goog.moduleLoaderState_=s},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.normalizePath_=function(e){for(var t=e.split("/"),n=0;n<t.length;)"."==t[n]?t.splice(n,1):n&&".."==t[n]&&t[n-1]&&".."!=t[n-1]?t.splice(--n,2):n++;return t.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),t.responseText},goog.retrieveAndExecModule_=function(e){if(!COMPILED){var t=e;e=goog.normalizePath_(e);var n=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,o=goog.loadFileSync_(e);if(null==o)throw new Error("load of "+e+"failed");var r=goog.wrapModule_(e,o),i=goog.IS_OLD_IE_;i?(goog.dependencies_.deferred[t]=r,goog.queuedModules_.push(t)):n(e,r)}},goog.typeOf=function(e){var t="undefined"==typeof e?"undefined":babelHelpers["typeof"](e);if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t="undefined"==typeof e?"undefined":babelHelpers["typeof"](e);return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);/** @preserveTry */
try{delete e[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var n="array"==t?[]:{};for(var o in e)n[o]=goog.cloneObject(e[o]);return n}return e},goog.bindNative_=function(e,t,n){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,n){if(!e)throw new Error;if(arguments.length>2){var o=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,o),e.apply(t,n)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,n){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var n in t)e[n]=t[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),"undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(t){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var n=goog.global.document,o=n.createElement("SCRIPT");o.type="text/javascript",o.defer=!1,o.appendChild(n.createTextNode(e)),n.body.appendChild(o),n.body.removeChild(o)}}},goog.evalWorksForGlobals_=null,goog.cssNameMapping_,goog.cssNameMappingStyle_,goog.getCssName=function(e,t){var n,o=function(e){return goog.cssNameMapping_[e]||e},r=function(e){for(var t=e.split("-"),n=[],r=0;r<t.length;r++)n.push(o(t[r]));return n.join("-")};return n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?o:r:function(e){return e},t?e+"-"+n(t):n(e)},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},goog.global.CLOSURE_CSS_NAME_MAPPING,!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){return t&&(e=e.replace(/\{\$([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,n){goog.exportPath_(e,t,n)},goog.exportProperty=function(e,t,n){e[t]=n},goog.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,o){for(var r=new Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.prototype[n].apply(e,r)}},goog.base=function(e,t,n){var o=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!o)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(o.superClass_){for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return o.superClass_.constructor.apply(e,r)}for(var a=new Array(arguments.length-2),i=2;i<arguments.length;i++)a[i-2]=arguments[i];for(var s=!1,l=e.constructor;l;l=l.superClass_&&l.superClass_.constructor)if(l.prototype[t]===o)s=!0;else if(s)return l.prototype[t].apply(e,a);if(e[t]===o)return e.constructor.prototype[t].apply(e,a);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.string={},goog.string.subs=function(e,t){for(var n=e.split("%s"),o="",r=Array.prototype.slice.call(arguments,1);r.length&&n.length>1;)o+=n.shift()+r.shift();return o+n.join("%s")},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/'/g,goog.string.NULL_RE_=/\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/,goog.string.htmlEscape=function(e,t){return t?(e=e.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e):goog.string.ALL_RE_.test(e)?(-1!=e.indexOf("&")&&(e=e.replace(goog.string.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.GT_RE_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(goog.string.QUOT_RE_,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\x00")&&(e=e.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&-1!=e.indexOf("e")&&(e=e.replace(goog.string.E_RE_,"&#101;")),e):e},goog.debug={},goog.debug.runtimeType=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":"undefined"==typeof e?"undefined":babelHelpers["typeof"](e)},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=(new Error).stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.provide("goog.i18n.bidi"),goog.provide("goog.i18n.bidi.Dir"),goog.provide("goog.i18n.bidi.DirectionalString"),goog.provide("goog.i18n.bidi.Format"),goog.define("goog.i18n.bidi.FORCE_RTL",!1),goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||goog.LOCALE.length>=3&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4)),goog.i18n.bidi.Format={LRE:"",RLE:"",PDF:"",LRM:"",RLM:""},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?e>0?goog.i18n.bidi.Dir.LTR:0>e?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z--------",goog.i18n.bidi.rtlChars_="----",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)},goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)},goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(e,t){return e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t),goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=new RegExp("^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)","i"),goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(e,t){var n=void 0===t?goog.i18n.bidi.hasAnyRtl(e):t,o=n?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM;return e.replace(goog.i18n.bidi.bracketGuardTextRe_,o+"$&"+o)},goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"},goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"},goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(e,t){for(var n=0,o=0,r=!1,i=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),a=0;a<i.length;a++){var s=i[a];goog.i18n.bidi.startsWithRtl(s)?(n++,o++):goog.i18n.bidi.isRequiredLtrRe_.test(s)?r=!0:goog.i18n.bidi.hasAnyLtr(s)?o++:goog.i18n.bidi.hasNumeralsRe_.test(s)&&(r=!0)}return 0==o?r?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:n/o>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t),t&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr"))},goog.i18n.bidi.setElementDirByTextDirectionality=function(e,t){switch(goog.i18n.bidi.estimateDirection(t)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.i18n.bidi.DirectionalString.prototype.implementsGoogI18nBidiDirectionalString,goog.i18n.bidi.DirectionalString.prototype.getDirection,goog.provide("goog.asserts"),goog.define("goog.asserts.ENABLE_ASSERTS",goog.DEBUG),goog.asserts.AssertionError=function(e,t){t.unshift(e),goog.debug.Error.call(this,goog.string.subs.apply(null,t)),t.shift(),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.doAssertFailure_=function(e,t,n,o){var r="Assertion failed";if(n){r+=": "+n;var i=o}else e&&(r+=": "+e,i=t);var a=new goog.asserts.AssertionError(""+r,i||[]);goog.asserts.errorHandler_(a)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,n,o){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],n,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":"undefined"==typeof e?"undefined":babelHelpers["typeof"](e)},goog.string.StringBuffer=function(e,t){null!=e&&this.append.apply(this,arguments)},goog.string.StringBuffer.prototype.buffer_="",goog.string.StringBuffer.prototype.set=function(e){this.buffer_=""+e},goog.string.StringBuffer.prototype.append=function(e,t,n){if(this.buffer_+=String(e),null!=t)for(var o=1;o<arguments.length;o++)this.buffer_+=arguments[o];return this},goog.string.StringBuffer.prototype.clear=function(){this.buffer_=""},goog.string.StringBuffer.prototype.getLength=function(){return this.buffer_.length},goog.string.StringBuffer.prototype.toString=function(){return this.buffer_},goog.soy={},goog.soy.data={},goog.soy.data.SanitizedContentKind={HTML:goog.DEBUG?{sanitizedContentKindHtml:!0}:{},JS:goog.DEBUG?{sanitizedContentJsChars:!0}:{},URI:goog.DEBUG?{sanitizedContentUri:!0}:{},TRUSTED_RESOURCE_URI:goog.DEBUG?{sanitizedContentTrustedResourceUri:!0}:{},ATTRIBUTES:goog.DEBUG?{sanitizedContentHtmlAttribute:!0}:{},CSS:goog.DEBUG?{sanitizedContentCss:!0}:{},TEXT:goog.DEBUG?{sanitizedContentKindText:!0}:{}},goog.soy.data.SanitizedContent=function(){throw Error("Do not instantiate directly")},goog.soy.data.SanitizedContent.prototype.contentKind,goog.soy.data.SanitizedContent.prototype.contentDir=null,goog.soy.data.SanitizedContent.prototype.content,goog.soy.data.SanitizedContent.prototype.getContent=function(){return this.content},goog.soy.data.SanitizedContent.prototype.toString=function(){return this.content},goog.soy.data.UnsanitizedText=function(){goog.soy.data.UnsanitizedText.base(this,"constructor")},goog.inherits(goog.soy.data.UnsanitizedText,goog.soy.data.SanitizedContent),function(){var e={};e.asserts={},e.esc={};var t={};e.StringBuilder=goog.string.StringBuffer,t.SanitizedContentKind=goog.soy.data.SanitizedContentKind,t.isContentKind=function(e,t){return null!=e&&e.contentKind===t},t.UnsanitizedText=function(e,t){this.content=String(e),this.contentDir=null!=t?t:null},goog.inherits(t.UnsanitizedText,goog.soy.data.UnsanitizedText),t.UnsanitizedText.prototype.contentKind=t.SanitizedContentKind.TEXT,t.$$EMPTY_STRING_={VALUE:""},t.$$makeSanitizedContentFactory_=function(e){function t(e){this.content=e}function n(e,n){var o=new t(String(e));return void 0!==n&&(o.contentDir=n),o}return t.prototype=e.prototype,n},t.$$makeSanitizedContentFactoryWithDefaultDirOnly_=function(e){function t(e){this.content=e}function n(e){var n=new t(String(e));return n}return t.prototype=e.prototype,n},t.markUnsanitizedText=function(e,n){return new t.UnsanitizedText(e,n)},e.$$augmentMap=function(e,t){function n(){}n.prototype=e;var o=new n;for(var r in t)o[r]=t[r];return o},e.$$checkMapKey=function(e){if("string"!=typeof e)throw Error("Map literal's key expression must evaluate to string (encountered type \""+("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))+'").');return e},e.$$getMapKeys=function(e){var t=[];for(var n in e)t.push(n);return t},e.$$checkNotNull=function(e){if(null==e)throw Error("unexpected null value");return e},e.$$getDelTemplateId=function(e){return e},e.$$DELEGATE_REGISTRY_PRIORITIES_={},e.$$DELEGATE_REGISTRY_FUNCTIONS_={},e.$$registerDelegateFn=function(t,n,o,r){var i="key_"+t+":"+n,a=e.$$DELEGATE_REGISTRY_PRIORITIES_[i];if(void 0===a||o>a)e.$$DELEGATE_REGISTRY_PRIORITIES_[i]=o,e.$$DELEGATE_REGISTRY_FUNCTIONS_[i]=r;else if(o==a)throw Error('Encountered two active delegates with the same priority ("'+t+":"+n+'").')},e.$$getDelegateFn=function(t,n,o){var r=e.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+t+":"+n];if(r||""==n||(r=e.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+t+":"]),r)return r;if(o)return e.$$EMPTY_TEMPLATE_FN_;throw Error('Found no active impl for delegate call to "'+t+":"+n+'" (and not allowemptydefault="true").')},e.$$EMPTY_TEMPLATE_FN_=function(e,t,n){return""},e.$$truncate=function(t,n,o){return t=String(t),t.length<=n?t:(o&&(n>3?n-=3:o=!1),e.$$isHighSurrogate_(t.charAt(n-1))&&e.$$isLowSurrogate_(t.charAt(n))&&(n-=1),t=t.substring(0,n),o&&(t+="..."),t)},e.$$isHighSurrogate_=function(e){return e>=55296&&56319>=e},e.$$isLowSurrogate_=function(e){return e>=56320&&57343>=e},e.asserts.assertType=function(e,t,n,o,r){var i="expected param "+t+" of type "+o+(goog.DEBUG?", but got "+goog.debug.runtimeType(n):"")+".";return goog.asserts.assert(e,i,r)},e.esc.$$escapeHtmlHelper=function(e){return goog.string.htmlEscape(String(e))},goog.loadModule(function(){return goog.module("soy"),e}),goog.loadModule(function(){return goog.module("soydata"),t})}(),/**
   * @license
   * Copyright 2015 The Incremental DOM Authors. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
function(e,t){t(e.IncrementalDOM=e.IncrementalDOM||{})}(this,function(e){"use strict";function t(e,t){this.attrs=a(),this.attrsArr=[],this.newAttrs=a(),this.key=t,this.keyMap=null,this.keyMapValid=!0,this.nodeName=e,this.text=null}function n(){this.created=S.nodesCreated&&[],this.deleted=S.nodesDeleted&&[]}var o=Object.prototype.hasOwnProperty,r=Object.create,i=function(e,t){return o.call(e,t)},a=function(){return r(null)},s=function(e,n,o){var r=new t(n,o);return e.__incrementalDOMData=r,r},l=function(e){var t=e.__incrementalDOMData;if(!t){var n=e.nodeName.toLowerCase(),o=null;e instanceof Element&&(o=e.getAttribute("key")),t=s(e,n,o)}return t},c={"default":"__default",placeholder:"__placeholder"},u=function(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)},g=function(e,t,n){e[t]=n},d=function(e,t,n){if("string"==typeof n)e.style.cssText=n;else{e.style.cssText="";var o=e.style,r=n;for(var a in r)i(r,a)&&(o[a]=r[a])}},p=function(e,t,n){var o="undefined"==typeof n?"undefined":babelHelpers["typeof"](n);"object"===o||"function"===o?g(e,t,n):u(e,t,n)},h=function(e,t,n){var o=l(e),r=o.attrs;if(r[t]!==n){var i=m[t]||m[c["default"]];i(e,t,n),r[t]=n}},m=a();m[c["default"]]=p,m[c.placeholder]=function(){},m.style=d;var f=function(e,t){return"svg"===e?"http://www.w3.org/2000/svg":"foreignObject"===l(t).nodeName?null:t.namespaceURI},_=function(e,t,n,o,r){var i=f(n,t),a=void 0;if(a=i?e.createElementNS(i,n):e.createElement(n),s(a,n,o),r)for(var l=0;l<r.length;l+=2)h(a,r[l],r[l+1]);return a},E=function(e){var t=e.createTextNode("");return s(t,"#text",null),t},v=function(e){for(var t=a(),n=e.children,o=n.length,r=0;o>r;r+=1){var i=n[r],s=l(i).key;s&&(t[s]=i)}return t},y=function(e){var t=l(e);return t.keyMap||(t.keyMap=v(e)),t.keyMap},b=function(e,t){return t?y(e)[t]:null},C=function(e,t,n){y(e)[t]=n},S={nodesCreated:null,nodesDeleted:null};n.prototype.markCreated=function(e){this.created&&this.created.push(e)},n.prototype.markDeleted=function(e){this.deleted&&this.deleted.push(e)},n.prototype.notifyChanges=function(){this.created&&this.created.length>0&&S.nodesCreated(this.created),this.deleted&&this.deleted.length>0&&S.nodesDeleted(this.deleted)};var I=null,L=void 0,N=void 0,R=void 0,T=void 0,D=void 0,A=function(e,t,o){var r=I,i=R,a=T,s=L,l=N;I=new n,R=e,T=e.ownerDocument,t(o),I.notifyChanges(),I=r,R=i,T=a,L=s,N=l},O=function(e,t,n){A(e,function(n){L=e,N=e.parentNode,H(),t(n),F()},n)},w=function(e,t,n){A(e,function(n){L={nextSibling:e},N=e.parentNode,t(n)},n)},P=function(e,t){var n=l(L);return e===n.nodeName&&t==n.key},M=function(e,t,n){if(!L||!P(e,t)){var o=void 0;t&&(o=b(N,t)),!o&&D&&(o=D.apply(null,arguments),o===L)||(o||(o="#text"===e?E(T):_(T,N,e,t,n),t&&C(N,t,o),I.markCreated(o)),L&&l(L).key?(N.replaceChild(o,L),l(N).keyMapValid=!1):N.insertBefore(o,L),L=o)}},x=function(){var e=N,t=l(e),n=t.keyMap,o=t.keyMapValid,r=e.lastChild,i=void 0;if(!(r===L&&o||t.attrs[c.placeholder]&&e!==R)){for(;r!==L;)e.removeChild(r),I.markDeleted(r),i=l(r).key,i&&delete n[i],r=e.lastChild;if(!o){for(i in n)r=n[i],r.parentNode!==e&&(I.markDeleted(r),delete n[i]);t.keyMapValid=!0}}},H=function(){N=L,L=null},k=function(){L=L?L.nextSibling:N.firstChild},F=function(){x(),L=N,N=N.parentNode},U=function(e,t,n){return k(),M.apply(null,arguments),H(),N},B=function(){return F(),L},j=function(){return k(),M("#text",null,null),L},G=function(){return N},K=function(e){D=e},$=function(){L=N.lastChild},V=3,z=[],W=function(e,t,n,o){for(var r=U(e,t,n),i=l(r),a=i.attrsArr,s=i.newAttrs,c=!1,u=V,g=0;u<arguments.length;u+=1,g+=1)if(a[g]!==arguments[u]){c=!0;break}for(;u<arguments.length;u+=1,g+=1)a[g]=arguments[u];if(g<a.length&&(c=!0,a.length=g),c){for(u=V;u<arguments.length;u+=2)s[arguments[u]]=arguments[u+1];for(var d in s)h(r,d,s[d]),s[d]=void 0}return r},q=function(e,t,n){z[0]=e,z[1]=t,z[2]=n},Y=function(e,t){z.push(e,t)},Z=function(){var e=W.apply(null,z);return z.length=0,e},Q=function(e){var t=B();return t},J=function(e,t,n,o){var r=W.apply(null,arguments);return Q.apply(null,arguments),r},X=function(e,t,n,o){return W.apply(null,arguments),$(),Q.apply(null,arguments)},ee=function(e,t){var n=j(),o=l(n);if(o.text!==e){o.text=e;for(var r=e,i=1;i<arguments.length;i+=1){var a=arguments[i];r=a(r)}n.data=r}return n};e.patch=O,e.patchInner=O,e.patchOuter=w,e.currentElement=G,e.registerFindNode=K,e.skip=$,e.elementVoid=J,e.elementOpenStart=q,e.elementOpenEnd=Z,e.elementOpen=W,e.elementClose=Q,e.elementPlaceholder=X,e.text=ee,e.attr=Y,e.symbols=c,e.attributes=m,e.applyAttr=u,e.applyProp=g,e.notifications=S}),goog.loadModule(function(){return goog.module("incrementaldom"),IncrementalDOM})}.call(this),function(){var e=goog.require;goog.require=function(t){try{return e(t)}catch(n){var o=t.split(".");throw"incrementaldom"===o[o.length-1]&&(t=t.substr(0,t.length-15)),n}}}.call(this),function(){/*
  * HTML5 Parser By Sam Blowes
  *
  * Designed for HTML5 documents
  *
  * Original code by John Resig (ejohn.org)
  * http://ejohn.org/blog/pure-javascript-html-parser/
  * Original code by Erik Arvidsson, Mozilla Public License
  * http://erik.eae.net/simplehtmlparser/simplehtmlparser.js
  *
  * ----------------------------------------------------------------------------
  * License
  * ----------------------------------------------------------------------------
  *
  * This code is triple licensed using Apache Software License 2.0,
  * Mozilla Public License or GNU Public License
  *
  * ////////////////////////////////////////////////////////////////////////////
  *
  * Licensed under the Apache License, Version 2.0 (the "License"); you may not
  * use this file except in compliance with the License.  You may obtain a copy
  * of the License at http://www.apache.org/licenses/LICENSE-2.0
  *
  * ////////////////////////////////////////////////////////////////////////////
  *
  * The contents of this file are subject to the Mozilla Public License
  * Version 1.1 (the "License"); you may not use this file except in
  * compliance with the License. You may obtain a copy of the License at
  * http://www.mozilla.org/MPL/
  *
  * Software distributed under the License is distributed on an "AS IS"
  * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  * License for the specific language governing rights and limitations
  * under the License.
  *
  * The Original Code is Simple HTML Parser.
  *
  * The Initial Developer of the Original Code is Erik Arvidsson.
  * Portions created by Erik Arvidssson are Copyright (C) 2004. All Rights
  * Reserved.
  *
  * ////////////////////////////////////////////////////////////////////////////
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License
  * as published by the Free Software Foundation; either version 2
  * of the License, or (at your option) any later version.
  *
  * This program is distributed in the hope that it will be useful,
  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  * GNU General Public License for more details.
  *
  * You should have received a copy of the GNU General Public License
  * along with this program; if not, write to the Free Software
  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
  * @license
  */
(function(){function e(e){for(var t={},n=e.split(","),o=0;o<n.length;o++)t[n[o]]=!0;return t}var t=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,n=/^<\/([-A-Za-z0-9_]+)[^>]*>/,o=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,r=e("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),i=e("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),a=e("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),s=e("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),l=e("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),c=e("script,style");window.HTMLParser=function(e,u){function g(e,t,n,c){if(t=t.toLowerCase(),i[t])for(;f.last()&&a[f.last()];)d("",f.last());if(s[t]&&f.last()==t&&d("",t),c=r[t]||!!c,c||f.push(t),u.start){var g=[];n.replace(o,function(e,t){var n=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:l[t]?t:"";g.push({name:t,value:n,escaped:n.replace(/(^|[^\\])"/g,'$1\\"')})}),u.start&&u.start(t,g,c)}}function d(e,t){if(t)for(var n=f.length-1;n>=0&&f[n]!=t;n--);else var n=0;if(n>=0){for(var o=f.length-1;o>=n;o--)u.end&&u.end(f[o]);f.length=n}}var p,h,m,f=[],_=e;for(f.last=function(){return this[this.length-1]};e;){if(h=!0,f.last()&&c[f.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+f.last()+"[^>]*>"),function(e,t){return t=t.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),u.chars&&u.chars(t),""}),d("",f.last());else if(0==e.indexOf("<!--")?(p=e.indexOf("-->"),p>=0&&(u.comment&&u.comment(e.substring(4,p)),e=e.substring(p+3),h=!1)):0==e.indexOf("</")?(m=e.match(n),m&&(e=e.substring(m[0].length),m[0].replace(n,d),h=!1)):0==e.indexOf("<")&&(m=e.match(t),m&&(e=e.substring(m[0].length),m[0].replace(t,g),h=!1)),h){p=e.indexOf("<");var E=0>p?e:e.substring(0,p);e=0>p?"":e.substring(p),u.chars&&u.chars(E)}if(e==_)throw"Parse Error: "+e;_=e}d()}}).call(this)}.call(this),function(){var e,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return t.buildFn=function(e){return function(){return t.run(e)}},t.getParser=function(){return e||window.HTMLParser},t.run=function(e){t.getParser()(e,{start:function(e,t,n){for(var o=n?IncrementalDOM.elementVoid:IncrementalDOM.elementOpen,r=[e,null,[]],i=0;i<t.length;i++)r.push(t[i].name,t[i].value);o.apply(null,r)},end:function(e){IncrementalDOM.elementClose(e)},chars:function(e){IncrementalDOM.text(e)}})},t.setParser=function(t){e=t},t}();this.metal.HTML2IncDom=t}.call(this),function(){var e=this.metal.HTML2IncDom;this.metal.withParser=e}.call(this),function(){function e(e,t){a.push(e,t)}function t(e,t,n){a=[e,t,n]}function n(e){var t=i[i.length-1][e];t.apply(null,o.slice(arguments,1))}var o=this.metalNamed.metal.array,r=function(){function n(){babelHelpers.classCallCheck(this,n)}return n.getOriginalFns=function(){return i[0]},n.startInterception=function(n,o){n=n.bind(null,i[0].elementOpen),o=o.bind(null,i[0].elementClose),i.push({attr:e,elementClose:o,elementOpen:n,elementOpenEnd:function(){return n.apply(null,a)},elementOpenStart:t,elementVoid:function(e){var t=n.apply(null,arguments);return o(e),t}})},n.stopInterception=function(){i.length>1&&i.pop()},n}(),i=[{attr:IncrementalDOM.attr,elementClose:IncrementalDOM.elementClose,elementOpen:IncrementalDOM.elementOpen,elementOpenEnd:IncrementalDOM.elementOpenEnd,elementOpenStart:IncrementalDOM.elementOpenStart,elementVoid:IncrementalDOM.elementVoid}],a=[];IncrementalDOM.attr=n.bind(null,"attr"),IncrementalDOM.elementClose=n.bind(null,"elementClose"),IncrementalDOM.elementOpen=n.bind(null,"elementOpen"),IncrementalDOM.elementOpenEnd=n.bind(null,"elementOpenEnd"),IncrementalDOM.elementOpenStart=n.bind(null,"elementOpenStart"),IncrementalDOM.elementVoid=n.bind(null,"elementVoid"),this.metal.IncrementalDomAop=r}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metal.dom,n=this.metalNamed.component.ComponentRenderer,o=this.metalNamed.component.EventsCollector,r=this.metal.IncrementalDomAop,i=function(n){function i(e){babelHelpers.classCallCheck(this,i);var t=babelHelpers.possibleConstructorReturn(this,n.call(this,e));return t.changes_={},t.eventsCollector_=new o(e),e.on("stateKeyChanged",t.handleStateKeyChanged_.bind(t)),e.on("detached",t.handleDetached_.bind(t)),t}return babelHelpers.inherits(i,n),i.prototype.addInlineListeners_=function(e){for(var t=0;t<e.length;t+=2){var n=e[t];n.startsWith("data-on")&&this.listenersToAttach_.push({eventName:n.substr(7),fn:e[t+1]})}},i.prototype.attachInlineListeners_=function(){this.eventsCollector_.startCollecting();for(var e=0;e<this.listenersToAttach_.length;e++){var t=this.listenersToAttach_[e];this.eventsCollector_.attachListener(t.eventName,t.fn)}},i.prototype.disposeUnusedSubComponents_=function(){for(var e=Object.keys(this.component_.components),t=[],n=0;n<e.length;n++)this.subComponentsFound_[e[n]]||t.push(e[n]);this.component_.disposeSubComponents(t)},i.prototype.getSubComponent_=function(e,t){var n=e;"Component"===e&&t.ctor&&(n=t.ctor,t=t.data);var o=this.component_.addSubComponent(n,t);return o.wasRendered&&o.setState(t),o},i.prototype.guaranteeParent_=function(){var e=this.component_.element;if(!e||!e.parentNode){var n=document.createElement("div");return e&&t.append(n,e),n}},i.prototype.handleDetached_=function(){this.eventsCollector_.detachAllListeners()},i.prototype.handleInterceptedCloseCall_=function(e,t){this.isComponentTag_(t)||e(t)},i.prototype.handleInterceptedOpenCall_=function(e,t){var n;return n=this.isComponentTag_(t)?this.handleSubComponentCall_.apply(this,arguments):this.handleRegularCall_.apply(this,arguments)},i.prototype.handleRegularCall_=function(t,n,o,r){var i=e.slice(arguments,4);this.addInlineListeners_((r||[]).concat(i));var a=t.apply(null,e.slice(arguments,1));return this.rootElementReached_||(this.rootElementReached_=!0,this.component_.element!==a&&(this.component_.element=a)),a},i.prototype.handleStateKeyChanged_=function(e){"element"!==e.key&&(this.changes_[e.key]=e)},i.prototype.handleSubComponentCall_=function(t,n,o,r){for(var i={},a=(r||[]).concat(e.slice(arguments,4)),s=0;s<a.length;s+=2)i[a[s]]=a[s+1];var l=this.renderSubComponent_(n,i);return l.element},i.prototype.isComponentTag_=function(e){return e[0]===e[0].toUpperCase()},i.prototype.render=function(){this.patch()},i.prototype.renderIncDom=function(){IncrementalDOM.elementVoid("div",null,["id",this.component_.id])},i.prototype.renderWithoutPatch=function(){this.changes_={},this.rootElementReached_=!1,this.subComponentsFound_={},this.listenersToAttach_=[],r.startInterception(this.handleInterceptedOpenCall_.bind(this),this.handleInterceptedCloseCall_.bind(this)),this.renderIncDom(),r.stopInterception(),this.attachInlineListeners_()},i.prototype.shouldUpdate=function(){return!0},i.prototype.patch=function(){var e=this.guaranteeParent_();e?(IncrementalDOM.patch(e,this.renderWithoutPatch.bind(this)),t.exitDocument(this.component_.element)):IncrementalDOM.patchOuter(this.component_.element,this.renderWithoutPatch.bind(this))},i.prototype.update=function(){var e=Object.keys(this.changes_);e.length>0&&this.shouldUpdate(this.changes_)&&(this.patch(),this.eventsCollector_.detachUnusedListeners(),this.disposeUnusedSubComponents_())},i.prototype.renderSubComponent_=function(e,t){var n=this.getSubComponent_(e,t);return n.getRenderer().renderWithoutPatch(),n.wasRendered||n.renderAsSubComponent(),this.subComponentsFound_[n.id]=!0,n},i}(n);i.prototype.registerMetalComponent&&i.prototype.registerMetalComponent(i,"IncrementalDomRenderer"),this.metal.IncrementalDomRenderer=i}.call(this),function(){var e={interceptFns_:[],getOriginalFn:function(e){return e.originalFn?e.originalFn:e},handleTemplateCall_:function(t,n,o,r){var i=e.interceptFns_[e.interceptFns_.length-1];return i?i.call(null,t,n,o,r):t.call(null,n,o,r)},registerForInterception:function(t,n){var o=t[n];o.originalFn||(t[n]=e.handleTemplateCall_.bind(null,o),t[n].originalFn=o)},startInterception:function(t){e.interceptFns_.push(t)},stopAllInterceptions:function(){e.interceptFns_=[]},stopInterception:function(){e.interceptFns_.pop()}};this.metal.SoyAop=e}.call(this),function(){var e=this.metal.metal,t=this.metal.withParser,n=this.metal.IncrementalDomRenderer,o=this.metal.SoyAop,r={},i=function(n){function i(){return babelHelpers.classCallCheck(this,i),babelHelpers.possibleConstructorReturn(this,n.apply(this,arguments))}return babelHelpers.inherits(i,n),i.prototype.addMissingStateKeys_=function(e){if(!this.addedMissingStateKeys_){this.addedMissingStateKeys_=!0;for(var t=this.component_,n=0;n<e.length;n++)t.getStateKeyConfig(e[n])||t.addToState(e[n],{},t.getInitialConfig()[e[n]])}},i.prototype.buildTemplateData_=function(){var t=this.component_,n={};return t.getStateKeys().forEach(function(o){if("element"!==o){var r=t[o];t.getStateKeyConfig(o).isHtml&&e.isString(r)&&(r=i.toIncDom(r)),n[o]=r}}),n},i.handleInterceptedCall_=function(e,t){var n=e.componentCtor,o=t;IncrementalDOM.elementVoid("Component",null,[],"ctor",n,"data",o)},i.toIncDom=function(e){return t.buildFn(e)},i.prototype.shouldUpdate=function(e){for(var t=this.component_.constructor.TEMPLATE,n=t?o.getOriginalFn(t).params:[],r=0;r<n.length;r++)if(e[n[r]])return!0;return!1},i.register=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"render":arguments[2];e.RENDERER=i,e.TEMPLATE=o.getOriginalFn(t[n]),e.TEMPLATE.componentCtor=e,o.registerForInterception(t,n)},i.prototype.renderIncDom=function(){var t=this.component_.constructor.TEMPLATE;e.isFunction(t)?(t=o.getOriginalFn(t),this.addMissingStateKeys_(t.params),o.startInterception(i.handleInterceptedCall_),t(this.buildTemplateData_(),null,r),o.stopInterception()):n.prototype.renderIncDom.call(this)},i.setInjectedData=function(e){r=e||{}},i}(n);i.prototype.registerMetalComponent&&i.prototype.registerMetalComponent(i,"Soy"),this.metal.Soy=i,this.metalNamed.Soy={},this.metalNamed.Soy.Soy=i,this.metalNamed.Soy.SoyAop=o}.call(this),function(){var e,t=this.metal.Component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){if(s("li",null,null,"id",e.id,"class","listitem list-group-item "+(e.elementClasses?" "+e.elementClasses:"")+" clearfix","data-index",e.index),e.item.avatar&&(s("span",null,null,"class","list-image pull-left "+e.item.avatar["class"]),o({content:e.item.avatar.content},null,n),l("span")),s("div",null,null,"class","list-main-content pull-left"),s("div",null,null,"class","list-text-primary"),o({content:e.item.textPrimary},null,n),l("div"),e.item.textSecondary&&(s("div",null,null,"class","list-text-secondary"),o({content:e.item.textSecondary},null,n),l("div")),l("div"),e.item.icons)for(var r=e.item.icons,i=r.length,a=0;i>a;a++){var g=r[a];c("span",null,null,"class","btn-icon "+g+" pull-right")}if(e.item.iconsHtml){s("div",null,null,"class","pull-right");for(var d=e.item.iconsHtml,p=d.length,h=0;p>h;h++){var m=d[h];o({content:m},null,n)}l("div")}e.item.label&&(s("span",null,null,"class","label list-label pull-right "+e.item.label["class"]),u((goog.asserts.assert(null!=e.item.label.content),e.item.label.content)),l("span")),l("li")}function o(e,t,n){e=e||{},r.asserts.assertType(null==e.content||e.content instanceof Function||e.content instanceof i.UnsanitizedText||goog.isString(e.content),"content",e.content,"?soydata.SanitizedHtml|string|undefined");var o=e.content;o&&o()}goog.module("ListItem.incrementaldom");var r=goog.require("soy"),i=goog.require("soydata");goog.require("goog.asserts"),goog.require("goog.i18n.bidi");var a=goog.require("incrementaldom"),s=a.elementOpen,l=a.elementClose,c=a.elementVoid,u=(a.elementOpenStart,a.elementOpenEnd,a.text);a.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="ListItem.render"),t.htmlContent=o,goog.DEBUG&&(o.soyTemplateName="ListItem.htmlContent"),t.render.params=["id","index","item","elementClasses"],t.htmlContent.params=["content"],e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);o.prototype.registerMetalComponent&&o.prototype.registerMetalComponent(o,"ListItem"),n.register(o,e),this.metal.ListItem=e,this.metalNamed.ListItem={},this.metalNamed.ListItem.ListItem=o,this.metalNamed.ListItem.templates=e}.call(this),function(){var e=this.metal.metal,t=this.metal.component,n=this.metal.Soy,o=this.metal.ListItem,r=function(t){function o(){return babelHelpers.classCallCheck(this,o),babelHelpers.possibleConstructorReturn(this,t.apply(this,arguments))}return babelHelpers.inherits(o,t),o.prototype.setterItemFn_=function(t){return t.textPrimary&&e.isString(t.textPrimary)&&(t.textPrimary=n.toIncDom(t.textPrimary)),t.textSecondary&&e.isString(t.textSecondary)&&(t.textSecondary=n.toIncDom(t.textSecondary)),t.avatar&&t.avatar.content&&e.isString(t.avatar.content)&&(t.avatar.content=n.toIncDom(t.avatar.content)),Array.isArray(t.iconsHtml)&&(t.iconsHtml=t.iconsHtml.map(n.toIncDom)),t},o}(t);r.prototype.registerMetalComponent&&r.prototype.registerMetalComponent(r,"ListItem"),n.register(r,o),r.STATE={item:{validator:e.isObject,setter:"setterItemFn_"},index:{value:-1}},this.metal.ListItem=r}.call(this),function(){var e,t=this.metal.Component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){o.asserts.assertType(null==e.itemsHtml||e.itemsHtml instanceof Function||e.itemsHtml instanceof r.UnsanitizedText||goog.isString(e.itemsHtml),"itemsHtml",e.itemsHtml,"?soydata.SanitizedHtml|string|undefined");var i=e.itemsHtml;if(a("div",null,null,"id",e.id,"class","list"+(e.elementClasses?" "+e.elementClasses:"")),a("ul",null,null,"class","list-group","data-onclick","handleClick"),null!=i)i();else for(var l=e.items,u=l.length,g=0;u>g;g++){var d=l[g];c({id:e.id+"-items-"+g,index:g,item:d},null,n)}s("ul"),s("div")}goog.module("List.incrementaldom");var o=goog.require("soy"),r=goog.require("soydata");goog.require("goog.asserts"),goog.require("goog.i18n.bidi");var i=goog.require("incrementaldom"),a=i.elementOpen,s=i.elementClose,l=(i.elementVoid,i.elementOpenStart,i.elementOpenEnd,i.text,i.attr,goog.require("ListItem.incrementaldom")),c=l.render;return t.render=n,goog.DEBUG&&(n.soyTemplateName="List.render"),t.render.params=["itemsHtml","elementClasses","id","items"],e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);o.prototype.registerMetalComponent&&o.prototype.registerMetalComponent(o,"List"),n.register(o,e),this.metal.List=e,this.metalNamed.List={},this.metalNamed.List.List=o,this.metalNamed.List.templates=e}.call(this),function(){var e=this.metal.dom,t=this.metal.component,n=this.metal.Soy,o=this.metal.List,r=function(t){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,t.apply(this,arguments))}return babelHelpers.inherits(n,t),n.prototype.handleClick=function(t){for(var n=t.target;n&&!e.match(n,".listitem");)n=n.parentNode;this.emit("itemSelected",n)},n}(t);r.prototype.registerMetalComponent&&r.prototype.registerMetalComponent(r,"List"),n.register(r,o),r.STATE={items:{validator:Array.isArray,valueFn:function(){return[]}},itemsHtml:{isHtml:!0}},this.metal.List=r}.call(this),function(){var e,t=this.metal.Component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){r("div",null,null,"id",e.id,"class","autocomplete autocomplete-list component "+(e.elementClasses?" "+e.elementClasses:"")),s({events:{itemSelected:e.id+":onListItemSelected_"},id:e.id+"-list"},null,n),i("div")}goog.module("Autocomplete.incrementaldom");goog.require("soy"),goog.require("soydata");goog.require("goog.i18n.bidi"),goog.require("goog.asserts");var o=goog.require("incrementaldom"),r=o.elementOpen,i=o.elementClose,a=(o.elementVoid,o.elementOpenStart,o.elementOpenEnd,o.text,o.attr,goog.require("List.incrementaldom")),s=a.render;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Autocomplete.render"),t.render.params=["elementClasses","id"],e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);o.prototype.registerMetalComponent&&o.prototype.registerMetalComponent(o,"Autocomplete"),n.register(o,e),this.metal.Autocomplete=e,this.metalNamed.Autocomplete={},this.metalNamed.Autocomplete.Autocomplete=o,this.metalNamed.Autocomplete.templates=e}.call(this),function(){var e=this.metal.metal,t=this.metal.debounce,n=this.metal.dom,o=this.metalNamed.Promise.CancellablePromise,r=this.metalNamed.position.Align,i=this.metal.AutocompleteBase,a=this.metal.Soy,s=this.metal.Autocomplete,l=function(i){function a(){return babelHelpers.classCallCheck(this,a),babelHelpers.possibleConstructorReturn(this,i.apply(this,arguments))}return babelHelpers.inherits(a,i),a.prototype.attached=function(){i.prototype.attached.call(this),this.on("click",function(e){return e.stopPropagation()}),this.eventHandler_.add(n.on(this.inputElement,"focus",this.handleInputFocus_.bind(this))),this.eventHandler_.add(n.on(document,"click",this.handleDocClick_.bind(this))),this.eventHandler_.add(n.on(window,"resize",t(this.handleWindowResize_.bind(this),100))),this.visible&&this.align()},a.prototype.align=function(){this.element.style.width=this.inputElement.offsetWidth+"px";var e=r.align(this.element,this.inputElement,r.Bottom);switch(n.removeClasses(this.element,this.positionCss_),e){case r.Top:case r.TopLeft:case r.TopRight:this.positionCss_="autocomplete-top";break;case r.Bottom:case r.BottomLeft:case r.BottomRight:this.positionCss_="autocomplete-bottom";break;default:this.positionCss_=null}n.addClasses(this.element,this.positionCss_)},a.prototype.getList=function(){return this.components[this.id+"-list"]},a.prototype.handleDocClick_=function(){document.activeElement!==this.inputElement&&(this.visible=!1)},a.prototype.handleInputFocus_=function(){this.request(this.inputElement.value)},a.prototype.handleWindowResize_=function(){this.visible&&this.align()},a.prototype.request=function(e){var t=this;return i.prototype.request.call(this,e).then(function(e){e&&(e.forEach(t.assertItemObjectStructure_),t.getList().items=e),t.visible=!!(e&&e.length>0)})},a.prototype.onListItemSelected_=function(e){var t=parseInt(e.getAttribute("data-index"),10);this.emit("select",this.getList().items[t]),this.visible=!1},a.prototype.syncVisible=function(e){i.prototype.syncVisible.call(this,e),e&&this.align()},a.prototype.assertItemObjectStructure_=function(t){if(!e.isObject(t))throw new o.CancellationError("Autocomplete item must be an object");if(!t.hasOwnProperty("textPrimary"))throw new o.CancellationError("Autocomplete item must be an object with 'textPrimary' key")},a}(i);l.prototype.registerMetalComponent&&l.prototype.registerMetalComponent(l,"Autocomplete"),a.register(l,s),l.STATE={format:{value:function(t){return e.isString(t)&&(t={textPrimary:t}),e.isObject(t)&&!t.text&&(t.text=t.textPrimary),t}}},this.metal.Autocomplete=l}.call(this),function(){var e=this.metal.Autocomplete,t=this.metal.AutocompleteBase;this.metal.autocomplete=e,this.metalNamed.autocomplete={},this.metalNamed.autocomplete.Autocomplete=e,this.metalNamed.autocomplete.AutocompleteBase=t}.call(this)}).call(this);